<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Hire Roscoe — Software • Unreal • Discord/AI • Stripe/Twilio</title>
  <meta name="description" content="One-stop software shop: Unreal games, Discord & AI bots, Stripe/Twilio quote→pay→book systems, crypto frontends, web rescue, HubSpot. Dynamic pricing with Apple Pay checkout.">

  <style>
    /* === Shared palette & feel (matched to index.html) === */
    :root{
      --ink:#0e1226; --muted:#cbd2ef; --edge:rgba(255,255,255,.12);
      --bg:#0a0f25; --card:#0f1631; --glass:rgba(255,255,255,.06);
      --brand:#5a7cff; --brand2:#3b53ff; --ok:#1cd182; --warn:#ffb020;
    }
    *{box-sizing:border-box}
    html,body{background:var(--bg);color:#f6f7fd;margin:0;font:16px/1.6 Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif}
    a{color:#cfe0ff;text-decoration:none}
    img{max-width:100%;display:block}

    /* === Sticky header (same tone as index) === */
    .top{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(10,15,37,.9),rgba(10,15,37,.6));backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.08)}
    .nav{display:flex;align-items:center;justify-content:space-between;max-width:1100px;margin:auto;padding:12px 16px;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:900;letter-spacing:.2px}
    .logo{width:34px;height:34px;object-fit:contain;border-radius:8px;background:#0b1230;border:1px solid rgba(255,255,255,.12);padding:2px;box-shadow:0 8px 28px rgba(75,98,255,.22)}
    .cta{display:flex;gap:10px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg,var(--brand),var(--brand2));color:#fff;font-weight:800;cursor:pointer;box-shadow:0 10px 30px rgba(58,84,255,.35);transition:transform .15s ease, box-shadow .15s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 14px 34px rgba(58,84,255,.45)}
    .btn.ghost{background:transparent;border-color:rgba(255,255,255,.18);color:#dfe7ff}
    .btn.sm{padding:10px 12px;font-size:14px}
    .pill{display:inline-flex;align-items:center;gap:8px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);color:#e8ecff;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:800}

    /* === Layout === */
    .wrap{max-width:1100px;margin:auto;padding:16px}
    main{display:grid;grid-template-columns:1fr 360px;gap:16px}
    @media (max-width:980px){ main{ grid-template-columns:1fr } }

    /* === Service cards === */
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    @media (max-width:780px){ .grid{ grid-template-columns:1fr } }
    .card{
      background:var(--card);
      border:1px solid var(--edge);
      border-radius:16px;
      padding:14px;
      box-shadow:0 20px 60px rgba(0,0,0,.35);
      position:relative; overflow:hidden;
      animation:pop .22s ease;
    }
    .card h3{margin:2px 0 6px}
    .muted{color:var(--muted);font-size:13px}
    .tiers,.addons,.row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .chip{
      padding:10px 12px;border:1px solid rgba(255,255,255,.14);
      border-radius:999px; cursor:pointer; user-select:none; font-weight:800;
      background:rgba(255,255,255,.06); color:#e9ecff;
      transition:transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      box-shadow:0 6px 24px rgba(0,0,0,.18);
    }
    .chip:hover{transform:translateY(-1px)}
    .chip.sel{background:linear-gradient(180deg,rgba(111,139,255,.18),rgba(111,139,255,.08)); border-color:#9fb1ff; box-shadow:0 10px 28px rgba(111,139,255,.22)}
    .pricebar{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
    .money{font-weight:900}

    /* === Cart (glass box) === */
    aside{position:sticky; top:76px; height:fit-content}
    .cart{
      background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.18);
      border-radius:16px; padding:14px; box-shadow:0 20px 60px rgba(0,0,0,.35)
    }
    .cart h3{margin:0 0 8px}
    .items{display:grid; gap:10px; margin:8px 0}
    .itm{
      display:grid; grid-template-columns:1fr auto; gap:8px;
      border:1px dashed rgba(255,255,255,.18); border-radius:12px; padding:10px;
      background:rgba(255,255,255,.05)
    }
    .itm b{font-size:14px}
    .rm{border:none;background:transparent;color:#ff7280;font-weight:900;cursor:pointer}
    .line{display:flex;justify-content:space-between;margin-top:6px;font-size:14px}
    .meter{height:8px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;margin:10px 0;border:1px solid rgba(255,255,255,.14)}
    .fill{height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--brand2))}
    .note{color:#bfc7ea;font-size:12px;margin-top:6px}

    /* === Section heading === */
    .h1{font-size:28px;line-height:1.15;margin:2px 0 8px;font-weight:900}
    .sub{color:#cbd2ef;margin-top:-4px}

    /* === Micro-anim === */
    @keyframes pop{0%{transform:scale(.985);opacity:0}100%{transform:scale(1);opacity:1}}

    /* === Sticky CTA (mobile) === */
    .sticky-cta{position:fixed;inset:auto 12px 12px 12px;display:none;gap:10px}
    .sticky-cta .btn{flex:1}
    @media (max-width:900px){ .sticky-cta{display:flex} }

    /* Buttons row in cart */
    .btnrow{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
  </style>

  <!-- Calendly modal -->
  <link rel="stylesheet" href="https://assets.calendly.com/assets/external/widget.css">
  <script async src="https://assets.calendly.com/assets/external/widget.js"></script>
</head>
<body>

<!-- Header (mirrors index.html) -->
<div class="top">
  <div class="nav">
    <div class="brand">
      <img src="/image/delco-tech-seal.png" alt="Delco Tech Division" class="logo" onerror="this.style.display='none'">
      <span>Delco Tech Division</span>
    </div>
    <div class="cta">
      <a class="pill" id="viewResume" href="/resume.pdf" target="_blank" rel="noopener">View Resume</a>
      <a class="btn ghost sm" id="bookCall" href="#">Book intro</a>
      <a class="btn sm" href="/">Home</a>
    </div>
  </div>
</div>

<section class="wrap">
  <div class="h1">Hire Roscoe — Software Engineer • Unreal Game Dev • Discord/AI</div>
  <div class="sub">Pick a service, choose a tier, add options. Prices adjust in real time. Apple Pay/Card at checkout.</div>
</section>

<main class="wrap">
  <section>
    <div class="grid" id="cards"></div>
  </section>

  <aside>
    <div class="cart">
      <h3>Your Build</h3>
      <div class="items" id="items"></div>

      <div class="row">
        <div class="chip" data-urgency="standard" title="Standard turnaround">Standard</div>
        <div class="chip" data-urgency="rush"     title="~ +20%">Rush</div>
        <div class="chip" data-urgency="ultra"    title="~ +35%">Ultra</div>
      </div>

      <div class="row">
        <div class="chip" data-complexity="basic"     title="Simpler scope">Basic</div>
        <div class="chip" data-complexity="moderate"  title="More moving parts">Moderate</div>
        <div class="chip" data-complexity="advanced"  title="Complex systems">Advanced</div>
      </div>

      <div class="meter"><div class="fill" id="fill"></div></div>

      <div class="line"><span>Pay-in-full (5% off)</span><b id="paynow">$0</b></div>
      <div class="line"><span>Reserve w/ 20% deposit</span><b id="deposit">$0</b></div>
      <div class="line" style="border-top:1px solid rgba(255,255,255,.14);padding-top:8px"><span>Total</span><b id="total">$0</b></div>

      <div class="btnrow">
        <button class="btn" id="checkout">Checkout — Apple Pay / Card</button>
        <button class="btn ghost" id="aiTailor">Tailor w/ A.I.</button>
      </div>
      <div class="note">Scope is confirmed after checkout. Calendar link appears on success.</div>
    </div>
  </aside>
</main>

<!-- Sticky CTA (mobile) -->
<div class="sticky-cta">
  <a class="btn" id="checkoutMobile" href="#">Checkout</a>
  <a class="btn ghost" id="bookMobile" href="#">Book intro</a>
</div>

<script>
(async function(){
  // Calendly
  const CAL_URL = 'https://calendly.com/rb-dreamworld/15-minute-setup-call';
  function openCalendly(){ if (window.Calendly?.initPopupWidget) Calendly.initPopupWidget({ url: CAL_URL }); else window.open(CAL_URL,'_blank'); }
  document.getElementById('bookCall').onclick = (e)=>{ e.preventDefault(); openCalendly(); };
  document.getElementById('bookMobile').onclick = (e)=>{ e.preventDefault(); openCalendly(); };

  // Catalog
  const catalog = await fetch('/api/hire/services').then(r=>r.json()).catch(()=>({services:[]}));
  const cards = document.getElementById('cards');

  const cart = [];
  const ui = {
    items: document.getElementById('items'),
    total: document.getElementById('total'),
    paynow: document.getElementById('paynow'),
    deposit: document.getElementById('deposit'),
    fill: document.getElementById('fill')
  };
  let modifiers = { urgency:'standard', complexity:'basic' };

  function dollar(n){ return '$' + Math.round(n).toLocaleString(); }

  function renderCards(){
    cards.innerHTML='';
    for(const svc of catalog.services){
      const el = document.createElement('div'); el.className='card';
      el.innerHTML = `
        <span class="muted">${svc.tagline||''}</span>
        <h3>${svc.title}</h3>
        <div class="muted">${svc.blurb||''}</div>
        <div class="tiers"></div>
        <div class="addons"></div>
        <div class="pricebar">
          <span class="muted">Tier price</span>
          <b class="money" data-money>$0</b>
        </div>
        <div class="add"><button class="btn sm">Add</button></div>
      `;
      const tiersEl = el.querySelector('.tiers');
      const addonsEl = el.querySelector('.addons');
      const moneyEl = el.querySelector('[data-money]');

      let pick = { serviceKey: svc.key, tierKey: null, addons: [] };

      // tiers
      for(const t of svc.tiers){
        const b = document.createElement('div'); b.className='chip'; b.textContent = `${t.label} — ${dollar(t.price)}`;
        b.onclick = ()=>{ pick.tierKey = t.key; [...tiersEl.children].forEach(c=>c.classList.remove('sel')); b.classList.add('sel'); moneyEl.textContent = dollar(t.price); };
        tiersEl.appendChild(b);
      }

      // addons
      if(svc.addons?.length){
        const h = document.createElement('div'); h.className='muted'; h.style.marginTop='8px'; h.textContent = 'Add-ons';
        el.insertBefore(h, addonsEl);
        for(const a of svc.addons){
          const b = document.createElement('div'); b.className='chip'; b.textContent = `${a.label} +${dollar(a.price)}`;
          b.onclick = ()=>{
            const i = pick.addons.indexOf(a.key);
            if(i>=0){ pick.addons.splice(i,1); b.classList.remove('sel'); }
            else { pick.addons.push(a.key); b.classList.add('sel'); }
          };
          addonsEl.appendChild(b);
        }
      }

      // add to cart
      el.querySelector('.add .btn').onclick = async ()=>{
        if(!pick.tierKey){ alert('Pick a tier'); return; }
        const q = await fetch('/api/hire/quote',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ selection: pick, modifiers })}).then(r=>r.json());
        cart.push({ label: q.summary, amount: q.pricing.anchor, breakdown:q.breakdown });
        renderCart();
        window.scrollTo({ top:0, behavior:'smooth' });
      };

      cards.appendChild(el);
    }
  }

  function renderCart(){
    ui.items.innerHTML='';
    cart.forEach((it,idx)=>{
      const d = document.createElement('div'); d.className='itm';
      d.innerHTML = `<div><b>${it.label}</b><div class="muted" style="font-size:12px">${it.breakdown||''}</div></div><div><b>${dollar(it.amount)}</b><br/><button class="rm" aria-label="remove">×</button></div>`;
      d.querySelector('.rm').onclick = ()=>{ cart.splice(idx,1); renderCart(); };
      ui.items.appendChild(d);
    });

    const pct = Math.min(100, (cart.length/6)*100);
    ui.fill.style.width = Math.max(8, pct) + '%';

    (async ()=>{
      const q = await fetch('/api/hire/quote',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ cart, modifiers })}).then(r=>r.json());
      ui.total.textContent = dollar(q.pricing.anchor);
      ui.paynow.textContent = dollar(q.pricing.payNow);
      ui.deposit.textContent = dollar(q.pricing.deposit);
    })();
  }

  // urgency/complexity toggles
  document.querySelectorAll('[data-urgency]').forEach(chip=>{
    chip.onclick = ()=>{ modifiers.urgency = chip.getAttribute('data-urgency'); document.querySelectorAll('[data-urgency]').forEach(c=>c.classList.toggle('sel', c===chip)); renderCart(); };
  });
  document.querySelectorAll('[data-complexity]').forEach(chip=>{
    chip.onclick = ()=>{ modifiers.complexity = chip.getAttribute('data-complexity'); document.querySelectorAll('[data-complexity]').forEach(c=>c.classList.toggle('sel', c===chip)); renderCart(); };
  });

  // AI tailor (optional)
  document.getElementById('aiTailor').onclick = async ()=>{
    const idea = prompt("Tell me what you’re building (one sentence):");
    if(!idea) return;
    await fetch('/api/lead',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ type:'hire_idea', idea })});
    alert('Nice — selections will be priced with AI-tailored weighting where appropriate.');
    renderCart();
  };

  // Checkout (desktop + mobile)
  async function doCheckout(){
    if(!cart.length){ alert('Add at least one service'); return; }
    const items = cart.map(c => ({ label:c.label, amountCents: Math.round(c.amount*100) }));
    const r = await fetch('/api/hire/checkout',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ items })}).then(r=>r.json());
    if(r.url) location.href = r.url; else alert('Could not start checkout.');
  }
  document.getElementById('checkout').onclick = (e)=>{ e.preventDefault(); doCheckout(); };
  document.getElementById('checkoutMobile').onclick = (e)=>{ e.preventDefault(); doCheckout(); };

  // initial render
  renderCards();
  renderCart();
})();
</script>
</body>
</html>
