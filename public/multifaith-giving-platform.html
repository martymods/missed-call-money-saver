<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Multi-Faith Giving Platform</title>
  <meta name="description" content="Give and manage faith-specific donations across every region with a single secure platform."/>
  <style>
    @font-face {
      font-family: 'Faithfully';
      src: url('fonts/Faithfully.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }

    :root {
      --bg: #f8f6f1;
      --bg-soft: #ffffff;
      --bg-glass: rgba(255, 255, 255, 0.75);
      --card: #ffffff;
      --ink: #1f2933;
      --muted: #5f6b7d;
      --accent: #d4a24c;
      --accent-2: #7a9d92;
      --accent-3: #e2c184;
      --danger: #d9534f;
      font-family: 'Faithfully', 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.92), transparent 55%), var(--bg);
      color: var(--ink);
      font: 16px/1.6 'Faithfully', 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    img {
      max-width: 100%;
      display: block;
    }

    a {
      color: var(--accent);
    }

    a:hover {
      color: var(--accent-2);
    }

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.94);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(31, 41, 55, 0.08);
    }

    .mobile-app-bar {
      display: none;
    }

    .nav {
      width: min(100%, 1200px);
      margin: 0 auto;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 18px;
      justify-content: space-between;
      flex-wrap: wrap;
      color: var(--ink);
    }

    .language-switcher {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .language-toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(31, 41, 55, 0.12);
      background: rgba(255, 255, 255, 0.9);
      color: var(--ink);
      font-family: inherit;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(31, 41, 55, 0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .language-toggle:hover,
    .language-toggle:focus {
      transform: translateY(-1px);
      border-color: rgba(212, 162, 76, 0.45);
      box-shadow: 0 12px 28px rgba(212, 162, 76, 0.22);
      outline: none;
    }

    .language-toggle span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .language-flag {
      font-size: 18px;
    }

    .language-menu {
      position: absolute;
      top: calc(100% + 10px);
      right: 0;
      min-width: 220px;
      margin: 0;
      padding: 10px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.96);
      border: 1px solid rgba(31, 41, 55, 0.12);
      box-shadow: 0 16px 32px rgba(31, 41, 55, 0.18);
      list-style: none;
      display: grid;
      gap: 6px;
      z-index: 120;
    }

    .language-menu[hidden] {
      display: none;
    }

    .language-option {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      border: none;
      background: transparent;
      font: inherit;
      color: var(--ink);
      cursor: pointer;
      text-align: left;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .language-option:hover,
    .language-option:focus {
      background: rgba(212, 162, 76, 0.12);
      color: var(--accent);
      outline: none;
    }

    .language-option span {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .language-option[data-active="true"] {
      background: linear-gradient(135deg, rgba(212, 162, 76, 0.16), rgba(122, 157, 146, 0.16));
      color: var(--accent);
    }

    .language-switcher--compact .language-toggle {
      padding: 8px 12px;
      font-size: 13px;
      box-shadow: none;
      border-color: rgba(31, 41, 55, 0.1);
      background: rgba(255, 255, 255, 0.85);
    }

    .language-switcher--compact .language-menu {
      left: 0;
      right: auto;
    }

    .brand {
      display: flex;
      align-items: baseline;
      gap: 10px;
      font-weight: 800;
      letter-spacing: 0.6px;
      text-transform: uppercase;
      color: var(--ink);
    }

    .brand span {
      font-size: 13px;
      color: var(--muted);
    }

    .nav a.btn {
      text-decoration: none;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 11px 18px;
      border-radius: 12px;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(135deg, var(--accent), var(--accent-3));
      border: 1px solid rgba(212, 162, 76, 0.35);
      box-shadow: 0 10px 26px rgba(212, 162, 76, 0.25);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: box-shadow 0.2s ease, transform 0.2s ease;
      min-height: 48px;
      touch-action: manipulation;
    }

    .btn.liquid {
      padding: 0;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(212, 162, 76, 0.5);
      box-shadow: 0 12px 30px rgba(225, 192, 128, 0.3);
      text-transform: uppercase;
      letter-spacing: 0.6px;
      min-width: 0;
    }

    .btn.liquid span {
      position: relative;
      z-index: 1;
      padding: 14px 36px;
      color: var(--ink);
    }

    .btn.liquid .liquid {
      position: absolute;
      inset: -80px 0 auto;
      height: 220px;
      background: linear-gradient(135deg, rgba(212, 162, 76, 0.65), rgba(226, 193, 132, 0.7), rgba(122, 157, 146, 0.65));
      background-size: 200% 200%;
      animation: holographicFlow 8s ease-in-out infinite;
      box-shadow: inset 0 0 40px rgba(255, 255, 255, 0.45);
      z-index: 0;
      transition: 0.6s ease;
    }

    .btn.liquid .liquid::after,
    .btn.liquid .liquid::before {
      content: '';
      position: absolute;
      width: 200%;
      height: 200%;
      top: 0;
      left: 0;
      transform: translate(-25%, -75%);
      border-radius: 45%;
    }

    .btn.liquid .liquid::after {
      background: rgba(255, 255, 255, 0.76);
      box-shadow: 0 0 12px 6px rgba(212, 162, 76, 0.45), inset 0 0 8px rgba(226, 193, 132, 0.42);
      animation: animate 5s linear infinite;
      opacity: 0.85;
    }

    .btn.liquid .liquid::before {
      background: rgba(255, 255, 255, 0.35);
      box-shadow: 0 0 12px rgba(226, 193, 132, 0.4), inset 0 0 6px rgba(226, 193, 132, 0.35);
      animation: animate 7s linear infinite;
    }

    .btn.liquid:hover .liquid {
      top: -140px;
    }

    .btn.liquid:hover {
      box-shadow: 0 0 8px rgba(212, 162, 76, 0.6), inset 0 0 6px rgba(212, 162, 76, 0.55);
      transform: translateY(-2px);
    }

    .btn.ghost {
      background: #fff;
      color: var(--accent);
      border-color: rgba(212, 162, 76, 0.35);
      box-shadow: none;
    }

    .btn.ghost:hover {
      background: rgba(212, 162, 76, 0.1);
      color: var(--ink);
    }

    main {
      width: min(100%, 1200px);
      margin: 0 auto;
      padding: 24px 18px 90px;
      display: grid;
      gap: 56px;
      flex: 1 0 auto;
    }

    .hero {
      display: grid;
      gap: 24px;
      align-items: center;
      grid-template-columns: minmax(0, 1fr);
    }

    .hero h1 {
      margin: 0;
      font-size: clamp(36px, 6vw, 58px);
      line-height: 1.1;
      font-weight: 900;
      letter-spacing: -0.5px;
    }

    .hero p {
      margin: 14px 0 26px;
      color: var(--muted);
      font-size: 18px;
      max-width: 580px;
    }

    .hero-media {
      position: relative;
      border-radius: 30px;
      overflow: hidden;
      background: var(--card);
      box-shadow: 0 18px 44px rgba(31, 41, 55, 0.15);
      min-height: 260px;
    }

    .hero-media:before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(212, 162, 76, 0.28), transparent 55%);
      pointer-events: none;
    }

    .hero-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 12px;
    }

    .hero-list li {
      display: flex;
      align-items: center;
      gap: 12px;
      background: rgba(31, 41, 55, 0.05);
      border-radius: 16px;
      padding: 14px 16px;
      border: 1px solid rgba(31, 41, 55, 0.08);
      font-weight: 600;
      color: var(--ink);
    }

    .hero-list li span:first-child {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 34px;
      height: 34px;
      border-radius: 12px;
      background: rgba(212, 162, 76, 0.18);
      color: var(--accent);
      font-weight: 700;
      flex-shrink: 0;
    }

    .hero-list li span:last-child {
      display: block;
      width: auto;
      height: auto;
      border-radius: 0;
      background: none;
      color: inherit;
      font-weight: 600;
      line-height: 1.4;
      flex: 1;
    }

    section h2 {
      margin: 0 0 18px;
      font-size: clamp(28px, 4vw, 36px);
      font-weight: 900;
      letter-spacing: -0.3px;
    }

    section p.lead {
      margin: 0 0 24px;
      color: var(--muted);
      max-width: 720px;
      font-size: 17px;
    }

    .region-slider {
      position: relative;
      background: var(--bg-soft);
      border-radius: 24px;
      border: 1px solid rgba(31, 41, 55, 0.12);
      overflow: hidden;
      box-shadow: 0 18px 38px rgba(31, 41, 55, 0.12);
      max-width: 960px;
      margin: 0 auto;
    }

    .region-narration-card {
      margin: 18px auto 0;
      max-width: 960px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 24px;
      border: 1px solid rgba(212, 162, 76, 0.28);
      box-shadow: 0 18px 34px rgba(31, 41, 55, 0.16);
      padding: 20px 22px;
      display: grid;
      gap: 14px;
    }

    .leaders-lab {
      --leaders-accent: var(--accent);
      --leaders-accent-soft: rgba(212, 162, 76, 0.14);
      margin: 80px 0;
      padding: 48px;
      border-radius: 32px;
      border: 1px solid rgba(31, 41, 55, 0.12);
      background: linear-gradient(135deg, rgba(212, 162, 76, 0.08), rgba(122, 157, 146, 0.08)), rgba(255, 255, 255, 0.86);
      box-shadow: 0 24px 48px rgba(31, 41, 55, 0.16);
      display: grid;
      gap: 28px;
    }

    .leaders-lab-head {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 28px;
      flex-wrap: wrap;
    }

    .leaders-lab-head h2 {
      margin-bottom: 14px;
    }

    .leaders-lab-ticker {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      max-width: 360px;
      margin-left: auto;
    }

    .leaders-ticker-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      background: var(--leaders-accent-soft);
      color: var(--ink);
      font-size: 13px;
      font-weight: 600;
      border: 1px solid rgba(31, 41, 55, 0.08);
      letter-spacing: 0.3px;
      text-transform: uppercase;
    }

    .leaders-ticker-chip strong {
      color: var(--leaders-accent);
    }

    .leaders-lab-shell {
      display: grid;
      gap: 28px;
    }

    .leaders-tabs {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .leader-tab {
      padding: 10px 18px;
      border-radius: 16px;
      border: 1px solid rgba(31, 41, 55, 0.16);
      background: rgba(255, 255, 255, 0.82);
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: rgba(31, 41, 55, 0.72);
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
    }

    .leader-tab:hover,
    .leader-tab:focus {
      transform: translateY(-2px);
      border-color: var(--leaders-accent);
      color: var(--leaders-accent);
      outline: none;
    }

    .leader-tab.is-active {
      background: var(--leaders-accent);
      color: #ffffff;
      border-color: transparent;
      box-shadow: 0 14px 30px rgba(31, 41, 55, 0.18);
    }

    .leaders-body {
      display: grid;
      grid-template-columns: minmax(0, 320px) minmax(0, 1fr);
      gap: 32px;
      align-items: start;
    }

    .leaders-summary {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 28px;
      border: 1px solid rgba(31, 41, 55, 0.1);
      box-shadow: 0 18px 40px rgba(31, 41, 55, 0.12);
      padding: 22px 24px;
      display: grid;
      gap: 22px;
      position: sticky;
      top: 108px;
    }

    .leaders-summary p {
      margin: 0;
      font-size: 16px;
      line-height: 1.6;
      color: rgba(31, 41, 55, 0.8);
    }

    .leaders-metrics {
      display: grid;
      gap: 12px;
    }

    .leader-metric {
      background: rgba(31, 41, 55, 0.04);
      border-radius: 18px;
      padding: 16px 18px;
      border: 1px solid rgba(31, 41, 55, 0.08);
      border-left: 4px solid var(--leaders-accent);
      display: grid;
      gap: 6px;
    }

    .leader-metric strong {
      font-size: 17px;
      letter-spacing: -0.2px;
      color: var(--ink);
    }

    .leader-metric span {
      font-size: 13px;
      color: var(--muted);
    }

    .leader-metric span span {
      font-size: 12px;
      color: rgba(31, 41, 55, 0.6);
      letter-spacing: 0.2px;
    }

    .leaders-pipelines h3 {
      margin: 0 0 10px;
      font-size: 13px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: rgba(31, 41, 55, 0.65);
    }

    .leaders-pipelines ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
    }

    .leaders-pipelines li {
      background: rgba(31, 41, 55, 0.04);
      border-radius: 14px;
      padding: 12px 14px;
      border: 1px solid rgba(31, 41, 55, 0.06);
      font-size: 14px;
      line-height: 1.5;
    }

    .leaders-main {
      display: grid;
      gap: 24px;
    }

    .leaders-carousel {
      display: grid;
      grid-template-columns: auto minmax(0, 1fr) auto;
      align-items: center;
      gap: 14px;
    }

    .leaders-carousel-viewport {
      overflow: hidden;
      border-radius: 26px;
      border: 1px solid rgba(31, 41, 55, 0.1);
      background: rgba(255, 255, 255, 0.82);
    }

    .leaders-carousel-track {
      display: grid;
      grid-auto-flow: column;
      gap: 18px;
      padding: 16px 18px 22px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
    }

    .leaders-carousel-track::-webkit-scrollbar {
      height: 8px;
    }

    .leaders-carousel-track::-webkit-scrollbar-thumb {
      background: rgba(31, 41, 55, 0.15);
      border-radius: 999px;
    }

    .leader-card {
      min-width: 320px;
      max-width: 320px;
      background: rgba(255, 255, 255, 0.94);
      border-radius: 22px;
      border: 1px solid rgba(31, 41, 55, 0.1);
      box-shadow: 0 18px 36px rgba(31, 41, 55, 0.16);
      display: grid;
      gap: 0;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
      scroll-snap-align: center;
    }

    .leader-card:hover,
    .leader-card:focus {
      transform: translateY(-6px);
      box-shadow: 0 22px 44px rgba(31, 41, 55, 0.22);
      outline: none;
    }

    .leader-card.is-active {
      border-color: var(--leaders-accent);
      box-shadow: 0 26px 52px rgba(31, 41, 55, 0.26);
      transform: translateY(-8px);
    }

    .leader-card-media {
      position: relative;
      overflow: hidden;
      border-radius: 22px 22px 0 0;
    }

    .leader-card-media img {
      width: 100%;
      height: 190px;
      object-fit: cover;
      display: block;
    }

    .leader-card-body {
      padding: 18px 20px 20px;
      display: grid;
      gap: 14px;
    }

    .leader-card-header {
      display: grid;
      gap: 4px;
    }

    .leader-card-title {
      margin: 0;
      font-size: 20px;
      letter-spacing: -0.2px;
    }

    .leader-card-role {
      margin: 0;
      font-size: 14px;
      color: var(--muted);
    }

    .leader-card-stats {
      display: grid;
      gap: 6px;
    }

    .leader-card-stat {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: rgba(31, 41, 55, 0.78);
      gap: 12px;
    }

    .leader-card-stat strong {
      font-weight: 700;
      color: var(--ink);
    }

    .leader-card-stat span {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 2px;
      text-align: right;
    }

    .leader-card-stat small {
      font-size: 11px;
      color: rgba(31, 41, 55, 0.58);
      letter-spacing: 0.2px;
    }

    .leader-card-story {
      margin: 0;
      font-size: 14px;
      line-height: 1.5;
      color: rgba(31, 41, 55, 0.75);
      min-height: 66px;
    }

    .leader-tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .leader-tag {
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--leaders-accent-soft);
      color: rgba(31, 41, 55, 0.8);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    .leaders-carousel-btn {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: none;
      background: rgba(31, 41, 55, 0.08);
      color: var(--ink);
      font-size: 24px;
      font-weight: 700;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s ease, transform 0.2s ease;
    }

    .leaders-carousel-btn:hover,
    .leaders-carousel-btn:focus {
      background: var(--leaders-accent);
      color: #fff;
      transform: translateY(-2px);
      outline: none;
    }

    .leaders-carousel-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }

    .leader-intel-grid {
      display: grid;
      gap: 18px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .leader-intel-block {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 22px;
      border: 1px solid rgba(31, 41, 55, 0.1);
      padding: 18px 20px;
      display: grid;
      gap: 12px;
      box-shadow: 0 14px 32px rgba(31, 41, 55, 0.14);
    }

    .leader-intel-block h3 {
      margin: 0;
      font-size: 14px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: rgba(31, 41, 55, 0.68);
    }

    .leader-intel-block p {
      margin: 0;
      font-size: 15px;
      line-height: 1.5;
      color: rgba(31, 41, 55, 0.82);
    }

    .leader-briefing,
    .leader-signals,
    .leader-links {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
    }

    .leader-briefing li,
    .leader-signals li {
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(31, 41, 55, 0.04);
      border: 1px solid rgba(31, 41, 55, 0.06);
      font-size: 14px;
      line-height: 1.5;
      color: rgba(31, 41, 55, 0.8);
    }

    .leader-signals li {
      position: relative;
      display: grid;
      gap: 6px;
    }

    .leader-signal-entry a {
      color: var(--leaders-accent);
      font-weight: 600;
      text-decoration: none;
    }

    .leader-signal-entry a:hover,
    .leader-signal-entry a:focus {
      text-decoration: underline;
    }

    .leader-signal-entry small {
      font-size: 12px;
      color: rgba(31, 41, 55, 0.6);
      line-height: 1.4;
    }

    .leader-signal-entry.leader-signal-live {
      border-color: var(--leaders-accent);
      box-shadow: inset 0 0 0 1px rgba(212, 162, 76, 0.2);
      background: rgba(212, 162, 76, 0.12);
    }

    .leader-signal-entry.leader-signal-loading {
      font-style: italic;
      color: rgba(31, 41, 55, 0.62);
      background: rgba(31, 41, 55, 0.05);
      animation: signalPulse 2s ease-in-out infinite;
    }

    .leader-signal-entry.leader-signal-placeholder {
      color: rgba(31, 41, 55, 0.6);
    }

    @keyframes signalPulse {
      0% {
        opacity: 0.55;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0.55;
      }
    }

    .leader-links li {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .leader-links a {
      font-weight: 600;
      color: var(--leaders-accent);
      text-decoration: none;
    }

    .leader-links a:hover,
    .leader-links a:focus {
      text-decoration: underline;
    }

    .region-narration-card[data-state="loading"] {
      opacity: 0.8;
    }

    .region-narration-head {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .region-narration-head strong {
      font-size: 15px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: rgba(31, 41, 55, 0.72);
    }

    .region-narration-subject {
      display: block;
      font-size: 14px;
      color: rgba(31, 41, 55, 0.65);
      margin-top: 4px;
    }

    .region-narration-subject[hidden] {
      display: none;
    }

    .region-narration-text {
      margin: 0;
      font-size: 15px;
      line-height: 1.5;
      color: rgba(31, 41, 55, 0.85);
    }

    .region-narration-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .region-narration-actions .btn {
      min-width: 160px;
    }

    .region-narration-refresh,
    .region-narration-stop {
      border: none;
      background: transparent;
      font-weight: 600;
      color: var(--accent);
      cursor: pointer;
      padding: 0;
    }

    .region-narration-refresh:disabled,
    .region-narration-stop:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .region-narration-stop[hidden] {
      display: none;
    }

    .region-track {
      display: flex;
      transition: transform 0.6s ease;
      width: 100%;
      position: relative;
      z-index: 0;
    }

    .region-transition {
      position: absolute;
      top: var(--transition-top, 0);
      left: var(--transition-left, 0);
      width: var(--transition-width, 100%);
      height: var(--transition-height, 100%);
      pointer-events: none;
      opacity: 0;
      z-index: 1;
      transition: opacity 0.28s ease;
      border-radius: inherit;
      overflow: hidden;
    }

    .region-transition.is-active {
      opacity: 1;
    }

    .transition-scene {
      position: absolute;
      inset: 0;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
    }

    .region-transition.is-active .transition-scene[data-scene="current"] {
      animation: regionSceneDim var(--transition-duration, 1400ms) cubic-bezier(1, 0, 1, 1) forwards;
    }

    .transition-scene[data-scene="next"] {
      filter: brightness(0%);
      -webkit-mask-image: var(--transition-mask-image, none);
      mask-image: var(--transition-mask-image, none);
      -webkit-mask-size: 6%;
      mask-size: 6%;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
    }

    .region-transition.is-active .transition-scene[data-scene="next"] {
      animation: regionSceneReveal var(--transition-duration, 1400ms) cubic-bezier(1, 0, 1, 1) forwards;
    }

    .region-slide {
      min-width: 100%;
      padding: 26px;
      display: grid;
      gap: 20px;
      grid-template-columns: minmax(280px, 1fr) minmax(260px, 0.8fr);
      grid-template-areas:
        'media meta'
        'curr tags';
      align-items: start;
    }

    .region-media {
      grid-area: media;
      position: relative;
      width: 100%;
      height: 220px;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 16px 28px rgba(31, 41, 55, 0.18);
    }

    .region-media::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      box-shadow: inset 0 0 0 1px rgba(31, 41, 55, 0.08);
      pointer-events: none;
    }

    .region-slide .region-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      will-change: transform;
      transform: scale(1.04);
      animation-duration: 14s;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
      animation-play-state: paused;
    }

    .region-slide.pan-up .region-image {
      animation-name: regionPanUp;
      transform-origin: center bottom;
    }

    .region-slide.pan-down .region-image {
      animation-name: regionPanDown;
      transform-origin: center top;
    }

    .region-slide.active .region-image {
      animation-play-state: running;
    }

    @keyframes regionPanUp {
      0% {
        transform: scale(1.05) translateY(12%);
      }
      100% {
        transform: scale(1.05) translateY(-12%);
      }
    }

    @keyframes regionPanDown {
      0% {
        transform: scale(1.05) translateY(-12%);
      }
      100% {
        transform: scale(1.05) translateY(12%);
      }
    }

    @keyframes regionSceneReveal {
      0% {
        filter: brightness(0%);
        -webkit-mask-size: 6%;
        mask-size: 6%;
      }
      12% {
        filter: brightness(55%);
        -webkit-mask-size: 12%;
        mask-size: 12%;
      }
      28% {
        filter: brightness(100%);
      }
      100% {
        filter: brightness(100%);
        -webkit-mask-size: 1600%;
        mask-size: 1600%;
      }
    }

    @keyframes regionSceneDim {
      0% {
        filter: brightness(100%);
      }
      100% {
        filter: brightness(40%);
      }
    }

    .region-meta {
      grid-area: meta;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .region-meta h3 {
      margin: 0;
      font-size: 26px;
      font-weight: 800;
      color: var(--ink);
    }

    .region-followers {
      display: inline-flex;
      flex-direction: column;
      gap: 4px;
      align-self: flex-start;
      padding: 12px 16px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.86);
      border: 1px solid rgba(31, 41, 55, 0.12);
      box-shadow: 0 12px 24px rgba(31, 41, 55, 0.12);
      max-width: 260px;
      min-width: 0;
    }

    .region-followers__label {
      font-size: 12px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .region-followers__value {
      font-size: 22px;
      font-weight: 800;
      color: var(--ink);
      line-height: 1.1;
    }

    .region-followers--loading .region-followers__value {
      color: var(--muted);
    }

    .region-currencies {
      grid-area: curr;
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-self: start;
    }

    .region-currencies__label {
      font-size: 15px;
      letter-spacing: 0.35px;
      color: var(--accent);
      text-transform: uppercase;
    }

    .region-currency-list {
      margin: 0;
      padding: 0;
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }

    .region-currency-item {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 12px 18px;
      border-radius: 16px;
      background: #ffffff;
      border: 1px solid rgba(31, 41, 55, 0.12);
      box-shadow: 0 10px 20px rgba(31, 41, 55, 0.15);
      justify-content: space-between;
      min-width: 220px;
      flex: 1 1 220px;
    }

    .region-currency-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--ink);
    }

    .region-currency-image {
      width: 72px;
      height: 48px;
      border-radius: 10px;
      object-fit: contain;
      object-position: center;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(243, 246, 248, 0.9));
      box-shadow: inset 0 0 0 1px rgba(31, 41, 55, 0.12);
    }

    .region-currency-code {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
      letter-spacing: 0.5px;
    }

    .region-tags {
      grid-area: tags;
      margin: 0;
      padding: 0;
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      align-self: start;
      perspective: 1000px;
      transform-style: preserve-3d;
    }

    .region-tag {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 18px;
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(214, 219, 229, 0.9), rgba(245, 246, 250, 0.95));
      background-size: 220% 220%;
      animation: regionTagSheen 9s ease-in-out infinite;
      border: 1px solid rgba(180, 188, 204, 0.4);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.7), 0 12px 28px rgba(75, 89, 110, 0.18);
      color: var(--ink);
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.35px;
      line-height: 1.25;
      white-space: normal;
      transform: perspective(800px) rotateY(0deg) translateZ(0);
      transform-style: preserve-3d;
      transition: transform 0.5s ease, box-shadow 0.5s ease, background-position 0.6s ease, color 0.5s ease;
      overflow: hidden;
      gap: 6px;
    }

    .region-tag::after {
      content: '';
      position: absolute;
      inset: 10%;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.95), transparent 65%);
      mix-blend-mode: screen;
      opacity: 0.8;
      transition: opacity 0.5s ease;
      pointer-events: none;
    }

    .region-tags:hover .region-tag,
    .region-tags:focus-within .region-tag,
    .region-tags:active .region-tag {
      transform: perspective(800px) rotateY(25deg);
    }

    .region-tag:hover,
    .region-tag:focus,
    .region-tag:active {
      background-position: 80% 20%;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.8), 0 18px 40px rgba(75, 89, 110, 0.24);
      color: var(--accent);
      transform: perspective(900px) rotateY(0deg) translateZ(16px);
    }

    .region-tag:hover::after,
    .region-tag:focus::after,
    .region-tag:active::after {
      opacity: 1;
    }

    .region-tag:hover ~ .region-tag,
    .region-tag:focus ~ .region-tag,
    .region-tag:active ~ .region-tag {
      transform: perspective(800px) rotateY(-25deg);
    }

    .region-tag-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    .region-tag-metric {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(22, 78, 99, 0.12);
      color: var(--accent);
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.45px;
      text-transform: uppercase;
      transition: opacity 0.3s ease;
    }

    .region-tag.region-tag--loading .region-tag-metric {
      opacity: 0.6;
      background: rgba(148, 163, 184, 0.18);
      color: rgba(15, 23, 42, 0.65);
    }

    @keyframes regionTagSheen {
      0%,
      100% {
        background-position: 15% 20%;
      }
      40% {
        background-position: 85% 80%;
      }
      70% {
        background-position: 25% 60%;
      }
    }

    .faith-identity {
      display: inline-flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 12px;
    }

    .faith-label {
      font-weight: 700;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      font-size: 13px;
      color: var(--accent);
    }

    .faith-symbol {
      position: relative;
      width: 66px;
      height: 66px;
      border-radius: 22px;
      background: linear-gradient(135deg, rgba(245, 214, 148, 0.95), rgba(255, 238, 207, 0.85), rgba(205, 220, 212, 0.9));
      background-size: 200% 200%;
      animation: holographicFlow 9s ease-in-out infinite;
      mask-image: var(--symbol-image);
      mask-repeat: no-repeat;
      mask-position: center;
      mask-size: 70%;
      -webkit-mask-image: var(--symbol-image);
      -webkit-mask-repeat: no-repeat;
      -webkit-mask-position: center;
      -webkit-mask-size: 70%;
      box-shadow: 0 12px 28px rgba(212, 162, 76, 0.32);
      transition: transform 0.18s ease, box-shadow 0.2s ease;
      transform: perspective(600px) rotateX(0deg) rotateY(0deg);
      transform-style: preserve-3d;
      pointer-events: auto;
    }

    .faith-symbol::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      box-shadow: inset 0 0 18px rgba(255, 255, 255, 0.25);
      opacity: 0.6;
      pointer-events: none;
    }

    .faith-symbol:hover {
      box-shadow: 0 16px 40px rgba(212, 162, 76, 0.35);
    }

    .slider-controls {
      position: absolute;
      inset: auto 0 18px 0;
      display: flex;
      justify-content: space-between;
      padding: 0 22px;
      pointer-events: none;
      z-index: 2;
    }

    .slider-btn {
      pointer-events: all;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid rgba(31, 41, 55, 0.14);
      background: rgba(255, 255, 255, 0.9);
      color: var(--ink);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(31, 41, 55, 0.14);
    }

    .slider-btn:hover {
      background: var(--accent);
      color: #fff;
    }

    .slider-dots {
      position: absolute;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%);
      display: inline-flex;
      gap: 10px;
      z-index: 2;
    }

    .slider-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(31, 41, 55, 0.16);
      cursor: pointer;
    }

    .slider-dot.active {
      background: var(--accent);
    }

    .sector-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 18px;
    }

    .sector-card {
      background: var(--card);
      padding: 20px;
      border-radius: 18px;
      border: 1px solid rgba(31, 41, 55, 0.08);
      display: grid;
      gap: 10px;
      box-shadow: 0 12px 28px rgba(31, 41, 55, 0.12);
    }

    .sector-card h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 800;
      color: var(--ink);
    }

    .sector-card p {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
    }

    form {
      display: grid;
      gap: 18px;
    }

    .form-card {
      background: var(--card);
      border-radius: 24px;
      border: 1px solid rgba(31, 41, 55, 0.1);
      padding: 24px;
      box-shadow: 0 18px 40px rgba(31, 41, 55, 0.14);
    }

    .form-card h3 {
      margin: 0 0 14px;
      font-size: 22px;
      font-weight: 800;
    }

    .form-row {
      display: grid;
      gap: 16px;
      grid-template-columns: 1fr;
    }

    .form-row label {
      display: grid;
      gap: 6px;
      width: 100%;
    }

    .form-row label > input,
    .form-row label > select,
    .form-row label > textarea {
      width: 100%;
    }

    .form-actions {
      display: flex;
      justify-content: flex-start;
      flex-wrap: wrap;
    }

    .form-actions .btn {
      min-width: 220px;
    }

    @media (min-width: 720px) {
      .form-row.double {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .form-row.triple {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    label {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.3px;
      color: var(--muted);
    }

    input, select, textarea {
      margin-top: 6px;
      border-radius: 14px;
      border: 1px solid rgba(31, 41, 55, 0.14);
      background: rgba(255, 255, 255, 0.9);
      color: var(--ink);
      padding: 12px;
      font-size: 16px;
      font-family: inherit;
    }

    input:focus, select:focus, textarea:focus {
      outline: 2px solid rgba(212, 162, 76, 0.55);
      outline-offset: 1px;
    }

    .status {
      border-radius: 16px;
      padding: 14px 16px;
      font-size: 14px;
      background: rgba(31, 41, 55, 0.04);
      border: 1px solid rgba(31, 41, 55, 0.12);
      color: var(--ink);
    }

    .status.success {
      background: rgba(122, 157, 146, 0.18);
      border-color: rgba(122, 157, 146, 0.5);
      color: #2f4f4f;
    }

    .status.error {
      background: rgba(217, 83, 79, 0.12);
      border-color: rgba(217, 83, 79, 0.4);
      color: #7a1d1a;
    }

    .status a {
      color: var(--accent);
      word-break: break-all;
    }

    .inline-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .nav .inline-actions {
      margin-left: auto;
    }

    .inline-actions .btn {
      flex: none;
    }

    .section-head {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 24px;
      flex-wrap: wrap;
    }

    .section-head .lead {
      margin-bottom: 0;
    }

    .community-grid {
      margin-top: 32px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 24px;
    }

    .community-card {
      background: var(--card);
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid rgba(31, 41, 55, 0.1);
      display: flex;
      flex-direction: column;
      min-height: 100%;
      box-shadow: 0 20px 36px rgba(31, 41, 55, 0.14);
    }

    .manage-card {
      display: grid;
      gap: 24px;
    }

    .quick-stripe-section {
      display: grid;
      gap: 28px;
    }

    .quick-stripe-card {
      background: linear-gradient(145deg, rgba(212, 162, 76, 0.22), rgba(122, 157, 146, 0.18));
      border-radius: 28px;
      border: 1px solid rgba(212, 162, 76, 0.28);
      padding: 32px;
      display: grid;
      gap: 26px;
      box-shadow: 0 28px 46px rgba(31, 41, 55, 0.18);
      position: relative;
      overflow: hidden;
    }

    .quick-stripe-card::before {
      content: '';
      position: absolute;
      inset: -40% 35% auto -20%;
      height: 260px;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.65), transparent 70%);
      opacity: 0.75;
      pointer-events: none;
    }

    .quick-stripe-card > * {
      position: relative;
      z-index: 1;
    }

    .quick-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 8px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.4);
      border: 1px solid rgba(212, 162, 76, 0.32);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.45);
    }

    .quick-tabs .manage-tab {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 14px 18px;
      flex: 1 1 160px;
      background: transparent;
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      color: var(--muted);
      border: 1px solid transparent;
    }

    .quick-tabs .manage-tab .quick-tab-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.6);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.65);
    }

    .quick-tabs .manage-tab svg {
      width: 20px;
      height: 20px;
    }

    .quick-tabs .manage-tab.is-active {
      color: #fff;
      border-color: rgba(255, 255, 255, 0.45);
      box-shadow: 0 18px 32px rgba(212, 162, 76, 0.35);
    }

    .quick-tabs .manage-tab.is-active .quick-tab-icon {
      background: rgba(255, 255, 255, 0.9);
    }

    .quick-panel {
      display: grid;
      gap: 24px;
    }

    .quick-faith-intro {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 24px;
      align-items: center;
      justify-content: space-between;
    }

    .quick-faith-heading {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.4px;
    }

    .quick-faith-heading span {
      display: block;
      font-size: 15px;
      font-weight: 500;
      color: rgba(31, 41, 55, 0.75);
    }

    .quick-faith-icon {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.65);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    .quick-faith-icon svg {
      width: 38px;
      height: 38px;
    }

    .quick-amounts {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    }

    .quick-amount {
      border: 1px solid rgba(31, 41, 55, 0.08);
      border-radius: 18px;
      padding: 18px;
      background: rgba(255, 255, 255, 0.75);
      font-weight: 700;
      display: grid;
      gap: 6px;
      justify-items: start;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .quick-amount span {
      font-size: 13px;
      font-weight: 500;
      color: var(--muted);
    }

    .quick-amount.is-selected {
      transform: translateY(-2px);
      box-shadow: 0 16px 28px rgba(31, 41, 55, 0.18);
      border-color: rgba(212, 162, 76, 0.55);
    }

    .quick-slider-wrapper {
      display: grid;
      gap: 12px;
    }

    .quick-slider-hint {
      font-size: 13px;
      color: rgba(31, 41, 55, 0.68);
      margin: -6px 0 10px;
    }

    .quick-slider-track {
      position: relative;
      width: 100%;
      height: 12px;
      background: rgba(255, 255, 255, 0.55);
      border-radius: 999px;
      border: 1px solid rgba(31, 41, 55, 0.08);
      overflow: hidden;
    }

    .quick-slider-progress {
      position: absolute;
      inset: 0 auto 0 0;
      width: 0%;
      background: linear-gradient(117deg, rgba(212, 162, 76, 0.95) 0%, rgba(122, 157, 146, 0.95) 100%);
      border-radius: inherit;
      transition: width 0.2s ease;
    }

    .quick-slider-thumb {
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 72px;
      height: 48px;
      border-radius: 999px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.92);
      border: 2px solid rgba(212, 162, 76, 0.45);
      box-shadow:
        0 0 0 3px rgba(255, 255, 255, 0.55),
        0 12px 28px rgba(31, 41, 55, 0.22);
      overflow: hidden;
      transition: transform 0.18s ease, background 0.18s ease, box-shadow 0.18s ease;
    }

    .quick-slider-thumb::before,
    .quick-slider-thumb::after {
      content: '';
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .quick-slider-thumb::before {
      background: rgba(255, 255, 255, 0.2);
    }

    .quick-slider-thumb::after {
      background: linear-gradient(135deg, rgba(212, 162, 76, 0.35), rgba(122, 157, 146, 0.28));
      mix-blend-mode: screen;
    }

    .quick-slider-thumb-filter,
    .quick-slider-thumb-overlay,
    .quick-slider-thumb-specular {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .quick-slider-thumb-filter {
      backdrop-filter: blur(0.6px);
      -webkit-backdrop-filter: blur(0.6px);
      filter: url(#quick-liquid-lens);
    }

    .quick-slider-thumb-overlay {
      background: rgba(255, 255, 255, 0.1);
    }

    .quick-slider-thumb-specular {
      border-radius: inherit;
      box-shadow:
        inset 1px 1px 0 rgba(212, 162, 76, 0.22),
        inset 1px 3px 0 rgba(28, 63, 90, 0.08),
        inset 0 0 22px rgba(255, 255, 255, 0.6),
        inset -1px -1px 0 rgba(212, 162, 76, 0.18);
    }

    .quick-slider-thumb.active {
      transform: translate(-50%, -50%) scale(1.04);
      box-shadow:
        0 0 0 4px rgba(212, 162, 76, 0.22),
        0 18px 38px rgba(31, 41, 55, 0.32);
      background: rgba(255, 255, 255, 0.78);
    }

    .quick-slider-thumb.active .quick-slider-thumb-filter,
    .quick-slider-thumb.active .quick-slider-thumb-overlay,
    .quick-slider-thumb.active .quick-slider-thumb-specular {
      opacity: 1;
    }

    .quick-slider-value {
      font-size: 14px;
      font-weight: 600;
      color: rgba(31, 41, 55, 0.8);
    }

    .quick-summary {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 24px;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.6);
      border: 1px solid rgba(31, 41, 55, 0.08);
    }

    .quick-summary > * {
      min-width: 0;
    }

    .quick-summary strong {
      font-size: 18px;
    }

    .quick-summary span {
      color: var(--muted);
      font-size: 14px;
    }

    .quick-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px 20px;
      width: 100%;
      margin-top: 4px;
    }

    .quick-metric {
      display: flex;
      flex-direction: column;
      gap: 4px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.04);
      border: 1px solid rgba(15, 23, 42, 0.08);
      min-height: 68px;
    }

    .quick-metric-label {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.35px;
      color: rgba(15, 23, 42, 0.72);
      text-transform: uppercase;
    }

    .quick-metric-value {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
      letter-spacing: 0.4px;
    }

    .quick-metric.is-loading .quick-metric-value {
      color: rgba(15, 23, 42, 0.6);
    }

    .quick-metrics-updated {
      font-size: 12px;
      color: rgba(15, 23, 42, 0.6);
      letter-spacing: 0.3px;
      flex-basis: 100%;
      text-align: right;
      margin-top: -4px;
    }

    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: flex-end;
    }

    .quick-status-block {
      display: grid;
      gap: 10px;
      width: 100%;
    }

    .quick-result {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .quick-result a {
      color: var(--accent);
      font-weight: 600;
      word-break: break-all;
      text-decoration: none;
    }

    .quick-result a:hover {
      text-decoration: underline;
    }

    .quick-copy {
      padding: 8px 14px;
      border-radius: 12px;
      border: 1px solid rgba(212, 162, 76, 0.4);
      background: rgba(255, 255, 255, 0.92);
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .quick-copy:hover:not(:disabled) {
      background: rgba(212, 162, 76, 0.12);
      color: var(--ink);
    }

    .quick-copy:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .manage-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 6px;
      border-radius: 18px;
      background: rgba(212, 162, 76, 0.08);
      border: 1px solid rgba(212, 162, 76, 0.24);
    }

    .manage-tab {
      flex: 1 1 160px;
      border: none;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    }

    .manage-tab:focus-visible {
      outline: 2px solid rgba(212, 162, 76, 0.55);
      outline-offset: 2px;
    }

    .manage-tab.is-active {
      background: linear-gradient(135deg, rgba(212, 162, 76, 0.85), rgba(122, 157, 146, 0.65));
      color: #fff;
      box-shadow: 0 12px 24px rgba(212, 162, 76, 0.26);
    }

    .tab-panels {
      position: relative;
    }

    .tab-panel {
      display: grid;
      gap: 18px;
      animation: fadeIn 0.35s ease;
    }

    .tab-panel[hidden] {
      display: none;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .community-media {
      position: relative;
      width: 100%;
      padding-top: 60%;
      background: linear-gradient(135deg, rgba(244, 220, 184, 0.65), rgba(218, 229, 223, 0.6));
    }

    .community-media img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .community-initial {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      font-weight: 700;
      letter-spacing: 1px;
      color: rgba(31, 41, 55, 0.35);
      text-transform: uppercase;
    }

    .community-body {
      padding: 22px 22px 24px;
      display: grid;
      gap: 14px;
    }

    .community-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 12px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .community-meta span {
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.06);
    }

    .community-body h3 {
      margin: 0;
      font-size: 20px;
      line-height: 1.3;
    }

    .community-body p {
      margin: 0;
      color: var(--muted);
      font-size: 15px;
    }

    .community-progress {
      display: grid;
      gap: 10px;
    }

    .progress-bar {
      height: 8px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.1);
      overflow: hidden;
    }

    .progress-bar div {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
    }

    .progress-meta {
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: var(--muted);
    }

    .community-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .community-actions .btn {
      flex: none;
    }

    .community-profile {
      font-size: 13px;
      color: var(--muted);
    }

    .community-status {
      font-size: 12px;
      letter-spacing: 0.4px;
      text-transform: uppercase;
      color: var(--muted);
    }

    .community-status.goal-met {
      color: var(--accent-2);
    }

    footer {
      margin-top: 60px;
      padding: 40px 0 60px;
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid rgba(31, 41, 55, 0.1);
      background: rgba(255, 255, 255, 0.9);
    }

    @media (max-width: 900px) {
      .nav {
        padding: 16px;
        gap: 14px;
      }

      .inline-actions {
        width: 100%;
        justify-content: flex-start;
      }

      .leaders-lab {
        padding: 36px 28px;
      }

      .leaders-body {
        grid-template-columns: minmax(0, 1fr);
      }

      .leaders-summary {
        position: relative;
        top: auto;
      }
    }

    @media (max-width: 720px) {
      main {
        padding: 20px 16px 70px;
        gap: 42px;
      }

      .hero {
        gap: 18px;
      }

      .hero h1 {
        font-size: clamp(30px, 9vw, 44px);
      }

      .hero p {
        font-size: 16px;
        margin: 12px 0 20px;
      }

      .quick-stripe-card {
        padding: 24px;
        border-radius: 22px;
      }
      .leaders-lab {
        padding: 30px 22px;
        gap: 22px;
      }

      .leaders-lab-head {
        flex-direction: column;
        align-items: stretch;
      }

      .leaders-lab-ticker {
        margin-left: 0;
      }

      .leaders-carousel {
        grid-template-columns: minmax(0, 1fr);
      }

      .leaders-carousel-btn {
        display: none;
      }

      .leader-card {
        min-width: 260px;
        max-width: 260px;
      }

      .quick-tabs {
        gap: 6px;
      }

      .quick-tabs .manage-tab {
        flex: 1 1 140px;
        font-size: 13px;
        padding: 12px 14px;
      }

      .quick-faith-heading {
        flex-direction: column;
        align-items: flex-start;
      }

      .quick-faith-icon {
        width: 52px;
        height: 52px;
      }

      .quick-faith-icon svg {
        width: 30px;
        height: 30px;
      }

      .quick-amounts {
        grid-template-columns: 1fr;
      }

      .quick-summary {
        flex-direction: column;
        align-items: flex-start;
        gap: 18px;
      }

      .quick-metrics {
        grid-template-columns: 1fr;
      }

      .quick-metrics-updated {
        text-align: left;
        margin-top: 0;
      }

      .hero-media {
        border-radius: 22px;
        min-height: 220px;
      }

      .hero-list li {
        font-size: 15px;
        align-items: flex-start;
      }

      .section-head {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }

      .region-slide {
        padding: 20px;
        grid-template-columns: 1fr;
        grid-template-areas:
          'media'
          'meta'
          'curr'
          'tags';
      }

      .region-meta h3 {
        font-size: 22px;
      }

      .region-currencies {
        gap: 10px;
      }

      .region-currency-list {
        gap: 12px;
      }

      .region-currency-item {
        width: 100%;
        justify-content: space-between;
      }

      .region-tags {
        justify-content: center;
      }

      .region-tag {
        width: 120px;
        height: 120px;
        padding: 0 16px;
      }

      .sector-grid {
        grid-template-columns: 1fr;
      }

      .community-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      header {
        position: sticky;
      }

      .region-tags {
        grid-template-columns: 1fr;
      }

      .nav {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
      }

      .brand {
        justify-content: space-between;
        width: 100%;
      }

      .inline-actions,
      .nav .btn,
      .inline-actions .btn {
        width: 100%;
      }

      .inline-actions {
        flex-direction: column;
        gap: 10px;
      }

      .btn {
        width: 100%;
      }

      .form-card {
        padding: 20px;
      }

      .form-actions {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
      }

      .form-actions .btn {
        min-width: 0;
      }

      .community-actions {
        flex-direction: column;
        align-items: stretch;
      }

      .community-actions .btn {
        width: 100%;
      }

      .slider-controls {
        padding: 0 16px;
        bottom: 12px;
      }

      .slider-btn {
        width: 36px;
        height: 36px;
      }

      .slider-dots {
        bottom: 12px;
      }

      footer {
        padding: 30px 0 40px;
      }
    }

    .result-block {
      margin-top: 12px;
      padding: 16px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(31, 41, 55, 0.12);
      display: grid;
      gap: 8px;
    }

    .result-block pre {
      margin: 0;
      font-family: "JetBrains Mono", Consolas, monospace;
      font-size: 12px;
      color: var(--muted);
      white-space: pre-wrap;
      word-break: break-word;
    }

    .empty-note {
      color: var(--muted);
      font-size: 14px;
    }

    @keyframes animate {
      0% {
        transform: translate(-25%, -75%) rotate(0);
      }
      100% {
        transform: translate(-25%, -75%) rotate(360deg);
      }
    }

    @keyframes holographicFlow {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @media (max-width: 720px) {
      .nav {
        flex-direction: column;
        align-items: stretch;
        gap: 16px;
      }

      .nav .inline-actions {
        width: 100%;
        justify-content: center;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }

      .hero {
        text-align: center;
      }

      .hero .inline-actions {
        justify-content: center;
      }

      .form-card {
        padding: 22px;
      }

      .form-actions {
        justify-content: center;
      }

      .form-actions .btn {
        width: min(100%, 320px);
      }
    }

    @media (max-width: 540px) {
      .manage-tabs {
        gap: 10px;
      }

      .manage-tab {
        flex: 1 1 100%;
        text-align: center;
      }
    }

    @media (min-width: 960px) {
      main {
        gap: 72px;
      }

      .hero {
        grid-template-columns: minmax(0, 1.05fr) minmax(0, 0.95fr);
        gap: 36px;
      }

      .region-media {
        height: 260px;
      }
    }

    @media (min-width: 1280px) {
      main {
        padding: 60px 32px 140px;
        gap: 96px;
      }

      .hero {
        grid-template-columns: 1.1fr 0.9fr;
      }
    }

    @media (max-width: 640px) {
      .hero-media {
        min-height: 200px;
      }

      .region-slide {
        padding: 20px;
      }

      .slider-controls {
        display: none;
      }
    }

    @media screen and (max-width: 430px) {
      body {
        font-size: 17px;
        line-height: 1.65;
        touch-action: manipulation;
      }

      header {
        border-bottom-width: 0;
      }

      .nav {
        padding: 14px 16px;
        gap: 12px;
      }

      .brand {
        gap: 8px;
      }

      .brand strong {
        font-size: 20px;
      }

      .brand span {
        font-size: 13px;
      }

      main {
        padding: 18px 16px 64px;
        gap: 36px;
      }

      .inline-actions {
        gap: 12px;
      }

      .inline-actions .btn,
      .nav .btn,
      .btn {
        font-size: 16px;
        padding: 13px 16px;
      }

      .hero {
        gap: 16px;
        text-align: left;
      }

      .hero h1 {
        font-size: clamp(30px, 9vw, 40px);
      }

      .hero p {
        font-size: 17px;
        margin-bottom: 18px;
      }

      .hero-media {
        margin: 0 -4px;
        border-radius: 20px;
        min-height: 210px;
      }

      .hero-list {
        gap: 10px;
      }

      .hero-list li {
        font-size: 16px;
        padding: 12px 14px;
      }

      .section-head {
        gap: 14px;
      }

      .region-slider {
        margin-inline: -2px;
        border-radius: 20px;
      }

      .region-slide {
        padding: 18px;
        gap: 16px;
      }

      .region-meta h3 {
        font-size: 21px;
      }

      .region-meta p {
        font-size: 16px;
      }

      .region-currencies {
        gap: 12px;
      }

      .region-currency-list {
        gap: 10px;
      }

      .region-currency-item {
        flex: 1 1 calc(50% - 10px);
        min-width: 0;
        padding: 12px 14px;
      }

      .region-currency-image {
        width: 60px;
        height: 42px;
      }

      .region-tags {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
      }

      .region-tag {
        width: 100%;
        height: auto;
        border-radius: 20px;
        padding: 16px 18px;
        flex-direction: row;
        justify-content: flex-start;
        text-align: left;
        gap: 12px;
      }

      .region-tag::after {
        inset: 14%;
      }

      .region-tag-label {
        font-size: 14px;
      }

      .region-tag-metric {
        align-self: flex-start;
        font-size: 12px;
      }

      .sector-grid,
      .community-grid {
        gap: 20px;
      }

      .quick-stripe-card {
        padding: 22px 18px;
        border-radius: 20px;
        gap: 22px;
      }

      .quick-tabs {
        flex-direction: column;
        gap: 8px;
      }

      .quick-tabs .manage-tab {
        width: 100%;
      }

      .quick-faith-intro {
        gap: 12px;
        align-items: flex-start;
      }

      .quick-faith-heading {
        font-size: 18px;
        align-items: flex-start;
        gap: 10px;
      }

      .quick-faith-heading span {
        font-size: 14px;
      }

      .quick-faith-icon {
        width: 52px;
        height: 52px;
      }

      .quick-summary {
        padding: 16px;
        gap: 14px;
      }

      .quick-summary strong {
        font-size: 17px;
      }

      .quick-metrics {
        gap: 10px;
      }

      .quick-actions {
        width: 100%;
        justify-content: stretch;
      }

      .quick-actions .btn,
      .form-actions .btn {
        width: 100%;
      }

      .manage-tabs {
        flex-direction: column;
      }

      .manage-tab {
        width: 100%;
      }

      .form-card {
        padding: 20px 18px;
      }

      .form-row {
        gap: 14px;
      }

      footer {
        padding: 30px 0 50px;
        font-size: 13px;
      }
    }

    @media (max-width: 760px) {
      body {
        background: linear-gradient(160deg, rgba(248, 246, 241, 0.96) 0%, rgba(226, 193, 132, 0.32) 45%, rgba(122, 157, 146, 0.28) 100%);
      }

      header {
        display: none;
      }

      .mobile-app-bar {
        position: sticky;
        top: 0;
        z-index: 120;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 14px 18px;
        margin: 0 16px;
        border-radius: 18px;
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(212, 162, 76, 0.35);
        box-shadow: 0 16px 28px rgba(31, 41, 55, 0.14);
        backdrop-filter: blur(10px);
      }

      .mobile-brand {
        display: flex;
        flex-direction: column;
        gap: 4px;
        font-weight: 800;
        letter-spacing: 0.5px;
        color: var(--ink);
        text-transform: uppercase;
      }

      .mobile-brand span:last-child {
        font-size: 12px;
        color: var(--muted);
        font-weight: 600;
        letter-spacing: 0.35px;
      }

      .mobile-cta {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 11px 20px;
        border-radius: 999px;
        font-weight: 700;
        text-decoration: none;
        color: var(--ink);
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(212, 162, 76, 0.5);
        background: rgba(255, 255, 255, 0.86);
      }

      .mobile-cta::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(212, 162, 76, 0.6), rgba(226, 193, 132, 0.55), rgba(122, 157, 146, 0.5));
        opacity: 0.8;
        mix-blend-mode: multiply;
        animation: holographicFlow 8s ease-in-out infinite;
      }

      .mobile-cta span {
        position: relative;
        z-index: 1;
      }

      main {
        padding: 18px 0 90px;
        gap: 32px;
        background: transparent;
      }

      main > section {
        margin: 0 16px;
        border-radius: 26px;
        padding: 28px 24px;
        background: rgba(255, 255, 255, 0.82);
        border: 1px solid rgba(212, 162, 76, 0.25);
        box-shadow: 0 30px 56px rgba(31, 41, 55, 0.18);
        position: relative;
        overflow: hidden;
      }

      main > section::before {
        content: '';
        position: absolute;
        inset: -30% 35% auto -20%;
        height: 220px;
        background: radial-gradient(circle at top, rgba(212, 162, 76, 0.35), transparent 70%);
        opacity: 0.6;
        pointer-events: none;
      }

      main > section > * {
        position: relative;
        z-index: 1;
      }

      .hero {
        display: grid;
        gap: 26px;
        background: linear-gradient(145deg, rgba(212, 162, 76, 0.18), rgba(122, 157, 146, 0.2));
        border: 1px solid rgba(212, 162, 76, 0.35);
        box-shadow: 0 28px 48px rgba(122, 157, 146, 0.22);
      }

      .hero::before {
        inset: -30% 10% auto -40%;
      }

      .hero h1 {
        font-size: clamp(30px, 9vw, 40px);
        line-height: 1.15;
      }

      .hero p {
        font-size: 17px;
        color: rgba(31, 41, 55, 0.75);
      }

      .hero .inline-actions {
        display: grid;
        gap: 12px;
      }

      .hero .inline-actions .btn {
        width: 100%;
      }

      .hero-media {
        background: transparent;
        box-shadow: none;
        border-radius: 20px;
        padding: 4px 0;
      }

      .hero-list {
        display: flex;
        gap: 14px;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        padding-bottom: 6px;
      }

      .hero-list li {
        min-width: 240px;
        scroll-snap-align: start;
        background: rgba(255, 255, 255, 0.92);
        border: 1px solid rgba(31, 41, 55, 0.08);
        box-shadow: 0 16px 30px rgba(31, 41, 55, 0.18);
      }

      .quick-stripe-section {
        display: grid;
        gap: 24px;
      }

      .quick-stripe-section .lead {
        font-size: 16px;
      }

      .quick-tabs {
        overflow-x: auto;
        padding: 6px;
        gap: 10px;
        scroll-snap-type: x mandatory;
      }

      .quick-tabs .manage-tab {
        flex: 0 0 160px;
        scroll-snap-align: start;
        background: rgba(255, 255, 255, 0.72);
        border-radius: 18px;
        border: 1px solid rgba(212, 162, 76, 0.3);
      }

      .quick-panel {
        background: rgba(255, 255, 255, 0.82);
        border-radius: 22px;
        padding: 22px;
        box-shadow: inset 0 0 0 1px rgba(212, 162, 76, 0.2);
      }

      .quick-summary {
        border-radius: 20px;
        padding: 16px 18px;
        background: rgba(248, 246, 241, 0.85);
        box-shadow: inset 0 0 0 1px rgba(212, 162, 76, 0.2);
      }

      .region-slider {
        margin: 0;
        border-radius: 26px;
        box-shadow: 0 30px 50px rgba(31, 41, 55, 0.2);
      }

      .region-slide {
        gap: 18px;
        padding: 22px;
      }

      .region-media {
        border-radius: 22px;
        height: 200px;
      }

      .region-currency-list {
        flex-direction: column;
      }

      .region-currency-item {
        width: 100%;
      }

      .region-tags {
        justify-content: stretch;
        gap: 16px;
      }

      .region-tag {
        width: 100%;
        border-radius: 18px;
        flex-direction: row;
        height: auto;
        padding: 18px;
        justify-content: space-between;
      }

      .sector-grid,
      .community-grid {
        gap: 18px;
      }

      .form-card {
        padding: 22px;
        border-radius: 24px;
        background: rgba(255, 255, 255, 0.86);
        box-shadow: 0 24px 44px rgba(31, 41, 55, 0.18);
      }

      .form-actions {
        gap: 16px;
        flex-direction: column;
      }

      .form-actions .btn {
        width: 100%;
        min-width: 0;
      }

      footer {
        margin: 40px 0 30px;
        padding: 24px 16px;
        font-size: 13px;
        border: none;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 20px;
        box-shadow: 0 18px 40px rgba(31, 41, 55, 0.16);
        width: calc(100% - 32px);
        margin-left: auto;
        margin-right: auto;
      }
    }

    @media (max-width: 640px) {
      .quick-stripe-card {
        padding: 18px 14px;
        border-radius: 18px;
        gap: 18px;
      }

      .quick-tabs {
        padding: 6px 4px;
        gap: 8px;
      }

      .quick-panel {
        padding: 18px;
      }

      .quick-faith-intro {
        gap: 10px 14px;
        align-items: flex-start;
      }

      .quick-summary {
        display: grid;
        gap: 16px;
      }

      .quick-summary > * {
        width: 100%;
      }

      .quick-metrics {
        grid-template-columns: 1fr;
      }

      .quick-actions {
        display: grid;
        gap: 10px;
        width: 100%;
      }

      .quick-actions .btn {
        width: 100%;
      }

      .quick-status-block {
        gap: 12px;
      }
    }
  </style>
</head>
<body>
<header>
  <nav class="nav">
    <div class="brand">
      <strong>New Bright Water</strong>
      <span data-i18n="nav.tagline">Multi-faith giving platform</span>
    </div>
    <div class="language-switcher" data-language-switcher>
      <button class="language-toggle" type="button" aria-haspopup="listbox" aria-expanded="false">
        <span>
          <span class="language-flag" data-language-flag></span>
          <span class="language-name" data-language-label>English (Christian)</span>
        </span>
      </button>
      <ul class="language-menu" role="listbox" hidden></ul>
    </div>
    <div class="inline-actions">
      <a class="btn ghost" href="#regions" data-i18n="nav.explore">Explore regions</a>
      <a class="btn liquid" href="#give">
        <span data-i18n="nav.startGiving">Start giving</span>
        <div class="liquid"></div>
      </a>
      <a class="btn ghost" href="multifaith-campaign-create.html" data-i18n="nav.startReceiving">Start receiving</a>
    </div>
  </nav>
</header>

<div class="mobile-app-bar">
  <div class="mobile-brand">
    <span>New Bright Water</span>
    <span data-i18n="mobile.tagline">Giving Platform</span>
  </div>
  <div class="language-switcher language-switcher--compact" data-language-switcher>
    <button class="language-toggle" type="button" aria-haspopup="listbox" aria-expanded="false">
      <span>
        <span class="language-flag" data-language-flag></span>
        <span class="language-name" data-language-label>English (Christian)</span>
      </span>
    </button>
    <ul class="language-menu" role="listbox" hidden></ul>
  </div>
  <a class="mobile-cta" href="#give">
    <span data-i18n="mobile.start">Start</span>
  </a>
</div>

<main>
  <section class="hero">
    <div>
      <h1 data-i18n="hero.title">One place to give, across every faith community.</h1>
      <p data-i18n="hero.description">Launch fully-configured donation flows for churches, mosques, synagogues, temples, and sanghas in minutes. No waiting for a build planconnect your organizations, publish campaigns, and accept gifts right now.</p>
      <div class="inline-actions">
        <a class="btn liquid" href="#give">
          <span data-i18n="hero.ctaCreate">Create a donation</span>
          <div class="liquid"></div>
        </a>
        <a class="btn ghost" href="#manage" data-i18n="hero.ctaManage">Manage organizations</a>
        <a class="btn ghost" href="multifaith-campaign-create.html" data-i18n="hero.ctaShare">Share my story</a>
      </div>
    </div>
    <div class="hero-media">
      <ul class="hero-list">
        <li><span>1</span> <span data-i18n="hero.list1">Multi-region currency, tax, and receipt language out of the box.</span></li>
        <li><span>2</span> <span data-i18n="hero.list2">Faith-specific donation types with calculators and metadata.</span></li>
        <li><span>3</span> <span data-i18n="hero.list3">Instant Stripe Payment Links you can share the moment you hit submit.</span></li>
      </ul>
    </div>
  </section>

  <section id="quick-stripe" class="quick-stripe-section">
    <h2 data-i18n="quick.heading">Quick Stripe payment lanes</h2>
    <p class="lead" data-i18n="quick.lead">Drop into a tradition, lock in a preset gift, and spin up a secure Stripe checkout without any typing. Pick a lane, tune the amplifier, and tap the button to move funds right now.</p>
    <div class="quick-stripe-card">
      <div class="quick-tabs" role="tablist" aria-label="Faith traditions for instant payments" data-i18n-attr="aria-label" data-i18n="quick.tabsAria">
        <button class="manage-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="quick-panel" id="quick-tab-christian" data-faith="christian" data-i18n="quick.tab.christian">
          <span class="quick-tab-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
              <g fill="none" stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
                <path d="M32 8v48"/>
                <path d="M18 20h28"/>
              </g>
            </svg>
          </span>
          Christian
        </button>
        <button class="manage-tab" type="button" role="tab" aria-selected="false" aria-controls="quick-panel" id="quick-tab-islam" data-faith="islam" data-i18n="quick.tab.islamic">
          <span class="quick-tab-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
              <path d="M40 8a20 20 0 1 0 0 48 22 22 0 1 1 0-48z" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="m46 32 10 4-10 4 6 9-10-4-2 11-2-11-10 4 6-9-10-4 10-4-6-9 10 4 2-11 2 11 10-4z" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          Islamic
        </button>
        <button class="manage-tab" type="button" role="tab" aria-selected="false" aria-controls="quick-panel" id="quick-tab-jewish" data-faith="jewish" data-i18n="quick.tab.jewish">
          <span class="quick-tab-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
              <path d="m32 6 10 18h-20l10-18zm0 52-10-18h20l-10 18zm-22-18 10-18 10 18H10zm44 0H34l10-18 10 18z" fill="none" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/>
            </svg>
          </span>
          Jewish
        </button>
        <button class="manage-tab" type="button" role="tab" aria-selected="false" aria-controls="quick-panel" id="quick-tab-hindu" data-faith="hindu" data-i18n="quick.tab.hindu">
          <span class="quick-tab-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
              <path d="M20 24c0-6.627 5.373-12 12-12s12 5.373 12 12-5.373 12-12 12" fill="none" stroke="currentColor" stroke-width="4"/>
              <path d="M32 36c-6 0-11 3.582-11 8s5 8 11 8 11-3.582 11-8" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
              <path d="M30 18c0-3.314 2.239-6 5-6 2.209 0 4 1.791 4 4 0 1.657-1.343 3-3 3" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M14 24h12M38 24h12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
            </svg>
          </span>
          Hindu
        </button>
        <button class="manage-tab" type="button" role="tab" aria-selected="false" aria-controls="quick-panel" id="quick-tab-buddhist" data-faith="buddhist" data-i18n="quick.tab.buddhist">
          <span class="quick-tab-icon" aria-hidden="true">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false">
              <circle cx="32" cy="32" r="8" fill="none" stroke="currentColor" stroke-width="4"/>
              <g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round">
                <path d="M32 8v10"/>
                <path d="M32 46v10"/>
                <path d="M8 32h10"/>
                <path d="M46 32h10"/>
                <path d="m14 14 7 7"/>
                <path d="m43 43 7 7"/>
                <path d="m14 50 7-7"/>
                <path d="m43 21 7-7"/>
              </g>
            </svg>
          </span>
          Buddhist
        </button>
      </div>
      <div class="quick-panel" id="quick-panel" role="tabpanel" aria-labelledby="quick-tab-christian">
        <div class="quick-faith-intro">
          <div class="quick-faith-heading">
            <div class="quick-faith-icon" id="quick-faith-icon" aria-hidden="true">
              <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                <g fill="none" stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M32 8v48"/>
                  <path d="M18 20h28"/>
                </g>
              </svg>
            </div>
            <div>
              <strong id="quick-faith-title">Christian ministries</strong>
              <span id="quick-faith-subtitle">Direct support for parish life, community meals, and global missions.</span>
            </div>
          </div>
          <div class="quick-slider-value"><span data-i18n="quick.multiplierLabel">Multiplier:</span> <span id="quick-multiplier-label">1.0</span></div>
        </div>
        <div class="quick-amounts" id="quick-amounts">
          <button class="quick-amount is-selected" type="button" data-index="0">
            <strong id="quick-amount-0">$75</strong>
            <span id="quick-amount-desc-0">Launch midweek meals</span>
          </button>
          <button class="quick-amount" type="button" data-index="1">
            <strong id="quick-amount-1">$150</strong>
            <span id="quick-amount-desc-1">Fuel regional outreach</span>
          </button>
          <button class="quick-amount" type="button" data-index="2">
            <strong id="quick-amount-2">$300</strong>
            <span id="quick-amount-desc-2">Underwrite community care</span>
          </button>
        </div>
        <div class="quick-slider-wrapper">
          <div class="quick-slider-track" id="quick-slider" role="slider" aria-valuemin="75" aria-valuemax="250" aria-valuenow="100" aria-label="Donation multiplier" data-i18n-attr="aria-label" data-i18n="quick.sliderAria" aria-describedby="quick-slider-hint" tabindex="0">
            <div class="quick-slider-progress" id="quick-slider-progress"></div>
            <div class="quick-slider-thumb" id="quick-slider-thumb">
              <div class="quick-slider-thumb-filter"></div>
              <div class="quick-slider-thumb-overlay"></div>
              <div class="quick-slider-thumb-specular"></div>
            </div>
          </div>
        </div>
        <p class="quick-slider-hint" id="quick-slider-hint" data-i18n="quick.sliderHint">Drag the glowing handle to raise or soften your multiplier.</p>
        <div class="quick-summary">
          <div>
            <strong id="quick-total" data-i18n="quick.totalDefault">$225 ready for checkout</strong>
            <span id="quick-total-detail">Split across worship, meals, and relief in this lane.</span>
          </div>
          <div class="quick-metrics" id="quick-metrics">
            <div class="quick-metric is-loading" data-role="followers">
              <span class="quick-metric-label" id="quick-metric-followers-label" data-i18n="quick.metrics.followers">Global adherents</span>
              <span class="quick-metric-value" id="quick-metric-followers" data-i18n="quick.metrics.loading">Loading metrics</span>
            </div>
            <div class="quick-metric is-loading" data-role="actions">
              <span class="quick-metric-label" id="quick-metric-actions-label" data-i18n="quick.metrics.actions">Active community projects</span>
              <span class="quick-metric-value" id="quick-metric-actions" data-i18n="quick.metrics.loading">Loading metrics</span>
            </div>
          </div>
          <div class="quick-metrics-updated" id="quick-metrics-updated" data-i18n="quick.metrics.loadingSummary">Metrics loading</div>
          <div class="quick-actions">
            <button class="btn liquid" type="button" id="quick-generate">
              <span>Generate secure checkout</span>
              <div class="liquid"></div>
            </button>
            <button class="btn liquid" type="button" id="quick-share">
              <span>Create a donation link</span>
              <div class="liquid"></div>
            </button>
          </div>
          <div class="quick-status-block">
            <div class="status" id="quick-status" role="status" hidden></div>
            <div class="quick-result" id="quick-result" hidden>
              <a id="quick-link" href="#" target="_blank" rel="noreferrer noopener"></a>
              <button class="quick-copy" type="button" id="quick-copy" data-i18n="quick.copy">Copy link</button>
            </div>
          </div>
        </div>
      </div>
      <svg width="0" height="0" aria-hidden="true">
        <filter id="quick-liquid-lens" x="-50%" y="-50%" width="200%" height="200%">
          <feImage x="0" y="0" result="normalMap" xlink:href="data:image/svg+xml;utf8,&lt;svg xmlns='http://www.w3.org/2000/svg' width='300' height='300'&gt;&lt;radialGradient id='invmap' cx='50%' cy='50%' r='75%'&gt;&lt;stop offset='0%' stop-color='rgb(128,128,255)'/&gt;&lt;stop offset='90%' stop-color='rgb(255,255,255)'/&gt;&lt;/radialGradient&gt;&lt;rect width='100%' height='100%' fill='url(#invmap)'/&gt;&lt;/svg>"/>
          <feDisplacementMap in="SourceGraphic" in2="normalMap" scale="-220" xChannelSelector="R" yChannelSelector="G" result="displaced"/>
          <feMerge>
            <feMergeNode in="displaced"/>
          </feMerge>
        </filter>
      </svg>
    </div>
  </section>

  <section id="regions">
    <h2 data-i18n="regions.heading">Regional gallery</h2>
    <p class="lead" data-i18n="regions.lead">Preview the localized experience for every launch territory. Each slide shows live copy, receipt preferences, and sector highlights donors will see.</p>
    <div class="region-slider">
      <div class="region-track" id="region-track"></div>
      <div class="region-transition" id="region-transition" aria-hidden="true">
        <div class="transition-scene" data-scene="current" id="transition-current"></div>
        <div class="transition-scene" data-scene="next" id="transition-next"></div>
      </div>
      <div class="slider-controls">
        <button class="slider-btn" id="prev-slide" type="button" aria-label="Previous region" data-i18n-attr="aria-label" data-i18n="regions.prev"></button>
        <button class="slider-btn" id="next-slide" type="button" aria-label="Next region" data-i18n-attr="aria-label" data-i18n="regions.next"></button>
      </div>
      <div class="slider-dots" id="slider-dots"></div>
    </div>
    <div class="region-narration-card" id="region-narration" hidden>
      <div class="region-narration-head">
        <div>
          <strong data-i18n="regions.narrationTitle">Slide narration</strong>
          <span class="region-narration-subject" id="region-narration-subject" hidden></span>
        </div>
        <button class="region-narration-refresh" type="button" id="region-narration-refresh" data-i18n="regions.narrationRefresh">New script</button>
      </div>
      <p class="region-narration-text" id="region-narration-text"></p>
      <div class="region-narration-actions">
        <button class="btn ghost" type="button" id="region-narration-play" data-i18n="regions.narrationPlay">Play narration</button>
        <button class="region-narration-stop" type="button" id="region-narration-stop" hidden data-i18n="regions.narrationStop">Stop</button>
      </div>
      <div class="status" id="region-narration-status" hidden></div>
    </div>
  </section>

  <section id="leaders-lab" class="leaders-lab">
    <div class="leaders-lab-head">
      <div>
        <h2>Global faith leadership dispatch</h2>
        <p class="lead">Command a civilization-scale view of every traditions headline makers. Slide through active leaders, tap the data tabs, and watch live dossiers assemble from open knowledge feeds.</p>
      </div>
      <div class="leaders-lab-ticker" id="leaders-ticker" aria-live="polite"></div>
    </div>
    <div class="leaders-lab-shell">
      <div class="leaders-tabs" id="leaders-tabs" role="tablist" aria-label="Faith leadership datasets"></div>
      <div class="leaders-body">
        <aside class="leaders-summary" id="leaders-summary-card">
          <p id="leaders-summary"></p>
          <div class="leaders-metrics" id="leaders-metrics" aria-live="polite"></div>
          <div class="leaders-pipelines">
            <h3>Campaign arcs</h3>
            <ul id="leaders-pipelines"></ul>
          </div>
        </aside>
        <div class="leaders-main">
          <div class="leaders-carousel">
            <button class="leaders-carousel-btn prev" id="leaders-prev" type="button" aria-label="Previous leader"></button>
            <div class="leaders-carousel-viewport" id="leaders-viewport">
              <div class="leaders-carousel-track" id="leaders-track"></div>
            </div>
            <button class="leaders-carousel-btn next" id="leaders-next" type="button" aria-label="Next leader"></button>
          </div>
          <div class="leader-intel-grid">
            <div class="leader-intel-block">
              <h3>Live dossier</h3>
              <p id="leader-story"></p>
              <ul id="leader-briefing" class="leader-briefing"></ul>
            </div>
            <div class="leader-intel-block">
              <h3>Signal watch</h3>
              <ul id="leader-signals" class="leader-signals"></ul>
            </div>
            <div class="leader-intel-block">
              <h3>Official channels</h3>
              <ul id="leader-links" class="leader-links"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="sectors">
    <h2 data-i18n="sectors.heading">Sectors we fund together</h2>
    <p class="lead" data-i18n="sectors.lead">Pair every gift with a sector so donors understand the impact: community relief, education, food security, and more. Sectors appear on receipts and in compliance exports automatically.</p>
    <div class="sector-grid" id="sector-grid"></div>
  </section>

  <section id="community">
    <div class="section-head">
      <div>
        <h2 data-i18n="community.heading">Community campaigns in motion</h2>
        <p class="lead" data-i18n="community.lead">Browse stories submitted by individuals and small groups who are actively raising support right now.</p>
      </div>
      <a class="btn ghost" href="multifaith-campaign-create.html" data-i18n="community.cta">Start receiving donations</a>
    </div>
    <div class="community-grid" id="community-campaigns"></div>
    <p class="empty-note" id="community-empty" hidden data-i18n="community.empty">No community campaigns have launched yet. Share yours to be featured here.</p>
  </section>

  <section id="give">
    <h2 data-i18n="give.heading">Give right now</h2>
    <p class="lead" data-i18n="give.lead">Use the form below to choose a faith tradition, region, campaign, and sector. Submit to mint a secure Stripe checkout link instantly.</p>
    <div class="form-card">
      <h3 data-i18n="give.builder">Donation builder</h3>
      <form id="donation-form">
        <div class="form-row double">
          <label><span data-i18n="give.field.region">Region</span>
            <select id="donation-region" required></select>
          </label>
          <label><span data-i18n="give.field.faith">Faith tradition</span>
            <select id="donation-faith" required></select>
          </label>
        </div>
        <div class="form-row double">
          <label><span data-i18n="give.field.organization">Organization</span>
            <select id="donation-org" required></select>
          </label>
          <label><span data-i18n="give.field.campaign">Campaign</span>
            <select id="donation-campaign" required></select>
          </label>
        </div>
        <div class="form-row double">
          <label><span data-i18n="give.field.sector">Sector / Fund focus</span>
            <select id="donation-sector" required></select>
          </label>
          <label><span data-i18n="give.field.donationType">Donation type</span>
            <select id="donation-type" required></select>
          </label>
        </div>
        <div class="form-row triple">
          <label><span data-i18n="give.field.amount">Amount (local currency)</span>
            <input id="donation-amount" type="number" min="1" max="999999999999" step="1" placeholder="50" required data-i18n-placeholder="give.placeholder.amount"/>
          </label>
          <label><span data-i18n="give.field.frequency">Frequency</span>
            <select id="donation-frequency" required>
              <option value="one_time" data-i18n="give.frequency.once">One-time</option>
              <option value="week" data-i18n="give.frequency.weekly">Weekly</option>
              <option value="month" selected data-i18n="give.frequency.monthly">Monthly</option>
              <option value="year" data-i18n="give.frequency.annual">Annual</option>
            </select>
          </label>
          <label><span data-i18n="give.field.promo">Promo codes allowed?</span>
            <select id="donation-promo" required>
              <option value="true" selected data-i18n="general.yes">Yes</option>
              <option value="false" data-i18n="general.no">No</option>
            </select>
          </label>
        </div>
        <div class="form-row double">
          <label><span data-i18n="give.field.donorName">Donor name</span>
            <input id="donation-name" type="text" placeholder="Jordan Malik" required data-i18n-placeholder="give.placeholder.name"/>
          </label>
          <label><span data-i18n="give.field.email">Email for receipt</span>
            <input id="donation-email" type="email" placeholder="jordan@example.org" required data-i18n-placeholder="give.placeholder.email"/>
          </label>
        </div>
        <div class="form-row">
          <label><span data-i18n="give.field.notes">Notes for receipt (optional)</span>
            <textarea id="donation-notes" placeholder="Dedicate this gift to..." data-i18n-placeholder="give.placeholder.notes"></textarea>
          </label>
        </div>
        <div class="form-actions">
          <button class="btn liquid" type="submit">
            <span data-i18n="give.submit">Generate secure checkout</span>
            <div class="liquid"></div>
          </button>
        </div>
      </form>
      <div class="status" id="donation-status" hidden></div>
      <div class="result-block" id="donation-result" hidden>
        <strong data-i18n="give.result.title">Payment link</strong>
        <a id="donation-link" href="#" target="_blank" rel="noreferrer"></a>
        <pre id="donation-meta"></pre>
      </div>
      <div class="empty-note" id="org-empty" hidden data-i18n="give.empty">No organizations found yet. Add one below to start collecting gifts.</div>
    </div>
  </section>

  <section id="manage">
    <h2 data-i18n="manage.heading">Organization &amp; campaign management</h2>
    <p class="lead" data-i18n="manage.lead">Connect as many communities as you need. As soon as you save an organization and campaign, they are available in the donation builder.</p>
    <div class="form-card manage-card">
      <div class="manage-tabs" role="tablist" aria-label="Manage organizations and campaigns" data-i18n-attr="aria-label" data-i18n="manage.tabsAria">
        <button class="manage-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="panel-organization" id="tab-organization" data-tab-target="panel-organization" data-i18n="manage.tab.organizations">Organizations</button>
        <button class="manage-tab" type="button" role="tab" aria-selected="false" aria-controls="panel-campaign" id="tab-campaign" data-tab-target="panel-campaign" data-i18n="manage.tab.campaigns">Campaigns</button>
      </div>
      <div class="tab-panels">
        <div class="tab-panel is-active" id="panel-organization" role="tabpanel" aria-labelledby="tab-organization">
          <h3 data-i18n="manage.org.title">Add an organization</h3>
          <form id="setup-org-form">
            <div class="form-row double">
              <label><span data-i18n="manage.org.name">Organization name</span>
                <input id="setup-org-name" type="text" placeholder="Bethany Center" required data-i18n-placeholder="manage.org.placeholderName"/>
              </label>
              <label><span data-i18n="manage.org.region">Region</span>
                <select id="setup-org-region" required></select>
              </label>
            </div>
            <div class="form-row double">
              <label><span data-i18n="manage.org.faith">Faith tradition</span>
                <select id="setup-org-faith" required></select>
              </label>
              <label><span data-i18n="manage.org.locales">Locales (comma separated)</span>
                <input id="setup-org-locales" type="text" placeholder="en-US, es-US" data-i18n-placeholder="manage.org.placeholderLocales"/>
              </label>
            </div>
            <div class="form-row double">
              <label><span data-i18n="manage.org.timezone">Timezone</span>
                <input id="setup-org-timezone" type="text" placeholder="America/New_York" data-i18n-placeholder="manage.org.placeholderTimezone"/>
              </label>
              <label><span data-i18n="manage.org.stripe">Stripe Account ID (optional)</span>
                <input id="setup-org-stripe" type="text" placeholder="acct_123" data-i18n-placeholder="manage.org.placeholderStripe"/>
              </label>
            </div>
            <div class="form-actions">
              <button class="btn ghost" type="submit" data-i18n="manage.org.submit">Save organization</button>
            </div>
          </form>
          <div class="status" id="setup-org-status" hidden></div>
        </div>
        <div class="tab-panel" id="panel-campaign" role="tabpanel" aria-labelledby="tab-campaign" hidden>
          <h3 data-i18n="manage.campaign.title">Add a campaign</h3>
          <form id="setup-campaign-form">
            <div class="form-row double">
              <label><span data-i18n="manage.campaign.organization">Organization</span>
                <select id="setup-campaign-org" required></select>
              </label>
              <label><span data-i18n="manage.campaign.name">Campaign name</span>
                <input id="setup-campaign-name" type="text" placeholder="Community Relief" required data-i18n-placeholder="manage.campaign.placeholderName"/>
              </label>
            </div>
            <div class="form-row double">
              <label><span data-i18n="manage.campaign.code">Campaign code (optional)</span>
                <input id="setup-campaign-code" type="text" placeholder="community_relief" data-i18n-placeholder="manage.campaign.placeholderCode"/>
              </label>
              <label><span data-i18n="manage.campaign.types">Donation types (comma separated)</span>
                <input id="setup-campaign-types" type="text" placeholder="tithe, zakat, dana" data-i18n-placeholder="manage.campaign.placeholderTypes"/>
              </label>
            </div>
            <div class="form-actions">
              <button class="btn liquid" type="submit">
                <span data-i18n="manage.campaign.submit">Save campaign</span>
                <div class="liquid"></div>
              </button>
            </div>
          </form>
          <div class="status" id="setup-campaign-status" hidden></div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer data-i18n-html="footer.copy">
   <span id="year"></span> New Bright Water. Multi-faith donations, ready the moment you sign in.
</footer>

<script>
  const LANGUAGE_OPTIONS = [
    { code: 'en', labelKey: 'language.en', flag: '', dir: 'ltr' },
    { code: 'ar', labelKey: 'language.ar', flag: '', dir: 'rtl' },
    { code: 'he', labelKey: 'language.he', flag: '', dir: 'rtl' },
    { code: 'hi', labelKey: 'language.hi', flag: '', dir: 'ltr' },
    { code: 'th', labelKey: 'language.th', flag: '', dir: 'ltr' }
  ];

  const DEFAULT_LANGUAGE = 'en';
  const LANGUAGE_STORAGE_KEY = 'multifaith-language';

  const TRANSLATIONS = {
    en: {
      'nav.tagline': 'Multi-faith giving platform',
      'nav.explore': 'Explore regions',
      'nav.startGiving': 'Start giving',
      'nav.startReceiving': 'Start receiving',
      'mobile.tagline': 'Giving Platform',
      'mobile.start': 'Start',
      'hero.title': 'One place to give, across every faith community.',
      'hero.description':
        'Launch fully-configured donation flows for churches, mosques, synagogues, temples, and sanghas in minutes. No waiting for a build planconnect your organizations, publish campaigns, and accept gifts right now.',
      'hero.ctaCreate': 'Create a donation',
      'hero.ctaManage': 'Manage organizations',
      'hero.ctaShare': 'Share my story',
      'hero.list1': 'Multi-region currency, tax, and receipt language out of the box.',
      'hero.list2': 'Faith-specific donation types with calculators and metadata.',
      'hero.list3': 'Instant Stripe Payment Links you can share the moment you hit submit.',
      'quick.heading': 'Quick Stripe payment lanes',
      'quick.lead':
        'Drop into a tradition, lock in a preset gift, and spin up a secure Stripe checkout without any typing. Pick a lane, tune the amplifier, and tap the button to move funds right now.',
      'quick.tabsAria': 'Faith traditions for instant payments',
      'quick.tab.christian': 'Christian',
      'quick.tab.islamic': 'Islamic',
      'quick.tab.jewish': 'Jewish',
      'quick.tab.hindu': 'Hindu',
      'quick.tab.buddhist': 'Buddhist',
      'quick.multiplierLabel': 'Multiplier:',
      'quick.sliderAria': 'Donation multiplier',
      'quick.sliderHint': 'Drag the glowing handle to raise or soften your multiplier.',
      'quick.metrics.followers': 'Global adherents',
      'quick.metrics.actions': 'Active community projects',
      'quick.metrics.loading': 'Loading metrics',
      'quick.metrics.loadingSummary': 'Metrics loading',
      'quick.metrics.live': 'Live metrics',
      'quick.copy': 'Copy link',
      'regions.heading': 'Regional gallery',
      'regions.lead':
        'Preview the localized experience for every launch territory. Each slide shows live copy, receipt preferences, and sector highlights donors will see.',
      'regions.prev': 'Previous region',
      'regions.next': 'Next region',
      'regions.narrationTitle': 'Slide narration',
      'regions.narrationRefresh': 'New script',
      'regions.narrationPlay': 'Play narration',
      'regions.narrationStop': 'Stop',
      'sectors.heading': 'Sectors we fund together',
      'sectors.lead':
        'Pair every gift with a sector so donors understand the impact: community relief, education, food security, and more. Sectors appear on receipts and in compliance exports automatically.',
      'community.heading': 'Community campaigns in motion',
      'community.lead':
        'Browse stories submitted by individuals and small groups who are actively raising support right now.',
      'community.cta': 'Start receiving donations',
      'community.empty': 'No community campaigns have launched yet. Share yours to be featured here.',
      'community.error': 'Unable to load community campaigns right now. Please try again soon.',
      'give.heading': 'Give right now',
      'give.lead':
        'Use the form below to choose a faith tradition, region, campaign, and sector. Submit to mint a secure Stripe checkout link instantly.',
      'give.builder': 'Donation builder',
      'give.field.region': 'Region',
      'give.field.faith': 'Faith tradition',
      'give.field.organization': 'Organization',
      'give.field.campaign': 'Campaign',
      'give.field.sector': 'Sector / Fund focus',
      'give.field.donationType': 'Donation type',
      'give.field.amount': 'Amount (local currency)',
      'give.field.frequency': 'Frequency',
      'give.field.promo': 'Promo codes allowed?',
      'give.field.donorName': 'Donor name',
      'give.field.email': 'Email for receipt',
      'give.field.notes': 'Notes for receipt (optional)',
      'give.placeholder.amount': '50',
      'give.placeholder.name': 'Jordan Malik',
      'give.placeholder.email': 'jordan@example.org',
      'give.placeholder.notes': 'Dedicate this gift to...',
      'give.frequency.once': 'One-time',
      'give.frequency.weekly': 'Weekly',
      'give.frequency.monthly': 'Monthly',
      'give.frequency.annual': 'Annual',
      'give.submit': 'Generate secure checkout',
      'give.result.title': 'Payment link',
      'give.empty': 'No organizations found yet. Add one below to start collecting gifts.',
      'general.yes': 'Yes',
      'general.no': 'No',
      'general.loading': 'Loading',
      'select.faith': 'Choose a faith',
      'select.region': 'Choose a region',
      'select.organization': 'Choose an organization',
      'select.sector': 'Select a sector',
      'select.donationType': 'Select donation type',
      'select.campaign': 'Choose a campaign',
      'manage.heading': 'Organization & campaign management',
      'manage.lead':
        'Connect as many communities as you need. As soon as you save an organization and campaign, they are available in the donation builder.',
      'manage.tabsAria': 'Manage organizations and campaigns',
      'manage.tab.organizations': 'Organizations',
      'manage.tab.campaigns': 'Campaigns',
      'manage.org.title': 'Add an organization',
      'manage.org.name': 'Organization name',
      'manage.org.region': 'Region',
      'manage.org.faith': 'Faith tradition',
      'manage.org.locales': 'Locales (comma separated)',
      'manage.org.timezone': 'Timezone',
      'manage.org.stripe': 'Stripe Account ID (optional)',
      'manage.org.submit': 'Save organization',
      'manage.org.placeholderName': 'Bethany Center',
      'manage.org.placeholderLocales': 'en-US, es-US',
      'manage.org.placeholderTimezone': 'America/New_York',
      'manage.org.placeholderStripe': 'acct_123',
      'manage.campaign.title': 'Add a campaign',
      'manage.campaign.organization': 'Organization',
      'manage.campaign.name': 'Campaign name',
      'manage.campaign.code': 'Campaign code (optional)',
      'manage.campaign.types': 'Donation types (comma separated)',
      'manage.campaign.submit': 'Save campaign',
      'manage.campaign.placeholderName': 'Community Relief',
      'manage.campaign.placeholderCode': 'community_relief',
      'manage.campaign.placeholderTypes': 'tithe, zakat, dana',
      'footer.copy': ' {year} New Bright Water. Multi-faith donations, ready the moment you sign in.',
      'quick.totalReady': '{amount} ready for checkout',
      'quick.metrics.actionsSuffix': '{count} actions',
      'quick.metrics.updated': 'Last updated {time}',
      'quick.metrics.none': 'No metrics available yet.',
      'quick.multiplierA11ySuffix': 'times base gift',
      'status.copyUnsupported': 'Copy not supported hereuse the link above instead.',
      'status.copySuccess': 'Donation link copied to your clipboard!',
      'status.copied': 'Copied!',
      'status.loadingNarrationAudio': 'Loading narration audio',
      'status.playingNarration': 'Playing narration',
      'status.unableToPlayNarration': 'Unable to play narration audio.',
      'status.narrationQueued': 'Narration queued. Waiting for current audio to finish.',
      'status.draftingNarration': 'Drafting narration',
      'status.usingSavedNarration': 'Using saved narration. Try again soon.',
      'status.narrationCooldown': 'Narration is cooling down. Please wait 10 seconds before replaying.',
      'status.narrationContinuousDisabled': 'Continuous narration disabled. Current audio will finish.',
      'status.unableToStartNarration': 'Unable to start narration autoplay.',
      'status.unableToLoadNarration': 'Unable to load narration.',
      'status.preparingCheckout': 'Preparing your checkout',
      'status.generatingLink': 'Generating a shareable link',
      'status.unableToGenerateCheckout': 'Unable to generate checkout',
      'status.generatingStripeCheckout': 'Generating Stripe checkout',
      'status.paymentReady': 'Payment link ready!',
      'status.unableToGeneratePayment': 'Unable to generate payment link',
      'status.savingOrganization': 'Saving organization',
      'status.organizationReady': '{name} is ready for donations.',
      'status.unableToSaveOrganization': 'Unable to save organization',
      'status.savingCampaign': 'Saving campaign',
      'status.campaignReady': '{name} is ready for donors.',
      'status.unableToSaveCampaign': 'Unable to save campaign',
      'status.selectOrgCampaign': 'Select an organization and campaign.',
      'status.selectOrganizationFirst': 'Select an organization first.',
      'language.en': 'English (Christian)',
      'language.ar': ' ()',
      'language.he': ' ()',
      'language.hi': ' ()',
      'language.th': ' ()',
      'regions.currenciesLabel': 'Currencies',
      'regions.currenciesAria': 'Supported currencies',
      'regions.focusAreasAria': 'Regional focus areas',
      'regions.imageAlt': '{region} faith communities',
      'regions.metricUnavailable': 'Metric unavailable',
      'regions.metricUnavailableFor': 'Metric unavailable for {label}',
      'regions.narrationLoadingVoice': 'Loading voice',
      'regions.narrationPlaying': 'Playing narration',
      'regions.narrationContinuousPlaying': 'Continuous narration playing',
      'regions.narrationContinuousEnabled': 'Continuous narration enabled',
      'community.goalReached': 'Goal reached',
      'community.toGoal': '{remaining}% to goal',
      'community.openGoal': 'Open goal',
      'community.withdrawalFlexible': 'Flexible withdrawals',
      'community.withdrawalGoal': 'Goal release',
      'community.metaFallback': 'Community',
      'community.goalLabel': 'of {amount}',
      'community.noGoal': 'No goal set',
      'community.giveNow': 'Give now',
      'community.byLine': 'by {name}',
      'community.anonymous': 'Anonymous',
      'status.quickSelectFaith': 'Pick a tradition to start a checkout.',
      'status.quickSelectAmount': 'Choose an amount first.',
      'status.quickAmountTooHigh': 'Stripe supports donations up to 999,999,999,999 in your currency. Try a smaller gift.',
      'status.quickNoOrg': 'No organization is available for this lane yet. Add one in the management tab.',
      'status.quickNoCampaign': 'No campaign is ready for this organization yet. Create one to continue.',
      'status.paymentLinkMissing': 'Payment link not returned.',
      'status.quickCheckoutReady': 'Checkout ready! We opened it in a new tab.',
      'status.quickCheckoutBlocked': 'Checkout ready. Use the link below if the popup was blocked.',
      'status.quickDonationLinkReady': 'Donation link readycopy it from below.',
      'status.enterAmount': 'Enter a donation amount.',
      'status.amountTooHigh': 'Stripe supports donations up to 999,999,999,999 in your currency. Enter a smaller amount.',
      'status.organizationNotReturned': 'Organization was not returned.',
      'status.campaignNotReturned': 'Campaign was not returned.',
      'status.narrationUnavailable': 'Narration unavailable right now.'
    },
    ar: {
      'nav.tagline': '   ',
      'nav.explore': ' ',
      'nav.startGiving': ' ',
      'nav.startReceiving': ' ',
      'mobile.tagline': ' ',
      'mobile.start': '',
      'hero.title': '      .',
      'hero.description':
        '          .           .',
      'hero.ctaCreate': ' ',
      'hero.ctaManage': ' ',
      'hero.ctaShare': ' ',
      'hero.list1': '      .',
      'hero.list2': '        .',
      'hero.list3': ' Stripe       .',
      'quick.heading': ' Stripe ',
      'quick.lead':
        '         Stripe   .         .',
      'quick.tabsAria': '   ',
      'quick.tab.christian': '',
      'quick.tab.islamic': '',
      'quick.tab.jewish': '',
      'quick.tab.hindu': '',
      'quick.tab.buddhist': '',
      'quick.multiplierLabel': ':',
      'quick.sliderAria': ' ',
      'quick.sliderHint': '      .',
      'quick.metrics.followers': '  ',
      'quick.metrics.actions': '  ',
      'quick.metrics.loading': '  ',
      'quick.metrics.loadingSummary': '  ',
      'quick.metrics.live': ' ',
      'quick.copy': ' ',
      'regions.heading': ' ',
      'regions.lead':
        '     .            .',
      'regions.prev': ' ',
      'regions.next': ' ',
      'regions.narrationTitle': ' ',
      'regions.narrationRefresh': ' ',
      'regions.narrationPlay': ' ',
      'regions.narrationStop': '',
      'sectors.heading': '   ',
      'sectors.lead':
        '      :      .      .',
      'community.heading': '  ',
      'community.lead':
        '          .',
      'community.cta': '  ',
      'community.empty': '     .    .',
      'community.error': '    .   .',
      'give.heading': ' ',
      'give.lead':
        '        .    Stripe  .',
      'give.builder': ' ',
      'give.field.region': '',
      'give.field.faith': ' ',
      'give.field.organization': '',
      'give.field.campaign': '',
      'give.field.sector': ' /  ',
      'give.field.donationType': ' ',
      'give.field.amount': ' ( )',
      'give.field.frequency': '',
      'give.field.promo': '  ',
      'give.field.donorName': ' ',
      'give.field.email': '  ',
      'give.field.notes': '  ()',
      'give.placeholder.amount': '',
      'give.placeholder.name': ' ',
      'give.placeholder.email': 'jordan@example.org',
      'give.placeholder.notes': '   ...',
      'give.frequency.once': ' ',
      'give.frequency.weekly': '',
      'give.frequency.monthly': '',
      'give.frequency.annual': '',
      'give.submit': '  ',
      'give.result.title': ' ',
      'give.empty': '    .      .',
      'general.yes': '',
      'general.no': '',
      'general.loading': ' ',
      'select.faith': '  ',
      'select.region': ' ',
      'select.organization': ' ',
      'select.sector': ' ',
      'select.donationType': '  ',
      'select.campaign': ' ',
      'manage.heading': '  ',
      'manage.lead':
        '    .         .',
      'manage.tabsAria': '  ',
      'manage.tab.organizations': '',
      'manage.tab.campaigns': '',
      'manage.org.title': ' ',
      'manage.org.name': ' ',
      'manage.org.region': '',
      'manage.org.faith': ' ',
      'manage.org.locales': '  ( )',
      'manage.org.timezone': ' ',
      'manage.org.stripe': '  Stripe ()',
      'manage.org.submit': ' ',
      'manage.org.placeholderName': ' ',
      'manage.org.placeholderLocales': 'en-US, ar-AE',
      'manage.org.placeholderTimezone': 'Asia/Dubai',
      'manage.org.placeholderStripe': 'acct_123',
      'manage.campaign.title': ' ',
      'manage.campaign.organization': '',
      'manage.campaign.name': ' ',
      'manage.campaign.code': '  ()',
      'manage.campaign.types': '  ( )',
      'manage.campaign.submit': ' ',
      'manage.campaign.placeholderName': ' ',
      'manage.campaign.placeholderCode': 'community_relief',
      'manage.campaign.placeholderTypes': '  ',
      'footer.copy': ' {year}   .       .',
      'quick.totalReady': '{amount}  ',
      'quick.metrics.actionsSuffix': '{count} ',
      'quick.metrics.updated': '  {time}',
      'quick.metrics.none': '   .',
      'quick.multiplierA11ySuffix': '    ',
      'status.copyUnsupported': '     .',
      'status.copySuccess': '     !',
      'status.copied': ' !',
      'status.loadingNarrationAudio': '  ',
      'status.playingNarration': '  ',
      'status.unableToPlayNarration': '   .',
      'status.narrationQueued': '  .    .',
      'status.draftingNarration': '  ',
      'status.usingSavedNarration': '   .  .',
      'status.narrationCooldown': '   .   10   .',
      'status.narrationContinuousDisabled': '   .   .',
      'status.unableToStartNarration': '    .',
      'status.unableToLoadNarration': '  .',
      'status.preparingCheckout': '   ',
      'status.generatingLink': '   ',
      'status.unableToGenerateCheckout': '   ',
      'status.generatingStripeCheckout': '   Stripe',
      'status.paymentReady': '  !',
      'status.unableToGeneratePayment': '   ',
      'status.savingOrganization': '  ',
      'status.organizationReady': ' {name}  .',
      'status.unableToSaveOrganization': '  ',
      'status.savingCampaign': '  ',
      'status.campaignReady': ' {name}  .',
      'status.unableToSaveCampaign': '  ',
      'status.selectOrgCampaign': '  .',
      'status.selectOrganizationFirst': '  .',
      'language.en': ' ()',
      'language.ar': ' ()',
      'language.he': ' ()',
      'language.hi': ' ()',
      'language.th': ' ()',
      'regions.currenciesLabel': '',
      'regions.currenciesAria': ' ',
      'regions.focusAreasAria': '  ',
      'regions.imageAlt': ' {region} ',
      'regions.metricUnavailable': '  ',
      'regions.metricUnavailableFor': '   {label}',
      'regions.narrationLoadingVoice': '  ',
      'regions.narrationPlaying': '  ',
      'regions.narrationContinuousPlaying': '  ',
      'regions.narrationContinuousEnabled': '   ',
      'community.goalReached': '  ',
      'community.toGoal': '{remaining}%   ',
      'community.openGoal': ' ',
      'community.withdrawalFlexible': ' ',
      'community.withdrawalGoal': '   ',
      'community.metaFallback': '',
      'community.goalLabel': ' {amount}',
      'community.noGoal': '   ',
      'community.giveNow': ' ',
      'community.byLine': ' {name}',
      'community.anonymous': '',
      'status.quickSelectFaith': '    .',
      'status.quickSelectAmount': '  .',
      'status.quickAmountTooHigh': ' Stripe   999,999,999,999 .   .',
      'status.quickNoOrg': '      .     .',
      'status.quickNoCampaign': '      .   .',
      'status.paymentLinkMissing': '    .',
      'status.quickCheckoutReady': ' !    .',
      'status.quickCheckoutBlocked': ' .        .',
      'status.quickDonationLinkReady': '    .',
      'status.enterAmount': '  .',
      'status.amountTooHigh': ' Stripe   999,999,999,999 .   .',
      'status.organizationNotReturned': '   .',
      'status.campaignNotReturned': '   .',
      'status.narrationUnavailable': '   .'
    },
    he: {
      'nav.tagline': '  -',
      'nav.explore': ' ',
      'nav.startGiving': ' ',
      'nav.startReceiving': ' ',
      'mobile.tagline': ' ',
      'mobile.start': '',
      'hero.title': '      .',
      'hero.description':
        '    , ,  ,    .       ,     .',
      'hero.ctaCreate': ' ',
      'hero.ctaManage': ' ',
      'hero.ctaShare': '   ',
      'hero.list1': ',       .',
      'hero.list2': '       .',
      'hero.list3': ' Stripe     .',
      'quick.heading': ' Stripe ',
      'quick.lead':
        ' ,      Stripe   .  ,        .',
      'quick.tabsAria': '   ',
      'quick.tab.christian': '',
      'quick.tab.islamic': '',
      'quick.tab.jewish': '',
      'quick.tab.hindu': '',
      'quick.tab.buddhist': '',
      'quick.multiplierLabel': ':',
      'quick.sliderAria': ' ',
      'quick.sliderHint': '         .',
      'quick.metrics.followers': '  ',
      'quick.metrics.actions': '  ',
      'quick.metrics.loading': ' ',
      'quick.metrics.loadingSummary': ' ',
      'quick.metrics.live': ' ',
      'quick.copy': ' ',
      'regions.heading': ' ',
      'regions.lead':
        '     .     ,       .',
      'regions.prev': ' ',
      'regions.next': ' ',
      'regions.narrationTitle': ' ',
      'regions.narrationRefresh': ' ',
      'regions.narrationPlay': ' ',
      'regions.narrationStop': '',
      'sectors.heading': '   ',
      'sectors.lead':
        '        :  , ,   .      .',
      'community.heading': '  ',
      'community.lead': '        .',
      'community.cta': '  ',
      'community.empty': '    .      .',
      'community.error': '     .    .',
      'give.heading': ' ',
      'give.lead':
        '  , ,  .      Checkout   Stripe.',
      'give.builder': ' ',
      'give.field.region': '',
      'give.field.faith': ' ',
      'give.field.organization': '',
      'give.field.campaign': '',
      'give.field.sector': ' /  ',
      'give.field.donationType': ' ',
      'give.field.amount': ' ( )',
      'give.field.frequency': '',
      'give.field.promo': '  ?',
      'give.field.donorName': ' ',
      'give.field.email': '  ',
      'give.field.notes': '  ( )',
      'give.placeholder.amount': '50',
      'give.placeholder.name': ' ',
      'give.placeholder.email': 'jordan@example.org',
      'give.placeholder.notes': '   ...',
      'give.frequency.once': ' ',
      'give.frequency.weekly': '',
      'give.frequency.monthly': '',
      'give.frequency.annual': '',
      'give.submit': ' Checkout ',
      'give.result.title': ' ',
      'give.empty': '  .       .',
      'general.yes': '',
      'general.no': '',
      'general.loading': '',
      'select.faith': ' ',
      'select.region': ' ',
      'select.organization': ' ',
      'select.sector': ' ',
      'select.donationType': '  ',
      'select.campaign': ' ',
      'manage.heading': '  ',
      'manage.lead':
        '   .        .',
      'manage.tabsAria': '  ',
      'manage.tab.organizations': '',
      'manage.tab.campaigns': '',
      'manage.org.title': ' ',
      'manage.org.name': ' ',
      'manage.org.region': '',
      'manage.org.faith': ' ',
      'manage.org.locales': '  ( )',
      'manage.org.timezone': ' ',
      'manage.org.stripe': '  Stripe ( )',
      'manage.org.submit': ' ',
      'manage.org.placeholderName': ' ',
      'manage.org.placeholderLocales': 'en-US, he-IL',
      'manage.org.placeholderTimezone': 'Asia/Jerusalem',
      'manage.org.placeholderStripe': 'acct_123',
      'manage.campaign.title': ' ',
      'manage.campaign.organization': '',
      'manage.campaign.name': ' ',
      'manage.campaign.code': '  ( )',
      'manage.campaign.types': '  ( )',
      'manage.campaign.submit': ' ',
      'manage.campaign.placeholderName': ' ',
      'manage.campaign.placeholderCode': 'community_relief',
      'manage.campaign.placeholderTypes': ', , ',
      'footer.copy': ' {year}   .  -   .',
      'quick.totalReady': '{amount}  ',
      'quick.metrics.actionsSuffix': '{count} ',
      'quick.metrics.updated': '  {time}',
      'quick.metrics.none': '   .',
      'quick.multiplierA11ySuffix': '   ',
      'status.copyUnsupported': '     .',
      'status.copySuccess': '   !',
      'status.copied': '!',
      'status.loadingNarrationAudio': '  ',
      'status.playingNarration': ' ',
      'status.unableToPlayNarration': '    .',
      'status.narrationQueued': ' .    .',
      'status.draftingNarration': ' ',
      'status.usingSavedNarration': '   .    .',
      'status.narrationCooldown': ' .  10    .',
      'status.narrationContinuousDisabled': '  .   .',
      'status.unableToStartNarration': '    .',
      'status.unableToLoadNarration': '   .',
      'status.preparingCheckout': '  -Checkout',
      'status.generatingLink': '  ',
      'status.unableToGenerateCheckout': '   Checkout',
      'status.generatingStripeCheckout': ' Checkout  Stripe',
      'status.paymentReady': '  !',
      'status.unableToGeneratePayment': '    ',
      'status.savingOrganization': ' ',
      'status.organizationReady': '{name}   .',
      'status.unableToSaveOrganization': '    ',
      'status.savingCampaign': ' ',
      'status.campaignReady': '{name}  .',
      'status.unableToSaveCampaign': '    ',
      'status.selectOrgCampaign': '  .',
      'status.selectOrganizationFirst': '  .',
      'language.en': ' ()',
      'language.ar': ' ()',
      'language.he': ' ()',
      'language.hi': ' ()',
      'language.th': ' ()',
      'regions.currenciesLabel': '',
      'regions.currenciesAria': ' ',
      'regions.focusAreasAria': '  ',
      'regions.imageAlt': '  {region}',
      'regions.metricUnavailable': '  ',
      'regions.metricUnavailableFor': '    {label}',
      'regions.narrationLoadingVoice': ' ',
      'regions.narrationPlaying': ' ',
      'regions.narrationContinuousPlaying': '  ',
      'regions.narrationContinuousEnabled': '  ',
      'community.goalReached': ' ',
      'community.toGoal': '{remaining}%  ',
      'community.openGoal': ' ',
      'community.withdrawalFlexible': ' ',
      'community.withdrawalGoal': '   ',
      'community.metaFallback': '',
      'community.goalLabel': ' {amount}',
      'community.noGoal': '  ',
      'community.giveNow': ' ',
      'community.byLine': ' {name}',
      'community.anonymous': '',
      'status.quickSelectFaith': '    .',
      'status.quickSelectAmount': '  .',
      'status.quickAmountTooHigh': 'Stripe    999,999,999,999  .    .',
      'status.quickNoOrg': '     .    .',
      'status.quickNoCampaign': '      .    .',
      'status.paymentLinkMissing': '   .',
      'status.quickCheckoutReady': '-Checkout !    .',
      'status.quickCheckoutBlocked': '-Checkout .      .',
      'status.quickDonationLinkReady': '    .',
      'status.enterAmount': '  .',
      'status.amountTooHigh': 'Stripe    999,999,999,999  .    .',
      'status.organizationNotReturned': '  .',
      'status.campaignNotReturned': '  .',
      'status.narrationUnavailable': '   .'
    },
    hi: {
      'nav.tagline': '-  ',
      'nav.explore': ' ',
      'nav.startGiving': '  ',
      'nav.startReceiving': '   ',
      'mobile.tagline': ' ',
      'mobile.start': ' ',
      'hero.title': '          ',
      'hero.description':
        ', , ,                         ,        ',
      'hero.ctaCreate': ' ',
      'hero.ctaManage': '  ',
      'hero.ctaShare': '   ',
      'hero.list1': '- ,      ',
      'hero.list2': '-  ,     ',
      'hero.list3': ' Stripe          ',
      'quick.heading': ' Stripe  ',
      'quick.lead':
        '  ,          Stripe     ,           ',
      'quick.tabsAria': '     ',
      'quick.tab.christian': '',
      'quick.tab.islamic': '',
      'quick.tab.jewish': '',
      'quick.tab.hindu': '',
      'quick.tab.buddhist': '',
      'quick.multiplierLabel': ':',
      'quick.sliderAria': ' ',
      'quick.sliderHint': '        ',
      'quick.metrics.followers': ' ',
      'quick.metrics.actions': '  ',
      'quick.metrics.loading': '    ',
      'quick.metrics.loadingSummary': '    ',
      'quick.metrics.live': ' ',
      'quick.copy': '  ',
      'regions.heading': ' ',
      'regions.lead':
        '             ,          ',
      'regions.prev': ' ',
      'regions.next': ' ',
      'regions.narrationTitle': ' ',
      'regions.narrationRefresh': ' ',
      'regions.narrationPlay': ' ',
      'regions.narrationStop': '',
      'sectors.heading': '        ',
      'sectors.lead':
        '           :  , ,              ',
      'community.heading': '   ',
      'community.lead': '               ',
      'community.cta': '    ',
      'community.empty': '              ',
      'community.error': '              ',
      'give.heading': '  ',
      'give.lead':
        '     , ,          Stripe   ',
      'give.builder': ' ',
      'give.field.region': '',
      'give.field.faith': ' ',
      'give.field.organization': '',
      'give.field.campaign': '',
      'give.field.sector': ' /  ',
      'give.field.donationType': ' ',
      'give.field.amount': ' ( )',
      'give.field.frequency': '',
      'give.field.promo': '   ?',
      'give.field.donorName': '  ',
      'give.field.email': '  ',
      'give.field.notes': '  ()',
      'give.placeholder.amount': '50',
      'give.placeholder.name': ' ',
      'give.placeholder.email': 'jordan@example.org',
      'give.placeholder.notes': '    ...',
      'give.frequency.once': ' ',
      'give.frequency.weekly': '',
      'give.frequency.monthly': '',
      'give.frequency.annual': '',
      'give.submit': '  ',
      'give.result.title': ' ',
      'give.empty': '             ',
      'general.yes': '',
      'general.no': '',
      'general.loading': '   ',
      'select.faith': ' ',
      'select.region': ' ',
      'select.organization': ' ',
      'select.sector': ' ',
      'select.donationType': '  ',
      'select.campaign': ' ',
      'manage.heading': '   ',
      'manage.lead':
        '                 ',
      'manage.tabsAria': '     ',
      'manage.tab.organizations': '',
      'manage.tab.campaigns': '',
      'manage.org.title': ' ',
      'manage.org.name': '  ',
      'manage.org.region': '',
      'manage.org.faith': ' ',
      'manage.org.locales': '  (  )',
      'manage.org.timezone': ' ',
      'manage.org.stripe': 'Stripe   ()',
      'manage.org.submit': ' ',
      'manage.org.placeholderName': ' ',
      'manage.org.placeholderLocales': 'en-IN, hi-IN',
      'manage.org.placeholderTimezone': 'Asia/Kolkata',
      'manage.org.placeholderStripe': 'acct_123',
      'manage.campaign.title': ' ',
      'manage.campaign.organization': '',
      'manage.campaign.name': '  ',
      'manage.campaign.code': '  ()',
      'manage.campaign.types': '  (  )',
      'manage.campaign.submit': ' ',
      'manage.campaign.placeholderName': ' ',
      'manage.campaign.placeholderCode': 'community_relief',
      'manage.campaign.placeholderTypes': ', , ',
      'footer.copy': ' {year}    -   -   ',
      'quick.totalReady': '{amount}    ',
      'quick.metrics.actionsSuffix': '{count} ',
      'quick.metrics.updated': '  {time}',
      'quick.metrics.none': '    ',
      'quick.multiplierA11ySuffix': '   ',
      'status.copyUnsupported': '        ',
      'status.copySuccess': '      !',
      'status.copied': ' !',
      'status.loadingNarrationAudio': '     ',
      'status.playingNarration': '   ',
      'status.unableToPlayNarration': '     ',
      'status.narrationQueued': '         ',
      'status.draftingNarration': '    ',
      'status.usingSavedNarration': '             ',
      'status.narrationCooldown': '         10   ',
      'status.narrationContinuousDisabled': '       ',
      'status.unableToStartNarration': '       ',
      'status.unableToLoadNarration': '    ',
      'status.preparingCheckout': '     ',
      'status.generatingLink': '       ',
      'status.unableToGenerateCheckout': '    ',
      'status.generatingStripeCheckout': 'Stripe     ',
      'status.paymentReady': '  !',
      'status.unableToGeneratePayment': '     ',
      'status.savingOrganization': '    ',
      'status.organizationReady': '{name}       ',
      'status.unableToSaveOrganization': '    ',
      'status.savingCampaign': '    ',
      'status.campaignReady': '{name}     ',
      'status.unableToSaveCampaign': '    ',
      'status.selectOrgCampaign': '    ',
      'status.selectOrganizationFirst': '   ',
      'language.en': ' ()',
      'language.ar': ' ()',
      'language.he': ' ()',
      'language.hi': ' ()',
      'language.th': ' ()',
      'regions.currenciesLabel': '',
      'regions.currenciesAria': ' ',
      'regions.focusAreasAria': '  ',
      'regions.imageAlt': '{region}   ',
      'regions.metricUnavailable': '  ',
      'regions.metricUnavailableFor': '{label}     ',
      'regions.narrationLoadingVoice': '    ',
      'regions.narrationPlaying': '   ',
      'regions.narrationContinuousPlaying': '    ',
      'regions.narrationContinuousEnabled': '   ',
      'community.goalReached': '  ',
      'community.toGoal': '  {remaining}% ',
      'community.openGoal': ' ',
      'community.withdrawalFlexible': ' ',
      'community.withdrawalGoal': '    ',
      'community.metaFallback': '',
      'community.goalLabel': '{amount}  ',
      'community.noGoal': '   ',
      'community.giveNow': '  ',
      'community.byLine': '{name} ',
      'community.anonymous': '',
      'status.quickSelectFaith': '       ',
      'status.quickSelectAmount': '   ',
      'status.quickAmountTooHigh': 'Stripe     999,999,999,999        ',
      'status.quickNoOrg': '              ',
      'status.quickNoCampaign': '               ',
      'status.paymentLinkMissing': '    ',
      'status.quickCheckoutReady': '  !       ',
      'status.quickCheckoutBlocked': '             ',
      'status.quickDonationLinkReady': '       ',
      'status.enterAmount': '   ',
      'status.amountTooHigh': 'Stripe    999,999,999,999          ',
      'status.organizationNotReturned': '   ',
      'status.campaignNotReturned': '   ',
      'status.narrationUnavailable': '    '
    },
    th: {
      'nav.tagline': '',
      'nav.explore': '',
      'nav.startGiving': '',
      'nav.startReceiving': '',
      'mobile.tagline': '',
      'mobile.start': '',
      'hero.title': '.',
      'hero.description': '       .',
      'hero.ctaCreate': '',
      'hero.ctaManage': '',
      'hero.ctaShare': '',
      'hero.list1': '  .',
      'hero.list2': '.',
      'hero.list3': ' Stripe .',
      'quick.heading': ' Stripe ',
      'quick.lead': '   Stripe    .',
      'quick.tabsAria': '',
      'quick.tab.christian': '',
      'quick.tab.islamic': '',
      'quick.tab.jewish': '',
      'quick.tab.hindu': '',
      'quick.tab.buddhist': '',
      'quick.multiplierLabel': ':',
      'quick.sliderAria': '',
      'quick.sliderHint': '.',
      'quick.metrics.followers': '',
      'quick.metrics.actions': '',
      'quick.metrics.loading': '',
      'quick.metrics.loadingSummary': '',
      'quick.metrics.live': '',
      'quick.copy': '',
      'regions.heading': '',
      'regions.lead': '   .',
      'regions.prev': '',
      'regions.next': '',
      'regions.narrationTitle': '',
      'regions.narrationRefresh': '',
      'regions.narrationPlay': '',
      'regions.narrationStop': '',
      'sectors.heading': '',
      'sectors.lead': ':     .',
      'community.heading': '',
      'community.lead': ' .',
      'community.cta': '',
      'community.empty': ' .',
      'community.error': ' .',
      'give.heading': '',
      'give.lead': '    Stripe .',
      'give.builder': '',
      'give.field.region': '',
      'give.field.faith': '',
      'give.field.organization': '',
      'give.field.campaign': '',
      'give.field.sector': ' / ',
      'give.field.donationType': '',
      'give.field.amount': ' ()',
      'give.field.frequency': '',
      'give.field.promo': '?',
      'give.field.donorName': '',
      'give.field.email': '',
      'give.field.notes': ' ()',
      'give.placeholder.amount': '50',
      'give.placeholder.name': ' ',
      'give.placeholder.email': 'jordan@example.org',
      'give.placeholder.notes': '',
      'give.frequency.once': '',
      'give.frequency.weekly': '',
      'give.frequency.monthly': '',
      'give.frequency.annual': '',
      'give.submit': '',
      'give.result.title': '',
      'give.empty': ' .',
      'general.yes': '',
      'general.no': '',
      'general.loading': '',
      'select.faith': '',
      'select.region': '',
      'select.organization': '',
      'select.sector': '',
      'select.donationType': '',
      'select.campaign': '',
      'manage.heading': '',
      'manage.lead': ' .',
      'manage.tabsAria': '',
      'manage.tab.organizations': '',
      'manage.tab.campaigns': '',
      'manage.org.title': '',
      'manage.org.name': '',
      'manage.org.region': '',
      'manage.org.faith': '',
      'manage.org.locales': ' ()',
      'manage.org.timezone': '',
      'manage.org.stripe': ' Stripe ()',
      'manage.org.submit': '',
      'manage.org.placeholderName': '',
      'manage.org.placeholderLocales': 'en-TH, th-TH',
      'manage.org.placeholderTimezone': 'Asia/Bangkok',
      'manage.org.placeholderStripe': 'acct_123',
      'manage.campaign.title': '',
      'manage.campaign.organization': '',
      'manage.campaign.name': '',
      'manage.campaign.code': ' ()',
      'manage.campaign.types': ' ()',
      'manage.campaign.submit': '',
      'manage.campaign.placeholderName': '',
      'manage.campaign.placeholderCode': 'community_relief',
      'manage.campaign.placeholderTypes': ', , ',
      'footer.copy': ' {year}    .',
      'quick.totalReady': '{amount} ',
      'quick.metrics.actionsSuffix': '{count} ',
      'quick.metrics.updated': ' {time}',
      'quick.metrics.none': '.',
      'quick.multiplierA11ySuffix': '',
      'status.copyUnsupported': '.',
      'status.copySuccess': '!',
      'status.copied': '!',
      'status.loadingNarrationAudio': '',
      'status.playingNarration': '',
      'status.unableToPlayNarration': '.',
      'status.narrationQueued': ' .',
      'status.draftingNarration': '',
      'status.usingSavedNarration': ' .',
      'status.narrationCooldown': '  10 .',
      'status.narrationContinuousDisabled': ' .',
      'status.unableToStartNarration': '.',
      'status.unableToLoadNarration': '.',
      'status.preparingCheckout': '',
      'status.generatingLink': '',
      'status.unableToGenerateCheckout': '',
      'status.generatingStripeCheckout': ' Stripe',
      'status.paymentReady': '!',
      'status.unableToGeneratePayment': '',
      'status.savingOrganization': '',
      'status.organizationReady': '{name} .',
      'status.unableToSaveOrganization': '',
      'status.savingCampaign': '',
      'status.campaignReady': '{name} .',
      'status.unableToSaveCampaign': '',
      'status.selectOrgCampaign': '.',
      'status.selectOrganizationFirst': '.',
      'language.en': ' ()',
      'language.ar': ' ()',
      'language.he': ' ()',
      'language.hi': ' ()',
      'language.th': ' ()',
      'regions.currenciesLabel': '',
      'regions.currenciesAria': '',
      'regions.focusAreasAria': '',
      'regions.imageAlt': ' {region}',
      'regions.metricUnavailable': '',
      'regions.metricUnavailableFor': ' {label}',
      'regions.narrationLoadingVoice': '',
      'regions.narrationPlaying': '',
      'regions.narrationContinuousPlaying': '',
      'regions.narrationContinuousEnabled': '',
      'community.goalReached': '',
      'community.toGoal': ' {remaining}% ',
      'community.openGoal': '',
      'community.withdrawalFlexible': '',
      'community.withdrawalGoal': '',
      'community.metaFallback': '',
      'community.goalLabel': ' {amount}',
      'community.noGoal': '',
      'community.giveNow': '',
      'community.byLine': ' {name}',
      'community.anonymous': '',
      'status.quickSelectFaith': '.',
      'status.quickSelectAmount': '.',
      'status.quickAmountTooHigh': 'Stripe  999,999,999,999  .',
      'status.quickNoOrg': ' .',
      'status.quickNoCampaign': ' .',
      'status.paymentLinkMissing': '.',
      'status.quickCheckoutReady': '! .',
      'status.quickCheckoutBlocked': ' .',
      'status.quickDonationLinkReady': '.',
      'status.enterAmount': '.',
      'status.amountTooHigh': 'Stripe  999,999,999,999  .',
      'status.organizationNotReturned': '.',
      'status.campaignNotReturned': '.',
      'status.narrationUnavailable': '.'
    }
  };

  const LANGUAGE_CONTENT = {
    ar: {
      quickFaiths: {
        christian: {
          title: ' ',
          subtitle: '       .',
          detail: '       .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        islam: {
          title: '  ',
          subtitle: '      .',
          detail: '        .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '   '
        },
        jewish: {
          title: ' ',
          subtitle: '      .',
          detail: '      .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        hindu: {
          title: '  ',
          subtitle: '       .',
          detail: '      .',
          amounts: ['  ', '    ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        buddhist: {
          title: '  ',
          subtitle: '      .',
          detail: '      .',
          amounts: ['   ', '  ', '   '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        }
      },
      regions: {
        NA: {
          name: ' ',
          copy:
            '     ACH  Apple Pay       IRS CRA.',
          sectors: {
            relief: '  ',
            food: '  ',
            youth: ' ',
            capital: '  '
          }
        },
        EU: {
          name: '',
          copy: ' SEPA    Gift Aid    GDPR  .',
          sectors: {
            refugee: '  ',
            culture: ' ',
            energy: '  ',
            education: ' '
          }
        },
        MENA: {
          name: '   ',
          copy: '          .',
          sectors: {
            ramadan_food: '  ',
            water: '  ',
            education: '  ',
            infrastructure: ' '
          }
        },
        SA: {
          name: ' ',
          copy: '   INR LKR NPR   PAN     WhatsApp.',
          sectors: {
            disaster: '  ',
            seva: '  ',
            health: ' ',
            education: ' '
          }
        },
        APAC: {
          name: '  ',
          copy: '   :  BECS PayNow    .',
          sectors: {
            retreats: ' ',
            environment: ' ',
            elder: '  ',
            kitchen: ' '
          }
        }
      },
      sectors: {
        relief: {
          title: ' ',
          label: ' ',
          desc: '      .'
        },
        education: {
          title: '',
          label: '',
          desc: '      .'
        },
        health: {
          title: ' ',
          label: ' ',
          desc: '      .'
        },
        food: {
          title: ' ',
          label: ' ',
          desc: '        .'
        },
        youth: {
          title: ' ',
          label: ' ',
          desc: '     .'
        },
        capital: {
          title: '  ',
          label: '  ',
          desc: '     .'
        }
      }
    },
    he: {
      quickFaiths: {
        christian: {
          title: '  ',
          subtitle: '   ,    .',
          detail: '  ,    .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        islam: {
          title: '  ',
          subtitle: '  ,    .',
          detail: '  ,     .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '   '
        },
        jewish: {
          title: '  ',
          subtitle: '   ,    .',
          detail: '  ,    .',
          amounts: ['    ', '  ', '  '],
          ctaGenerate: ' Checkout  ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        hindu: {
          title: '  ',
          subtitle: '  ,     .',
          detail: '   ,    .',
          amounts: ['  ', '   ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        },
        buddhist: {
          title: '  ',
          subtitle: '  ,    .',
          detail: '   ,   .',
          amounts: ['   ', '  ', '  '],
          ctaGenerate: ' Checkout ',
          ctaShare: '  ',
          actionsLabel: '  '
        }
      },
      regions: {
        NA: {
          name: ' ',
          copy: '"   -ACH, , Apple Pay  -    IRS -CRA.',
          sectors: {
            relief: '  ',
            food: '  ',
            youth: ' ',
            capital: ' '
          }
        },
        EU: {
          name: '',
          copy: ' SEPA    Gift Aid    -  GDPR.',
          sectors: {
            refugee: '  ',
            culture: ' ',
            energy: '  ',
            education: ' '
          }
        },
        MENA: {
          name: '   ',
          copy: '     ,      .',
          sectors: {
            ramadan_food: '  ',
            water: ' ',
            education: ' ',
            infrastructure: ' '
          }
        },
        SA: {
          name: ' ',
          copy: '  INR, LKR -NPR   PAN,     WhatsApp.',
          sectors: {
            disaster: ' ',
            seva: '  ',
            health: ' ',
            education: ' '
          }
        },
        APAC: {
          name: ' ',
          copy: ' : , BECS -PayNow    .',
          sectors: {
            retreats: ' ',
            environment: ' ',
            elder: '  ',
            kitchen: ' '
          }
        }
      },
      sectors: {
        relief: {
          title: ' ',
          label: ' ',
          desc: '   ,   .'
        },
        education: {
          title: '',
          label: '',
          desc: ',     .'
        },
        health: {
          title: ' ',
          label: ' ',
          desc: ',      .'
        },
        food: {
          title: ' ',
          label: ' ',
          desc: ' ,  ,    .'
        },
        youth: {
          title: ' ',
          label: ' ',
          desc: ' ,    .'
        },
        capital: {
          title: ' ',
          label: ' ',
          desc: ' ,   .'
        }
      }
    },
    hi: {
      quickFaiths: {
        christian: {
          title: ' ',
          subtitle: ' ,         .',
          detail: '   ,      .',
          amounts: ['-    ', '    ', '    '],
          ctaGenerate: '  ',
          ctaShare: '  ',
          actionsLabel: '    '
        },
        islam: {
          title: '   ',
          subtitle: ' ,        .',
          detail: '    ,      .',
          amounts: ['   ', '    ', '    '],
          ctaGenerate: '   ',
          ctaShare: '   ',
          actionsLabel: '   '
        },
        jewish: {
          title: '  ',
          subtitle: ' ,        .',
          detail: '  ,      .',
          amounts: ['    ', '    ', '   '],
          ctaGenerate: '  ',
          ctaShare: '   ',
          actionsLabel: '  '
        },
        hindu: {
          title: '  ',
          subtitle: ',        .',
          detail: ' ,          .',
          amounts: ['   ', '     ', '    '],
          ctaGenerate: '   ',
          ctaShare: '   ',
          actionsLabel: '    '
        },
        buddhist: {
          title: '   ',
          subtitle: ' ,        .',
          detail: '  ,        .',
          amounts: ['     ', '    ', '     '],
          ctaGenerate: '  ',
          ctaShare: '   ',
          actionsLabel: '   '
        }
      },
      regions: {
        NA: {
          name: ' ',
          copy: '   ACH, , Apple Pay  -   IRS  CRA-      .',
          sectors: {
            relief: '   ',
            food: '  ',
            youth: ' ',
            capital: ' '
          }
        },
        EU: {
          name: '',
          copy: ' SEPA   Gift Aid    GDPR    .',
          sectors: {
            refugee: '  ',
            culture: ' ',
            energy: '  ',
            education: ' '
          }
        },
        MENA: {
          name: '    ',
          copy: '-   ,       .',
          sectors: {
            ramadan_food: '  ',
            water: '  ',
            education: '   ',
            infrastructure: ' '
          }
        },
        SA: {
          name: ' ',
          copy: 'PAN ,     WhatsApp    INR, LKR  NPR  .',
          sectors: {
            disaster: ' ',
            seva: '  ',
            health: ' ',
            education: '  '
          }
        },
        APAC: {
          name: ' ',
          copy: '   : , BECS  PayNow       .',
          sectors: {
            retreats: ' ',
            environment: ' ',
            elder: '  ',
            kitchen: ' '
          }
        }
      },
      sectors: {
        relief: {
          title: ' ',
          label: ' ',
          desc: ',         .'
        },
        education: {
          title: '',
          label: '',
          desc: ', -    .'
        },
        health: {
          title: '  ',
          label: '  ',
          desc: ',        .'
        },
        food: {
          title: ' ',
          label: ' ',
          desc: ' ,  ,     .'
        },
        youth: {
          title: '  ',
          label: '  ',
          desc: ' ,    .'
        },
        capital: {
          title: '  ',
          label: '  ',
          desc: ' ,    .'
        }
      }
    },
    th: {
      quickFaiths: {
        christian: {
          title: '',
          subtitle: '  .',
          detail: '  .',
          amounts: ['', '', ''],
          ctaGenerate: '',
          ctaShare: '',
          actionsLabel: ''
        },
        islam: {
          title: '',
          subtitle: '  .',
          detail: '  .',
          amounts: ['', '', ''],
          ctaGenerate: '',
          ctaShare: '',
          actionsLabel: ''
        },
        jewish: {
          title: '',
          subtitle: '  .',
          detail: '  .',
          amounts: ['', '', ''],
          ctaGenerate: '',
          ctaShare: '',
          actionsLabel: ''
        },
        hindu: {
          title: '',
          subtitle: '  .',
          detail: '  .',
          amounts: ['', '', ''],
          ctaGenerate: '',
          ctaShare: '',
          actionsLabel: ''
        },
        buddhist: {
          title: '',
          subtitle: '  .',
          detail: '  .',
          amounts: ['', '', ''],
          ctaGenerate: '',
          ctaShare: '',
          actionsLabel: ''
        }
      },
      regions: {
        NA: {
          name: '',
          copy: '  ACH  Apple Pay   IRS  CRA.',
          sectors: {
            relief: '',
            food: '',
            youth: '',
            capital: ''
          }
        },
        EU: {
          name: '',
          copy: ' SEPA   Gift Aid   GDPR .',
          sectors: {
            refugee: '',
            culture: '',
            energy: '',
            education: ''
          }
        },
        MENA: {
          name: '',
          copy: '   .',
          sectors: {
            ramadan_food: '',
            water: '',
            education: '',
            infrastructure: ''
          }
        },
        SA: {
          name: '',
          copy: ' INR, LKR  NPR  PAN   WhatsApp.',
          sectors: {
            disaster: '',
            seva: '',
            health: '',
            education: ''
          }
        },
        APAC: {
          name: '',
          copy: ':  BECS  PayNow .',
          sectors: {
            retreats: '',
            environment: '',
            elder: '',
            kitchen: ''
          }
        }
      },
      sectors: {
        relief: {
          title: '',
          label: '',
          desc: '  .'
        },
        education: {
          title: '',
          label: '',
          desc: '  .'
        },
        health: {
          title: '',
          label: '',
          desc: '  .'
        },
        food: {
          title: '',
          label: '',
          desc: '   .'
        },
        youth: {
          title: '',
          label: '',
          desc: '  .'
        },
        capital: {
          title: '',
          label: '',
          desc: '  .'
        }
      }
    }
  };

  function getActiveLanguage() {
    return state.language || DEFAULT_LANGUAGE;
  }

  function getTranslations(language = getActiveLanguage()) {
    return TRANSLATIONS[language] || TRANSLATIONS[DEFAULT_LANGUAGE] || {};
  }

  function formatTemplate(template, params = {}) {
    if (typeof template !== 'string') return '';
    return template.replace(/\{([^}]+)\}/g, (match, key) => {
      const trimmed = key.trim();
      if (trimmed && Object.prototype.hasOwnProperty.call(params, trimmed)) {
        const value = params[trimmed];
        return value == null ? '' : String(value);
      }
      return match;
    });
  }

  function translate(key, params = {}, fallback = '') {
    const language = getActiveLanguage();
    const translations = getTranslations(language);
    let template = translations[key];
    if (template == null && language !== DEFAULT_LANGUAGE) {
      template = getTranslations(DEFAULT_LANGUAGE)[key];
    }
    if (template == null) {
      template = fallback || '';
    }
    return formatTemplate(typeof template === 'string' ? template : fallback || '', params);
  }

  function getLanguageContentSection(section) {
    const language = getActiveLanguage();
    const content = LANGUAGE_CONTENT[language];
    return content && content[section] ? content[section] : null;
  }

  function getLanguageOption(code) {
    return LANGUAGE_OPTIONS.find(option => option.code === code) || null;
  }

  function applyLanguageAttributes(option) {
    const languageOption = option || getLanguageOption(getActiveLanguage()) || getLanguageOption(DEFAULT_LANGUAGE);
    const html = document.documentElement;
    if (html) {
      html.setAttribute('lang', languageOption?.code || DEFAULT_LANGUAGE);
      const dir = languageOption?.dir || 'ltr';
      html.setAttribute('dir', dir);
    }
    const body = document.body;
    if (body) {
      body.classList.toggle('rtl', (languageOption?.dir || 'ltr') === 'rtl');
    }
  }

  function applyStaticTranslations(root = document) {
    if (!root) return;
    const elements = root.querySelectorAll('[data-i18n], [data-i18n-placeholder], [data-i18n-html]');
    elements.forEach(element => {
      const key = element.getAttribute('data-i18n');
      const attrList = (element.getAttribute('data-i18n-attr') || '')
        .split(',')
        .map(attr => attr.trim())
        .filter(Boolean);
      if (key) {
        const value = translate(key, {}, element.textContent || element.innerHTML || '');
        if (attrList.length) {
          attrList.forEach(attr => {
            element.setAttribute(attr, value);
          });
        }
        if (element.hasAttribute('data-i18n-html')) {
          element.innerHTML = translate(key, {}, element.innerHTML || '');
        } else if (!attrList.length) {
          element.textContent = value;
        }
      }
      const placeholderKey = element.getAttribute('data-i18n-placeholder');
      if (placeholderKey) {
        element.setAttribute('placeholder', translate(placeholderKey, {}, element.getAttribute('placeholder') || ''));
      }
    });
  }

  function getLanguageLabel(option) {
    if (!option) return '';
    const fallback = option.label || option.code.toUpperCase();
    return translate(option.labelKey, {}, fallback);
  }

  function updateLanguageSwitcherDisplay(wrapper) {
    if (!wrapper) return;
    const option = getLanguageOption(getActiveLanguage()) || getLanguageOption(DEFAULT_LANGUAGE);
    const flagEl = wrapper.querySelector('[data-language-flag]');
    const labelEl = wrapper.querySelector('[data-language-label]');
    if (flagEl) {
      flagEl.textContent = option?.flag || '';
    }
    if (labelEl) {
      labelEl.textContent = getLanguageLabel(option);
    }
    const menu = wrapper.querySelector('.language-menu');
    if (menu) {
      menu.querySelectorAll('button[data-language]').forEach(button => {
        const code = button.getAttribute('data-language');
        button.dataset.active = code === option?.code ? 'true' : 'false';
      });
    }
  }

  function closeLanguageMenus(except) {
    document.querySelectorAll('[data-language-switcher] .language-menu').forEach(menu => {
      if (menu === except) return;
      menu.hidden = true;
      const toggle = menu.parentElement?.querySelector('.language-toggle');
      if (toggle) {
        toggle.setAttribute('aria-expanded', 'false');
      }
    });
  }

  function initLanguageSwitchers() {
    const switchers = Array.from(document.querySelectorAll('[data-language-switcher]'));
    if (!switchers.length) return;

    switchers.forEach(wrapper => {
      const toggle = wrapper.querySelector('.language-toggle');
      const menu = wrapper.querySelector('.language-menu');
      if (!toggle || !menu) return;

      menu.innerHTML = '';
      LANGUAGE_OPTIONS.forEach(option => {
        const item = document.createElement('li');
        item.setAttribute('role', 'none');

        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'language-option';
        button.setAttribute('role', 'option');
        button.setAttribute('data-language', option.code);
        button.dataset.active = option.code === getActiveLanguage() ? 'true' : 'false';
        button.innerHTML = `<span><span class="language-flag">${option.flag}</span><span>${escapeHtml(getLanguageLabel(option))}</span></span>`;
        button.addEventListener('click', () => {
          closeLanguageMenus();
          applyLanguage(option.code);
        });
        item.appendChild(button);
        menu.appendChild(item);
      });

      toggle.addEventListener('click', () => {
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
        if (isExpanded) {
          closeLanguageMenus();
        } else {
          closeLanguageMenus(menu);
          menu.hidden = false;
          toggle.setAttribute('aria-expanded', 'true');
          const firstOption = menu.querySelector('button');
          if (firstOption) {
            firstOption.focus();
          }
        }
      });
    });

    document.addEventListener('click', (event) => {
      const target = event.target;
      if (!(target instanceof Node)) return;
      if ((target).closest('[data-language-switcher]')) return;
      closeLanguageMenus();
    });

    switchers.forEach(updateLanguageSwitcherDisplay);
  }

  function applyLanguage(language, { persist = true } = {}) {
    const option = getLanguageOption(language) || getLanguageOption(DEFAULT_LANGUAGE);
    const nextCode = option?.code || DEFAULT_LANGUAGE;
    if (state.language === nextCode) {
      applyLanguageAttributes(option);
      document.querySelectorAll('[data-language-switcher]').forEach(updateLanguageSwitcherDisplay);
      applyStaticTranslations();
      updateFooterCopy();
      return;
    }

    state.language = nextCode;
    if (persist && typeof window !== 'undefined' && window?.localStorage) {
      try {
        window.localStorage.setItem(LANGUAGE_STORAGE_KEY, state.language);
      } catch (error) {
        console.warn('Unable to persist language', error);
      }
    }

    applyLanguageAttributes(option);
    applyStaticTranslations();
    document.querySelectorAll('[data-language-switcher]').forEach(updateLanguageSwitcherDisplay);
    refreshLocalizedContent();
  }

  function refreshLocalizedContent() {
    applyLanguageAttributes();
    updateFooterCopy();

    if (typeof refreshQuickLocalizedContent === 'function') {
      refreshQuickLocalizedContent();
    }
    updateQuickMetricsDisplay();

    const previousSlideId = SLIDES[state.slideIndex]?.id || null;
    renderSlides();
    if (previousSlideId) {
      const targetIndex = SLIDES.findIndex(slide => slide.id === previousSlideId);
      if (targetIndex >= 0) {
        showSlide(targetIndex, false, true);
      }
    }

    renderSectors();
    populateRegionSelects();
    populateFaithSelects();
    populateSectorSelects();
    setDonationTypeOptions(els.donationFaith.value);
    updateOrgOptions();
    if (els.donationOrg.value) {
      updateCampaignOptions(els.donationOrg.value);
    }

    renderCommunityCampaigns(state.communityCampaigns);
    resetAutoSlide();
    setNarrationControlsState(state.activeNarrationAudio ? 'playing' : state.narrationLoading ? 'loading' : 'idle');
  }

  function getSectorStrings(value) {
    const base = SECTORS.find(sector => sector.value === value) || {};
    const localizedSectors = getLanguageContentSection('sectors') || {};
    const localized = value ? localizedSectors[value] || {} : {};
    const title = localized.title ?? base.title ?? value;
    const label = localized.label ?? title;
    const desc = localized.desc ?? base.desc ?? '';
    return { title, label, desc };
  }

  function getQuickContent(faith) {
    const base = QUICK_FAITH_MAP.get(faith) || {};
    const localizedQuick = getLanguageContentSection('quickFaiths') || {};
    const localized = localizedQuick[faith] || {};
    const amounts = Array.isArray(base.amounts)
      ? base.amounts.map((amount, index) => ({
          ...amount,
          label: Array.isArray(localized.amounts) && localized.amounts[index]
            ? localized.amounts[index]
            : amount.label
        }))
      : [];
    return {
      title: localized.title ?? base.title ?? '',
      subtitle: localized.subtitle ?? base.subtitle ?? '',
      detail: localized.detail ?? base.detail ?? '',
      amounts,
      ctaGenerate: localized.ctaGenerate ?? base.ctaGenerate ?? translate('give.submit'),
      ctaShare: localized.ctaShare ?? base.ctaShare ?? translate('community.giveNow'),
      actionsLabel: localized.actionsLabel ?? base.metrics?.actionsLabel ?? translate('quick.metrics.actions'),
      followersLabel: translate('quick.metrics.followers')
    };
  }

  function getRegionContent(slide) {
    const localizedRegions = getLanguageContentSection('regions') || {};
    const localized = slide?.id ? localizedRegions[slide.id] || {} : {};
    const sectors = Array.isArray(slide?.sectors)
      ? slide.sectors.map(item => {
          const sector = typeof item === 'string' ? { label: item } : { ...item };
          const key = sector.metric || sector.value || sector.label;
          if (key) {
            const localizedLabel = localized.sectors?.[key] ?? getSectorStrings(key).label;
            if (localizedLabel) {
              sector.label = localizedLabel;
            }
          }
          return sector;
        })
      : [];
    return {
      name: localized.name ?? slide?.name ?? '',
      copy: localized.copy ?? slide?.copy ?? '',
      sectors
    };
  }

  const QUICK_FAITHS = [
    {
      key: 'christian',
      title: 'Christian ministries',
      subtitle: 'Direct support for parish life, community meals, and global missions.',
      detail: 'Split across worship, meals, and relief in this lane.',
      currency: 'USD',
      locale: 'en-US',
      gradient: 'linear-gradient(135deg, rgba(212, 162, 76, 0.95), rgba(122, 157, 146, 0.95))',
      cardGradient: 'linear-gradient(145deg, rgba(212, 162, 76, 0.22), rgba(122, 157, 146, 0.18))',
      borderColor: 'rgba(212, 162, 76, 0.45)',
      summaryBorder: 'rgba(212, 162, 76, 0.4)',
      shadow: '0 18px 32px rgba(212, 162, 76, 0.35)',
      summaryShadow: '0 14px 28px rgba(212, 162, 76, 0.25)',
      amounts: [
        { base: 75, label: 'Launch midweek meals' },
        { base: 150, label: 'Fuel regional outreach' },
        { base: 300, label: 'Underwrite community care' }
      ],
      icon: '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke="currentColor" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"><path d="M32 8v48"/><path d="M18 20h28"/></g></svg>',
      ctaGenerate: 'Generate secure checkout',
      ctaShare: 'Create a donation link',
      metrics: {
        followersLabel: 'Global adherents',
        actionsLabel: 'Tracked community projects',
        actionSectors: ['relief', 'food', 'youth', 'capital']
      }
    },
    {
      key: 'islam',
      title: 'Masjid & zakat partners',
      subtitle: 'Elevate Ramadan hampers, zakat distribution, and daily prayers.',
      detail: 'Balances zakat, sadaqah, and masjid operations in one sweep.',
      currency: 'AED',
      locale: 'en-AE',
      gradient: 'linear-gradient(135deg, rgba(91, 153, 136, 0.95), rgba(64, 126, 110, 0.95))',
      cardGradient: 'linear-gradient(145deg, rgba(91, 153, 136, 0.24), rgba(64, 126, 110, 0.2))',
      borderColor: 'rgba(91, 153, 136, 0.5)',
      summaryBorder: 'rgba(91, 153, 136, 0.45)',
      shadow: '0 18px 32px rgba(64, 126, 110, 0.32)',
      summaryShadow: '0 14px 28px rgba(64, 126, 110, 0.26)',
      amounts: [
        { base: 200, label: 'Stock Eid food parcels' },
        { base: 350, label: 'Sponsor zakat disbursement' },
        { base: 600, label: 'Fund masjid restoration' }
      ],
      icon: '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M40 8a20 20 0 1 0 0 48 22 22 0 1 1 0-48z" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="m46 32 10 4-10 4 6 9-10-4-2 11-2-11-10 4 6-9-10-4 10-4-6-9 10 4 2-11 2 11 10-4z" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>',
      ctaGenerate: 'Launch masjid checkout',
      ctaShare: 'Share zakat link',
      metrics: {
        followersLabel: 'Global adherents',
        actionsLabel: 'Relief & zakat actions tracked',
        actionSectors: ['ramadan_food', 'water', 'education', 'infrastructure']
      }
    },
    {
      key: 'jewish',
      title: 'Synagogues & federations',
      subtitle: 'Back Hebrew schools, security training, and cultural preservation.',
      detail: 'Allocates toward education, safety, and cultural life at once.',
      currency: 'ILS',
      locale: 'he-IL',
      gradient: 'linear-gradient(135deg, rgba(73, 131, 196, 0.95), rgba(36, 96, 172, 0.95))',
      cardGradient: 'linear-gradient(145deg, rgba(73, 131, 196, 0.24), rgba(36, 96, 172, 0.22))',
      borderColor: 'rgba(73, 131, 196, 0.5)',
      summaryBorder: 'rgba(73, 131, 196, 0.45)',
      shadow: '0 18px 32px rgba(36, 96, 172, 0.32)',
      summaryShadow: '0 14px 28px rgba(36, 96, 172, 0.26)',
      amounts: [
        { base: 180, label: 'Sponsor Hebrew school supplies' },
        { base: 360, label: 'Underwrite security detail' },
        { base: 720, label: 'Preserve cultural archives' }
      ],
      icon: '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="m32 6 10 18h-20l10-18zm0 52-10-18h20l-10 18zm-22-18 10-18 10 18H10zm44 0H34l10-18 10 18z" fill="none" stroke="currentColor" stroke-width="4" stroke-linejoin="round"/></svg>',
      ctaGenerate: 'Send synagogue checkout',
      ctaShare: 'Share federation link',
      metrics: {
        followersLabel: 'Global adherents',
        actionsLabel: 'Active communal projects',
        actionSectors: ['refugee', 'culture', 'energy', 'education']
      }
    },
    {
      key: 'hindu',
      title: 'Temple seva circles',
      subtitle: 'Keep aarti, prasadam kitchens, and youth satsangs thriving.',
      detail: 'Energizes seva teams, annadanam, and temple upkeep together.',
      currency: 'INR',
      locale: 'en-IN',
      gradient: 'linear-gradient(135deg, rgba(226, 153, 73, 0.95), rgba(199, 98, 35, 0.95))',
      cardGradient: 'linear-gradient(145deg, rgba(226, 153, 73, 0.26), rgba(199, 98, 35, 0.22))',
      borderColor: 'rgba(226, 153, 73, 0.55)',
      summaryBorder: 'rgba(226, 153, 73, 0.48)',
      shadow: '0 18px 32px rgba(199, 98, 35, 0.32)',
      summaryShadow: '0 14px 28px rgba(199, 98, 35, 0.28)',
      amounts: [
        { base: 3500, label: 'Prepare daily prasadam' },
        { base: 6500, label: 'Sponsor festival seva teams' },
        { base: 12000, label: 'Restore garbhagriha artistry' }
      ],
      icon: '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M20 24c0-6.627 5.373-12 12-12s12 5.373 12 12-5.373 12-12 12" fill="none" stroke="currentColor" stroke-width="4"/><path d="M32 36c-6 0-11 3.582-11 8s5 8 11 8 11-3.582 11-8" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"/><path d="M30 18c0-3.314 2.239-6 5-6 2.209 0 4 1.791 4 4 0 1.657-1.343 3-3 3" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M14 24h12M38 24h12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>',
      ctaGenerate: 'Launch temple checkout',
      ctaShare: 'Share seva link',
      metrics: {
        followersLabel: 'Global adherents',
        actionsLabel: 'Tracked seva initiatives',
        actionSectors: ['disaster', 'seva', 'health', 'education']
      }
    },
    {
      key: 'buddhist',
      title: 'Sangha retreats & relief',
      subtitle: 'Resource meditation halls, dana kitchens, and elder care.',
      detail: 'Streams dana across retreats, monastics, and community care.',
      currency: 'SGD',
      locale: 'en-SG',
      gradient: 'linear-gradient(135deg, rgba(122, 157, 146, 0.95), rgba(88, 136, 128, 0.95))',
      cardGradient: 'linear-gradient(145deg, rgba(122, 157, 146, 0.24), rgba(88, 136, 128, 0.22))',
      borderColor: 'rgba(122, 157, 146, 0.5)',
      summaryBorder: 'rgba(122, 157, 146, 0.45)',
      shadow: '0 18px 32px rgba(88, 136, 128, 0.32)',
      summaryShadow: '0 14px 28px rgba(88, 136, 128, 0.26)',
      amounts: [
        { base: 220, label: 'Sponsor dana meal service' },
        { base: 420, label: 'Support retreat scholarships' },
        { base: 880, label: 'Fund monastic healthcare' }
      ],
      icon: '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="8" fill="none" stroke="currentColor" stroke-width="4"/><g fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><path d="M32 8v10"/><path d="M32 46v10"/><path d="M8 32h10"/><path d="M46 32h10"/><path d="m14 14 7 7"/><path d="m43 43 7 7"/><path d="m14 50 7-7"/><path d="m43 21 7-7"/></g></svg>',
      ctaGenerate: 'Send sangha checkout',
      ctaShare: 'Share dana link',
      metrics: {
        followersLabel: 'Global adherents',
        actionsLabel: 'Meditation & relief efforts',
        actionSectors: ['retreats', 'environment', 'elder', 'kitchen']
      }
    }
  ];

  const FAITH_LEADER_DECK = [
    {
      "faith": "christianity",
      "label": "Christianity",
      "accent": "#d4a24c",
      "ticker": [
        {
          "label": "Global flock",
          "value": "2.3B adherents"
        },
        {
          "label": "Broadcast reach",
          "value": "600+ TV & radio outlets"
        },
        {
          "label": "Charity footprint",
          "value": "140+ nations active relief"
        }
      ],
      "summary": "Ecumenical networks coordinate worldwide sacraments, humanitarian corridors, and diplomatic envoys across Catholic, Orthodox, Anglican, and Charismatic movements.",
      "metrics": [
        {
          "title": "World communion",
          "value": "2.3B",
          "detail": "1.3B Catholics, 180M Orthodox, 110M Anglicans, major Protestant fellowships"
        },
        {
          "title": "Media footprint",
          "value": "600+ outlets",
          "detail": "Lakewood broadcasts, Vatican media, 20M+ combined social reach"
        },
        {
          "title": "Relief pipelines",
          "value": "Global Caritas",
          "detail": "Caritas, Anglican Relief & Development, megachurch aid corridors"
        }
      ],
      "pipelines": [
        "Laudato Si diplomacy linking Vatican envoys to COP and UN summits.",
        "Megachurch broadcast networks underwriting U.S. and Latin American disaster response.",
        "Anglican & Orthodox synods coordinating cease-fire dialogues and reconstruction funds."
      ],
      "leaders": [
        {
          "id": "pope_francis",
          "name": "Pope Francis",
          "title": "Supreme Pontiff, Roman Catholic Church",
          "story": "Argentine Jesuit pope championing social justice, migrants, and climate action.",
          "wiki": "Pope_Francis",
          "image": "religion/leaders/christianity/pop_francis.jpg",
          "metrics": [
            {
              "label": "Catholic faithful",
              "value": "1.3B",
              "detail": "Parishes across 240+ nations"
            },
            {
              "label": "Media presence",
              "value": "7M+ followers",
              "detail": "Pontifex accounts and Vatican media"
            },
            {
              "label": "Diplomatic cadence",
              "value": "Global summits",
              "detail": "UN, COP, interfaith councils"
            }
          ],
          "tags": [
            "Laudato Si",
            "Synodality",
            "Migrant advocacy"
          ],
          "operations": [
            "Issues encyclicals and synod updates guiding Catholic social teaching on ecology and equity.",
            "Deploys Caritas Internationalis for refugee corridors and frontline relief."
          ],
          "signals": [
            "Latest homilies amplify cease-fire appeals and humanitarian truces.",
            "Vatican updates highlight 2025 Jubilee and climate diplomacy tours."
          ],
          "links": [
            {
              "label": "Vatican News",
              "url": "https://www.vaticannews.va/en.html"
            },
            {
              "label": "X @Pontifex",
              "url": "https://twitter.com/Pontifex"
            }
          ]
        },
        {
          "id": "joel_osteen",
          "name": "Joel Osteen",
          "title": "Senior Pastor, Lakewood Church",
          "story": "Televangelist broadcasting weekly services from Houston to a global audience.",
          "wiki": "Joel_Osteen",
          "image": "religion/leaders/christianity/Joel_Osteen.png",
          "metrics": [
            {
              "label": "Weekly attendance",
              "value": "52K",
              "detail": "Largest U.S. megachurch"
            },
            {
              "label": "Broadcast reach",
              "value": "600+ outlets",
              "detail": "Television and radio syndication"
            },
            {
              "label": "Social reach",
              "value": "20M+",
              "detail": "Followers across major platforms"
            }
          ],
          "tags": [
            "Broadcast ministry",
            "Prosperity messaging",
            "Disaster relief"
          ],
          "operations": [
            "Streams sermons into 183 countries with simultaneous translation hubs.",
            "Mobilizes Lakewood relief drives for hurricanes and community care."
          ],
          "signals": [
            "Charity Navigator lists Lakewood Church (EIN 74-6066273) as an active 501(c)(3).",
            "Recent programming spotlights housing recovery and global prayer events."
          ],
          "links": [
            {
              "label": "Lakewood Church",
              "url": "https://www.lakewoodchurch.com/"
            },
            {
              "label": "Charity Navigator profile",
              "url": "https://www.charitynavigator.org/ein/746066273"
            }
          ]
        },
        {
          "id": "patriarch_kirill",
          "name": "Patriarch Kirill of Moscow",
          "title": "Patriarch, Russian Orthodox Church",
          "story": "Eastern Orthodoxy leader shaping church-state messaging and global synods.",
          "wiki": "Patriarch_Kirill_of_Moscow",
          "image": "religion/leaders/christianity/patriarch_Kirill_of_Moscow.png",
          "metrics": [
            {
              "label": "Orthodox faithful",
              "value": "180M",
              "detail": "Moscow Patriarchate claim"
            },
            {
              "label": "Global councils",
              "value": "Pan-Orthodox",
              "detail": "Delegations across Europe, Asia, Americas"
            },
            {
              "label": "Media coverage",
              "value": "High",
              "detail": "Statements tracked by international press"
            }
          ],
          "tags": [
            "Orthodox unity",
            "Geopolitics",
            "Council leadership"
          ],
          "operations": [
            "Chairs Holy Synod directives impacting dioceses throughout Russia and the diaspora.",
            "Coordinates Orthodox humanitarian agencies aligned with Moscow Patriarchate policy."
          ],
          "signals": [
            "Recent sermons emphasize national identity and wartime messaging.",
            "Ecumenical observers track his role in dialogues on Ukraine and global Orthodoxy."
          ],
          "links": [
            {
              "label": "Patriarchate News",
              "url": "https://mospat.ru/en/"
            },
            {
              "label": "OrthoChristian",
              "url": "https://orthochristian.com/"
            }
          ]
        },
        {
          "id": "justin_welby",
          "name": "Archbishop Justin Welby",
          "title": "Archbishop of Canterbury, Anglican Communion",
          "story": "Global Anglican figure engaging governments on peace, development, and reconciliation.",
          "wiki": "Justin_Welby",
          "image": "religion/leaders/christianity/archbishop_Justin_Welby.png",
          "metrics": [
            {
              "label": "Anglican faithful",
              "value": "85110M",
              "detail": "Worldwide Anglican Communion"
            },
            {
              "label": "Diplomatic missions",
              "value": "Frequent",
              "detail": "Peacemaking visits and Lambeth Palace convenings"
            },
            {
              "label": "Media cadence",
              "value": "Regular",
              "detail": "Interviews, synod addresses, House of Lords remarks"
            }
          ],
          "tags": [
            "Peacemaking",
            "Ecumenism",
            "Development"
          ],
          "operations": [
            "Leads Lambeth Palace task forces on conflict mediation and economic inclusion.",
            "Partners with Anglican Relief & Development Fund on climate and refugee corridors."
          ],
          "signals": [
            "Recent statements spotlight Gaza cease-fire advocacy and debt relief appeals.",
            "Anglican Communion updates highlight pilgrimages across Africa and the Pacific."
          ],
          "links": [
            {
              "label": "Lambeth Palace",
              "url": "https://www.archbishopofcanterbury.org/"
            },
            {
              "label": "Anglican Communion",
              "url": "https://www.anglicancommunion.org/"
            }
          ]
        },
        {
          "id": "joyce_meyer",
          "name": "Joyce Meyer",
          "title": "President, Joyce Meyer Ministries",
          "story": "Charismatic author and broadcaster mobilizing global humanitarian and teaching tours.",
          "wiki": "Joyce_Meyer",
          "image": "religion/leaders/christianity/joyce_Meyer.jpg",
          "metrics": [
            {
              "label": "Media footprint",
              "value": "600 TV / 400 radio",
              "detail": "Enjoying Everyday Life syndication"
            },
            {
              "label": "Books sold",
              "value": "40M+",
              "detail": "70+ titles across 100 languages"
            },
            {
              "label": "Relief hubs",
              "value": "Global",
              "detail": "Hand of Hope disaster & medical outreaches"
            }
          ],
          "tags": [
            "Womens ministry",
            "Humanitarian aid",
            "Media"
          ],
          "operations": [
            "Coordinates Hand of Hope teams delivering trauma counseling, clean water, and food relief.",
            "Hosts large-scale conferences empowering women leaders and faith-based entrepreneurs."
          ],
          "signals": [
            "Recent broadcasts focus on resilience, financial stewardship, and disaster recovery efforts.",
            "Foundation reports highlight medical missions and anti-trafficking partnerships."
          ],
          "links": [
            {
              "label": "Joyce Meyer Ministries",
              "url": "https://joycemeyer.org/"
            },
            {
              "label": "Enjoying Everyday Life",
              "url": "https://joycemeyer.org/broadcasthome"
            }
          ]
        }
      ]
    },
    {
      "faith": "islam",
      "label": "Islam",
      "accent": "#4e7c6b",
      "ticker": [
        {
          "label": "Population reach",
          "value": "1.9B Muslims"
        },
        {
          "label": "Scholarship hubs",
          "value": "Al-Azhar & Hawza"
        },
        {
          "label": "Relief engines",
          "value": "Zakat & waqf networks"
        }
      ],
      "summary": "Sunni and Shia authorities orchestrate jurisprudence, national policy, and humanitarian drives from Cairo to Tehran, blending scholarly tradition with modern media outreach.",
      "metrics": [
        {
          "title": "Population served",
          "value": "1.9B",
          "detail": "Iran, Egypt, Levant, Sub-Saharan and diaspora communities"
        },
        {
          "title": "Scholarly institutions",
          "value": "Al-Azhar & Hawza",
          "detail": "Authoritative fatwa councils and seminaries"
        },
        {
          "title": "Charitable flows",
          "value": "Zakat networks",
          "detail": "State and NGO relief programs across the Muslim world"
        }
      ],
      "pipelines": [
        "Supreme Leader directives steering Iranian governance, security, and relief priorities.",
        "Al-Azhar convenings partnering with the Vatican, UN, and Muslim Council of Elders on peace.",
        "Nation of Islam and global preachers mobilizing social justice and youth empowerment campaigns."
      ],
      "leaders": [
        {
          "id": "ali_khamenei",
          "name": "Ayatollah Ali Khamenei",
          "title": "Supreme Leader of Iran",
          "story": "Irans highest authority overseeing state policy, military doctrine, and religious institutions.",
          "wiki": "Ali_Khamenei",
          "image": "religion/leaders/islam/ayatollah_Ali_Khamene.png",
          "metrics": [
            {
              "label": "Shia population",
              "value": "85M Iranians",
              "detail": "Nearly 90% of Irans citizens"
            },
            {
              "label": "Regional influence",
              "value": "High",
              "detail": "Guides Iraq, Syria, and Lebanon policy"
            },
            {
              "label": "Media reach",
              "value": "Millions",
              "detail": "Official speeches, websites, and X"
            }
          ],
          "tags": [
            "Wilayat al-faqih",
            "Regional policy",
            "Clerical authority"
          ],
          "operations": [
            "Issues binding guidance on domestic governance, foreign policy, and security strategy.",
            "Oversees expansive religious endowments supporting education, relief, and media arms."
          ],
          "signals": [
            "Recent speeches address Gaza, sanctions resistance, and technological self-reliance.",
            "Office communiqus promote Islamic unity conferences and youth innovation centers."
          ],
          "links": [
            {
              "label": "Office of the Supreme Leader",
              "url": "https://www.leader.ir/en"
            },
            {
              "label": "X @Khamenei_ir",
              "url": "https://twitter.com/khamenei_ir"
            }
          ]
        },
        {
          "id": "ahmed_al_tayeb",
          "name": "Sheikh Ahmed al-Tayeb",
          "title": "Grand Imam of Al-Azhar",
          "story": "Foremost Sunni scholar guiding Al-Azhars global education, fatwas, and interfaith diplomacy.",
          "wiki": "Ahmed_el-Tayeb",
          "image": "religion/leaders/islam/sheikh Ahmed al-Tayeb.jpg",
          "metrics": [
            {
              "label": "Al-Azhar students",
              "value": "Millions",
              "detail": "Campuses and affiliates worldwide"
            },
            {
              "label": "Interfaith summits",
              "value": "Frequent",
              "detail": "UN, Vatican, Human Fraternity agenda"
            },
            {
              "label": "Fatwa output",
              "value": "Daily",
              "detail": "Dar al-Ifta guidance and media responses"
            }
          ],
          "tags": [
            "Al-Azhar",
            "Interfaith dialogue",
            "Sunni jurisprudence"
          ],
          "operations": [
            "Leads Al-Azhar councils updating curricula, accreditation, and moderate jurisprudence.",
            "Co-authored the Document on Human Fraternity championing pluralism and coexistence."
          ],
          "signals": [
            "Recent visits include Abu Dhabis Abrahamic Family House and UN youth peace forums.",
            "Statements tackle AI ethics, extremism prevention, and refugee integration."
          ],
          "links": [
            {
              "label": "Al-Azhar",
              "url": "https://www.alazhar.eg/"
            },
            {
              "label": "Muslim Council of Elders",
              "url": "https://muslim-elders.com/en"
            }
          ]
        },
        {
          "id": "ali_al_sistani",
          "name": "Grand Ayatollah Ali al-Sistani",
          "title": "Marja of Najaf",
          "story": "Iraqs senior Shia cleric whose guidance shapes politics, security, and social welfare.",
          "wiki": "Ali_al-Sistani",
          "image": "religion/leaders/islam/grand Ayatollah Ali al-Sistani.jpg",
          "metrics": [
            {
              "label": "Iraqi Shia followers",
              "value": "Millions",
              "detail": "Najaf marjaiyya network"
            },
            {
              "label": "Political influence",
              "value": "Decisive",
              "detail": "Fatwas steer elections and reforms"
            },
            {
              "label": "Relief directives",
              "value": "Nationwide",
              "detail": "Funds hospitals, IDPs, and scholarships"
            }
          ],
          "tags": [
            "Marjaiyya",
            "National reconciliation",
            "Humanitarian aid"
          ],
          "operations": [
            "Issues guidance stabilizing Iraqi institutions, security forces, and constitutional order.",
            "Channels religious taxes into clinics, education trusts, and crisis response centers."
          ],
          "signals": [
            "Recent messages call for calm amid protests and demand anti-corruption reforms.",
            "Meetings with UNAMI stress sovereignty, minority protection, and service delivery."
          ],
          "links": [
            {
              "label": "Office of al-Sistani",
              "url": "https://www.sistani.org/english/"
            }
          ]
        },
        {
          "id": "ismail_menk",
          "name": "Mufti Ismail Menk",
          "title": "Scholar & motivational speaker",
          "story": "Zimbabwe-born Sunni scholar delivering viral lectures and pastoral guidance worldwide.",
          "wiki": "Ismail_ibn_Musa_Menk",
          "image": "religion/leaders/islam/mufti_Ismail_Menk.jpg",
          "metrics": [
            {
              "label": "Online followers",
              "value": "Millions",
              "detail": "YouTube, Instagram, X audiences"
            },
            {
              "label": "Lecture tours",
              "value": "Global",
              "detail": "Annual circuits across six continents"
            },
            {
              "label": "Charity drives",
              "value": "Frequent",
              "detail": "Partners with Muslim Aid and One Ummah"
            }
          ],
          "tags": [
            "Digital dawah",
            "Motivational talks",
            "Charity partnerships"
          ],
          "operations": [
            "Produces daily reminders and long-form lectures with multilingual subtitles.",
            "Champions zakat and sadaqah fundraising for health care, wells, and orphan care."
          ],
          "signals": [
            "Recent series covers Ramadan preparation, mental wellbeing, and youth resilience.",
            "Collaborates with Islamic Relief and local councils on disaster appeals."
          ],
          "links": [
            {
              "label": "MuftiMenk.com",
              "url": "https://muftimenk.com/"
            },
            {
              "label": "YouTube",
              "url": "https://www.youtube.com/user/MuftiMenkOfficial"
            }
          ]
        },
        {
          "id": "louis_farrakhan",
          "name": "Louis Farrakhan",
          "title": "Leader, Nation of Islam",
          "story": "U.S. Black Muslim leader with significant cultural influence and controversy.",
          "wiki": "Louis_Farrakhan",
          "image": "religion/leaders/islam/louis_Farrakhan.jpg",
          "metrics": [
            {
              "label": "Nation of Islam",
              "value": "Tens of thousands",
              "detail": "U.S. mosques and study groups"
            },
            {
              "label": "Mass events",
              "value": "Saviours Day",
              "detail": "Annual conventions with national draw"
            },
            {
              "label": "Media attention",
              "value": "High",
              "detail": "Extensive coverage and debate"
            }
          ],
          "tags": [
            "Nation of Islam",
            "Civil rights",
            "Controversy"
          ],
          "operations": [
            "Organizes large conventions, economic initiatives, and neighborhood redevelopment projects.",
            "Delivers lengthy addresses on racial justice, geopolitics, and NOI theology broadcast via Final Call."
          ],
          "signals": [
            "Recent speeches emphasize economic independence and 2024 U.S. political strategy.",
            "NOI media highlights farming cooperatives, youth academies, and conflict responses."
          ],
          "links": [
            {
              "label": "Nation of Islam",
              "url": "https://www.noi.org/"
            },
            {
              "label": "Final Call",
              "url": "https://www.finalcall.com/"
            }
          ]
        }
      ]
    },
    {
      "faith": "judaism",
      "label": "Judaism",
      "accent": "#4a6fa5",
      "ticker": [
        {
          "label": "Chief Rabbinate",
          "value": "6M Israelis served"
        },
        {
          "label": "Reform network",
          "value": "2M North American members"
        },
        {
          "label": "Digital services",
          "value": "Global livestream worship"
        }
      ],
      "summary": "Chief rabbis, Reform presidents, and innovative U.S. congregations balance halakhic courts, social justice, and interfaith outreach across Israel and the diaspora.",
      "metrics": [
        {
          "title": "Global population",
          "value": "15M",
          "detail": "6M in Israel, 7M+ across diaspora communities"
        },
        {
          "title": "Institutional reach",
          "value": "Chief Rabbinate & URJ",
          "detail": "Halakhic courts, 2M Reform Jews, 7K+ congregations"
        },
        {
          "title": "Community programming",
          "value": "Hybrid services",
          "detail": "Livestream worship, social action cohorts, youth engagement"
        }
      ],
      "pipelines": [
        "Chief Rabbinate courts oversee marriage, kashrut, and conversion policy nationwide.",
        "URJ congregations mobilize social justice, democracy, and climate campaigns across North America.",
        "Progressive synagogues like IKAR and Central Synagogue pioneer digital-first ritual and civic coalitions."
      ],
      "leaders": [
        {
          "id": "angela_buchdahl",
          "name": "Rabbi Angela Buchdahl",
          "title": "Senior Rabbi, Central Synagogue",
          "story": "Prominent Reform rabbi blending music, tradition, and civic advocacy in New York City.",
          "wiki": "Angela_Warnick_Buchdahl",
          "image": "religion/leaders/judaism/rabbi Angela Buchdahl.jpg",
          "metrics": [
            {
              "label": "Congregants",
              "value": "7,000",
              "detail": "Central Synagogue members"
            },
            {
              "label": "Livestream viewers",
              "value": "Millions",
              "detail": "Weekly services & High Holy Days"
            },
            {
              "label": "Interfaith forums",
              "value": "Frequent",
              "detail": "Civic coalitions and national platforms"
            }
          ],
          "tags": [
            "Reform leadership",
            "Interfaith",
            "Music & prayer"
          ],
          "operations": [
            "Leads hybrid worship, choirs, and social impact grants serving New York and global viewers.",
            "Speaks nationwide on inclusion, Asian Jewish identity, and civic solidarity."
          ],
          "signals": [
            "Recent sermons address antisemitism, democracy, and community resilience.",
            "Central Synagogue podcasts spotlight local service partners and interfaith allies."
          ],
          "links": [
            {
              "label": "Central Synagogue",
              "url": "https://www.centralsynagogue.org/"
            },
            {
              "label": "Sermons & Music",
              "url": "https://www.centralsynagogue.org/worship/sermons-music"
            }
          ]
        },
        {
          "id": "david_yosef",
          "name": "Rabbi David Yosef",
          "title": "Sephardi Chief Rabbi of Israel",
          "story": "Halakhic authority overseeing Sephardi rabbinical courts, kashrut, and Torah education.",
          "wiki": "David_Yosef",
          "image": "religion/leaders/judaism/rabbi David Yosef.jpg",
          "metrics": [
            {
              "label": "Rabbinical courts",
              "value": "Nationwide",
              "detail": "Marriage, conversion, kashrut oversight"
            },
            {
              "label": "Torah lectures",
              "value": "Weekly",
              "detail": "Kol Halacha broadcasts and shiurim"
            },
            {
              "label": "Halakhic rulings",
              "value": "Influential",
              "detail": "Guides Sephardi practice worldwide"
            }
          ],
          "tags": [
            "Sephardi halakha",
            "Chief Rabbinate",
            "Scholarship"
          ],
          "operations": [
            "Chairs Supreme Rabbinical Council shaping national religious services and certification.",
            "Publishes Halacha Brurah volumes and hosts daily teachings for global communities."
          ],
          "signals": [
            "Recent rulings cover Passover kashrut guidance and conversion standards.",
            "Meets Israeli ministers on cost-of-living, religious services, and social cohesion."
          ],
          "links": [
            {
              "label": "Chief Rabbinate",
              "url": "https://www.gov.il/en/departments/chiefrabbinate"
            },
            {
              "label": "Kol Halacha",
              "url": "https://www.kolhalacha.org/"
            }
          ]
        },
        {
          "id": "kalman_meir_bar",
          "name": "Rabbi Kalman Meir Bar",
          "title": "Ashkenazi Chief Rabbi of Israel",
          "story": "Ashkenazi chief rabbi guiding halakhic policy, security briefings, and diaspora ties.",
          "wiki": "Kalman_Meir_Bar",
          "image": "religion/leaders/judaism/rabbi Kalman Meir Ber.jpg",
          "metrics": [
            {
              "label": "Synagogue network",
              "value": "Largest",
              "detail": "Hundreds of Ashkenazi communities"
            },
            {
              "label": "Public briefings",
              "value": "Frequent",
              "detail": "National religious debates"
            },
            {
              "label": "Kashrut oversight",
              "value": "Nationwide",
              "detail": "Certification and standards"
            }
          ],
          "tags": [
            "Chief Rabbinate",
            "Halakhic policy",
            "Community engagement"
          ],
          "operations": [
            "Oversees rabbinical appointments, kashrut certification, and religious council coordination.",
            "Advocates on security, conversion reform, and diaspora relations with Israeli leadership."
          ],
          "signals": [
            "Recent addresses cover wartime pastoral care and unity appeals.",
            "Chief Rabbinate circulars outline kosher certification digitization and training."
          ],
          "links": [
            {
              "label": "Religious Services Ministry",
              "url": "https://www.gov.il/en/departments/ministry_of_religious_services"
            }
          ]
        },
        {
          "id": "rick_jacobs",
          "name": "Rabbi Rick Jacobs",
          "title": "President, Union for Reform Judaism",
          "story": "Leads the largest Jewish denomination in North America with a focus on social justice and movement strategy.",
          "wiki": "Rick_Jacobs_(rabbi)",
          "image": "religion/leaders/judaism/rabbi Rick Jacobs.jpg",
          "metrics": [
            {
              "label": "Reform Jews",
              "value": "2M",
              "detail": "URJ-affiliated congregants"
            },
            {
              "label": "Congregations",
              "value": "800+",
              "detail": "North American synagogues"
            },
            {
              "label": "Advocacy campaigns",
              "value": "Nationwide",
              "detail": "Racial justice, democracy, climate"
            }
          ],
          "tags": [
            "URJ",
            "Social justice",
            "North America"
          ],
          "operations": [
            "Guides URJ strategy on racial justice, youth engagement, and Israel-Diaspora relations.",
            "Hosts Biennial gatherings and Religious Action Center initiatives for policy change."
          ],
          "signals": [
            "Recent statements urge safeguarding democracy in the U.S. and Israel.",
            "URJ launches youth voter outreach and congregational climate partnerships."
          ],
          "links": [
            {
              "label": "URJ",
              "url": "https://urj.org/"
            },
            {
              "label": "Religious Action Center",
              "url": "https://rac.org/"
            }
          ]
        },
        {
          "id": "sharon_brous",
          "name": "Rabbi Sharon Brous",
          "title": "Founding Rabbi, IKAR",
          "story": "Progressive Jewish leader fusing ritual innovation with social change in Los Angeles.",
          "wiki": "Sharon_Brous",
          "image": "religion/leaders/judaism/rabbi Sharon Brous.png",
          "metrics": [
            {
              "label": "IKAR network",
              "value": "Growing",
              "detail": "LA membership and national partners"
            },
            {
              "label": "National platform",
              "value": "High",
              "detail": "Top-ranked influential rabbi"
            },
            {
              "label": "Civic campaigns",
              "value": "Ongoing",
              "detail": "Housing justice, racial equity"
            }
          ],
          "tags": [
            "IKAR",
            "Civic activism",
            "Progressive Judaism"
          ],
          "operations": [
            "Designs immersive services blending liturgy, art, and activism for multifaith coalitions.",
            "Speaks at national gatherings on democracy, belonging, and shared society."
          ],
          "signals": [
            "Recent sermons address Israeli democracy protests and coalition building.",
            "IKAR newsletters highlight refugee sponsorships and mutual aid pods."
          ],
          "links": [
            {
              "label": "IKAR",
              "url": "https://www.ikar-la.org/"
            },
            {
              "label": "TED Talk",
              "url": "https://www.ted.com/talks/rabbi_sharon_brous"
            }
          ]
        }
      ]
    },
    {
      "faith": "hinduism",
      "label": "Hinduism",
      "accent": "#c9772d",
      "ticker": [
        {
          "label": "Yoga programs",
          "value": "11M+ digital followers"
        },
        {
          "label": "Volunteer corps",
          "value": "4M RSS swayamsevaks"
        },
        {
          "label": "Humanitarian drives",
          "value": "Rally for Rivers & Amma relief"
        }
      ],
      "summary": "Hindu teachers steward expansive yoga schools, volunteer corps, and nationalist movements powering wellness, ecology, and policy influence across India and the diaspora.",
      "metrics": [
        {
          "title": "Global students",
          "value": "800M+ touched",
          "detail": "Art of Living claims since 1981"
        },
        {
          "title": "Digital subscribers",
          "value": "11M+",
          "detail": "Sadhguru YouTube community"
        },
        {
          "title": "Volunteer capacity",
          "value": "4M",
          "detail": "RSS swayamsevaks and seva brigades"
        }
      ],
      "pipelines": [
        "Isha Foundation campaigns like Rally for Rivers and Save Soil restore ecology.",
        "Art of Living peace delegations deliver trauma relief, breathwork, and conflict mediation worldwide.",
        "RSS and Patanjali networks coordinate education, health camps, and political mobilization."
      ],
      "leaders": [
        {
          "id": "sadhguru",
          "name": "Sadhguru (Jaggi Vasudev)",
          "title": "Founder, Isha Foundation",
          "story": "Yogi and author leading Inner Engineering programs and global ecological campaigns.",
          "wiki": "Sadhguru",
          "image": "religion/leaders/hinduism/sadhguru Jaggi Vasudev.png",
          "metrics": [
            {
              "label": "YouTube audience",
              "value": "11M+",
              "detail": "Daily yoga & wisdom videos"
            },
            {
              "label": "Global centers",
              "value": "300+",
              "detail": "Isha Foundation hubs"
            },
            {
              "label": "Environmental drives",
              "value": "Massive",
              "detail": "Rally for Rivers, Save Soil"
            }
          ],
          "tags": [
            "Isha Foundation",
            "Save Soil",
            "UN speaker"
          ],
          "operations": [
            "Hosts forums at the UN, WEF, and universities on ecology, youth, and mental resilience.",
            "Runs tree planting, agroforestry, and rural education programs through Isha outreach."
          ],
          "signals": [
            "Latest campaigns push Save Soil policy adoption and farmer outreach.",
            "Podcasts highlight youth leadership, science partnerships, and Conscious Planet updates."
          ],
          "links": [
            {
              "label": "Isha Foundation",
              "url": "https://isha.sadhguru.org/"
            },
            {
              "label": "Conscious Planet",
              "url": "https://consciousplanet.org/"
            }
          ]
        },
        {
          "id": "ravi_shankar",
          "name": "Sri Sri Ravi Shankar",
          "title": "Founder, Art of Living",
          "story": "Spiritual teacher running breathwork, mediation, and humanitarian programs in 180 countries.",
          "wiki": "Ravi_Shankar_(spiritual_leader)",
          "image": "religion/leaders/hinduism/sri Sri Ravi Shankar.jpg",
          "metrics": [
            {
              "label": "Global programs",
              "value": "180 countries",
              "detail": "Art of Living instructors"
            },
            {
              "label": "Claimed impact",
              "value": "800M+",
              "detail": "Participants in stress-relief courses"
            },
            {
              "label": "Social followers",
              "value": "20M+",
              "detail": "Across major networks"
            }
          ],
          "tags": [
            "Art of Living",
            "Peace mediation",
            "Breathwork"
          ],
          "operations": [
            "Facilitates trauma relief, prison programs, and conflict mediation from Colombia to Kashmir.",
            "Organizes mega-events such as the World Culture Festival drawing millions of attendees."
          ],
          "signals": [
            "Recent tours include European peace concerts and youth mental health summits.",
            "UNDP partnerships with Art of Living advance climate resilience training."
          ],
          "links": [
            {
              "label": "Art of Living",
              "url": "https://www.artofliving.org/"
            },
            {
              "label": "Gurudev social",
              "url": "https://www.facebook.com/SriSriRaviShankar"
            }
          ]
        },
        {
          "id": "amma",
          "name": "Mata Amritanandamayi (Amma)",
          "title": "Founder, Embracing the World",
          "story": "Hugging saint providing darshan, humanitarian relief, and global education projects.",
          "wiki": "Mata_Amritanandamayi",
          "image": "religion/leaders/hinduism/mata Amritanandamayi Amma.jpg",
          "metrics": [
            {
              "label": "People embraced",
              "value": "33M+",
              "detail": "Worldwide darshan tours"
            },
            {
              "label": "Humanitarian spend",
              "value": "Billions INR",
              "detail": "Hospitals, housing, scholarships"
            },
            {
              "label": "Ashram network",
              "value": "Global",
              "detail": "Amritapuri and international centers"
            }
          ],
          "tags": [
            "Amma",
            "Humanitarian aid",
            "Compassion"
          ],
          "operations": [
            "Runs hospitals, universities, orphanages, and disaster relief through Embracing the World.",
            "Leads hugging darshan tours raising funds for global relief and spiritual instruction."
          ],
          "signals": [
            "ReliefWeb briefs cite Ammas teams aiding floods, earthquakes, and refugee support.",
            "Amrita Vishwa Vidyapeetham launches clean water and robotics initiatives."
          ],
          "links": [
            {
              "label": "Embracing the World",
              "url": "https://www.embracingtheworld.org/"
            },
            {
              "label": "Amritapuri",
              "url": "https://www.amritapuri.org/"
            }
          ]
        },
        {
          "id": "baba_ramdev",
          "name": "Baba Ramdev",
          "title": "Co-founder, Patanjali Ayurved",
          "story": "Yoga entrepreneur and activist influencing wellness markets and nationalist politics.",
          "wiki": "Baba_Ramdev",
          "image": "religion/leaders/hinduism/baba Ramdev.jpg",
          "metrics": [
            {
              "label": "Patanjali revenue",
              "value": "10,664 crore",
              "detail": "FY2022 turnover"
            },
            {
              "label": "Yoga broadcasts",
              "value": "Daily",
              "detail": "Millions of viewers"
            },
            {
              "label": "Political mobilization",
              "value": "High",
              "detail": "Anti-corruption & nationalist rallies"
            }
          ],
          "tags": [
            "Patanjali",
            "Yoga televangelist",
            "Activism"
          ],
          "operations": [
            "Hosts national yoga camps and daily television sessions promoting Ayurveda and fitness.",
            "Expands Patanjali FMCG, pharmaceuticals, and farmer cooperatives across India."
          ],
          "signals": [
            "Recent addresses push indigenous medicine, election reforms, and fitness missions.",
            "Patanjali announces new wellness centers and rural supply-chain investments."
          ],
          "links": [
            {
              "label": "Patanjali Ayurved",
              "url": "https://www.patanjaliayurved.net/"
            },
            {
              "label": "Yoga channel",
              "url": "https://www.youtube.com/c/SwamiRamdevOfficial"
            }
          ]
        },
        {
          "id": "mohan_bhagwat",
          "name": "Mohan Bhagwat",
          "title": "Sarsanghchalak, RSS",
          "story": "Leader of Indias largest Hindu nationalist volunteer organization shaping social policy.",
          "wiki": "Mohan_Bhagwat",
          "image": "religion/leaders/hinduism/mohan Bhagwat.png",
          "metrics": [
            {
              "label": "RSS volunteers",
              "value": "4M",
              "detail": "Swayamsevak network"
            },
            {
              "label": "Public addresses",
              "value": "Frequent",
              "detail": "Nationwide tours and Vijayadashami speech"
            },
            {
              "label": "Policy influence",
              "value": "Significant",
              "detail": "Guides BJP-aligned social agenda"
            }
          ],
          "tags": [
            "RSS",
            "Nation-building",
            "Volunteerism"
          ],
          "operations": [
            "Guides daily shakhas, service projects, and ideological training for RSS cadres.",
            "Engages government leaders on education, social harmony, and national security."
          ],
          "signals": [
            "Latest speeches stress social cohesion, indigenous knowledge, and economic self-reliance.",
            "RSS relief teams deploy for floods, pandemics, and rural development."
          ],
          "links": [
            {
              "label": "RSS",
              "url": "https://www.rss.org/"
            },
            {
              "label": "Organiser Weekly",
              "url": "https://organiser.org/"
            }
          ]
        }
      ]
    },
    {
      "faith": "buddhism",
      "label": "Buddhism",
      "accent": "#6f86c3",
      "ticker": [
        {
          "label": "Tibetan leadership",
          "value": "Global compassion tours"
        },
        {
          "label": "Thai Sangha",
          "value": "65M Buddhists"
        },
        {
          "label": "Lay movements",
          "value": "11M SGI members"
        }
      ],
      "summary": "Tibetan lamas, Thai patriarchs, and lay Buddhist movements pair contemplative training with peace advocacy, humanitarian relief, and education across continents.",
      "metrics": [
        {
          "title": "Followers engaged",
          "value": "Hundreds of millions",
          "detail": "Tibetan, Theravada, and Nichiren communities"
        },
        {
          "title": "Education hubs",
          "value": "Retreat centers",
          "detail": "Monasteries and dharma centers worldwide"
        },
        {
          "title": "Peace advocacy",
          "value": "Global",
          "detail": "Nobel laureate diplomacy and SGI dialogues"
        }
      ],
      "pipelines": [
        "Dalai Lama and Tibetan leaders conduct compassion tours and human-rights advocacy worldwide.",
        "Karmapa and Panchen Lama oversee monastic education, environmental programs, and digital archives.",
        "Thai Sangha and Soka Gakkai run schools, disaster relief, and youth peace initiatives."
      ],
      "leaders": [
        {
          "id": "dalai_lama",
          "name": "Dalai Lama (14th)",
          "title": "Spiritual leader of Tibetan Buddhism",
          "story": "Nobel Peace laureate advocating compassion, nonviolence, and Tibetan autonomy.",
          "wiki": "14th_Dalai_Lama",
          "image": "religion/leaders/buddhism/dalai Lama 14th.jpg",
          "metrics": [
            {
              "label": "Global followers",
              "value": "Millions",
              "detail": "Tibetan and worldwide devotees"
            },
            {
              "label": "International visits",
              "value": "Frequent",
              "detail": "Engagements with world leaders"
            },
            {
              "label": "Digital reach",
              "value": "Massive",
              "detail": "Livestreamed teachings & social media"
            }
          ],
          "tags": [
            "Tibetan Buddhism",
            "Peace prize",
            "Compassion"
          ],
          "operations": [
            "Delivers teachings on secular ethics, compassion, and Tibetan autonomy to global audiences.",
            "Supports Tibetan exile education, health, and refugee services from Dharamsala."
          ],
          "signals": [
            "Recent dialogues explore neuroscience of compassion and youth leadership.",
            "Upcoming schedule includes European teachings and interfaith panels."
          ],
          "links": [
            {
              "label": "Dalai Lama",
              "url": "https://www.dalailama.com/"
            },
            {
              "label": "Office of Tibet",
              "url": "https://tibet.net/"
            }
          ]
        },
        {
          "id": "ogyen_trinley_dorje",
          "name": "Ogyen Trinley Dorje",
          "title": "17th Karmapa",
          "story": "Head of the Karma Kagyu school teaching across Asia, Europe, and the Americas.",
          "wiki": "Ogyen_Trinley_Dorje",
          "image": "religion/leaders/buddhism/ogyen Trinley Dorje 17th Karmapa.jpg",
          "metrics": [
            {
              "label": "Kagyu centers",
              "value": "Global",
              "detail": "Hundreds of affiliated monasteries"
            },
            {
              "label": "Teaching tours",
              "value": "Regular",
              "detail": "Asia, Europe, North America"
            },
            {
              "label": "Environmental programs",
              "value": "Active",
              "detail": "Khoryug & youth eco-initiatives"
            }
          ],
          "tags": [
            "17th Karmapa",
            "Digital dharma",
            "Environment"
          ],
          "operations": [
            "Leads Kagyu Monlam, digitizes manuscripts, and mentors monastics on environmental stewardship.",
            "Hosts virtual teachings connecting diaspora communities with Himalayan monasteries."
          ],
          "signals": [
            "Recent webcasts emphasize monastic education reform and compassionate activism.",
            "Khoryug network expands glacier and river protection projects."
          ],
          "links": [
            {
              "label": "Kagyu Office",
              "url": "https://www.kagyuoffice.org/"
            },
            {
              "label": "Karmapa YouTube",
              "url": "https://www.youtube.com/c/karmapafoundation"
            }
          ]
        },
        {
          "id": "gyaltsen_norbu",
          "name": "Gyaltsen Norbu (11th Panchen Lama)",
          "title": "State-recognized Panchen Lama",
          "story": "Chinese-recognized Panchen Lama overseeing Buddhist education in Tibetan regions.",
          "wiki": "Gyaincain_Norbu",
          "image": "religion/leaders/buddhism/gyaltsen Norbu 11th Panchen Lama.jpg",
          "metrics": [
            {
              "label": "Monastic oversight",
              "value": "Tibet & China",
              "detail": "State-sanctioned monasteries"
            },
            {
              "label": "Education programs",
              "value": "Expanding",
              "detail": "Buddhist academies in Tibet and Beijing"
            },
            {
              "label": "Official events",
              "value": "Regular",
              "detail": "Forums, ordinations, and state ceremonies"
            }
          ],
          "tags": [
            "Panchen Lama",
            "Chinese administration",
            "Education"
          ],
          "operations": [
            "Leads Buddhist councils and ordination ceremonies within Chinese-governed monasteries.",
            "Supports cultural preservation projects aligned with state development plans."
          ],
          "signals": [
            "Recent appearances include Beijing Buddhist forums and Tibet development conferences.",
            "Chinese media highlight his emphasis on patriotism and religious harmony."
          ],
          "links": [
            {
              "label": "Xinhua coverage",
              "url": "https://english.news.cn/"
            },
            {
              "label": "China Buddhism",
              "url": "http://www.chinabuddhism.com.cn/en/"
            }
          ]
        },
        {
          "id": "thai_patriarch",
          "name": "Somdet Phra Ariyavongsagatanana IX",
          "title": "Supreme Patriarch of Thailand",
          "story": "Head of the Thai Buddhist monastic order advising government and royal ceremonies.",
          "wiki": "Somdet_Phra_Ariyavongsagatanana_(Amborn_Ambaro)",
          "image": "religion/leaders/buddhism/supreme Patriarch of Thailand Somdet Phra Ariyavongsagatanana IX.jpg",
          "metrics": [
            {
              "label": "Thai Buddhists",
              "value": "65M",
              "detail": "National sangha under his guidance"
            },
            {
              "label": "State ceremonies",
              "value": "Key role",
              "detail": "Royal and national rites"
            },
            {
              "label": "Monastic reforms",
              "value": "Active",
              "detail": "Education and disciplinary oversight"
            }
          ],
          "tags": [
            "Thai Sangha",
            "Monastic governance",
            "Royal council"
          ],
          "operations": [
            "Chairs Supreme Sangha Council overseeing 40K+ temples and monastic education.",
            "Advises Thai government on ethics, disaster relief, and youth development."
          ],
          "signals": [
            "Recent directives emphasize digital monk training and anti-corruption standards.",
            "Coordinates Buddhist relief for floods and pandemic recovery efforts."
          ],
          "links": [
            {
              "label": "Thai Sangha News",
              "url": "https://www.onab.go.th/"
            },
            {
              "label": "Bangkok Post religion",
              "url": "https://www.bangkokpost.com/life/social-and-lifestyle"
            }
          ]
        },
        {
          "id": "daisaku_ikeda",
          "name": "Daisaku Ikeda",
          "title": "President Emeritus, Soka Gakkai International",
          "story": "Lay Buddhist philosopher and peace activist guiding SGIs 11M members worldwide.",
          "wiki": "Daisaku_Ikeda",
          "image": "religion/leaders/buddhism/daisaku Ikeda.jpg",
          "metrics": [
            {
              "label": "SGI members",
              "value": "11M+",
              "detail": "192 countries and territories"
            },
            {
              "label": "Peace proposals",
              "value": "Annual",
              "detail": "Submissions to the United Nations"
            },
            {
              "label": "Institutions",
              "value": "Global",
              "detail": "Schools, museums, culture centers"
            }
          ],
          "tags": [
            "SGI",
            "Peace activism",
            "Education"
          ],
          "operations": [
            "Authored yearly peace proposals advancing nuclear abolition and human dignity.",
            "Guided SGI humanitarian relief, education initiatives, and interfaith dialogues worldwide."
          ],
          "signals": [
            "Recent SGI statements emphasize nuclear disarmament and youth empowerment.",
            "Ikeda Center releases dialogues on value creation and global citizenship."
          ],
          "links": [
            {
              "label": "Soka Gakkai International",
              "url": "https://www.sgi.org/"
            },
            {
              "label": "Ikeda Center",
              "url": "https://www.ikedacenter.org/"
            }
          ]
        }
      ]
    }
  ];

  const FAITH_LEADER_MAP = new Map(FAITH_LEADER_DECK.map(entry => [entry.faith, entry]));
  const WIKIPEDIA_SUMMARY_ENDPOINT = 'https://en.wikipedia.org/api/rest_v1/page/summary/';
  const WIKIPEDIA_RELATED_ENDPOINT = 'https://en.wikipedia.org/api/rest_v1/page/related/';
  const leaderSummaryCache = new Map();
  const leaderSignalsCache = new Map();
  let leaderTabButtons = [];
  let leaderCardEntries = [];
  let currentLeaderConfig = null;


  const state = {
    orgs: [],
    campaignsByOrg: new Map(),
    campaignFetchAttempts: new Set(),
    communityCampaigns: [],
    slideIndex: 0,
    autoTimer: null,
    slideImages: new Map(),
    lastSlideImage: new Map(),
    hasRenderedInitialSlide: false,
    isTransitioning: false,
    preloadedSlideId: null,
    metricsByFaith: new Map(),
    metricsUpdatedAt: null,
    narrationBySlide: new Map(),
    narrationLoading: false,
    narrationRequestId: 0,
    currentNarrationSlideId: null,
    activeNarrationAudio: null,
    activeNarrationObjectUrl: null,
    narrationVariantFallback: 'faith_narrator',
    narrationContinuous: false,
    narrationCooldownUntil: 0,
    pendingNarrationSlideId: null,
    leaderFaith: null,
    leaderIndex: 0,
    activeLeaderId: null,
    language: DEFAULT_LANGUAGE
  };

  const QUICK_FAITH_MAP = new Map(QUICK_FAITHS.map((faith) => [faith.key, faith]));

  const STRIPE_MAX_AMOUNT = 999999999999;

  function getFaithLeaderConfig(faith) {
    if (!faith) return null;
    return FAITH_LEADER_MAP.get(faith) || null;
  }

  function setLeadersAccent(color) {
    const section = els.leadersLab;
    if (!section) return;
    if (color) {
      section.style.setProperty('--leaders-accent', color);
      const soft = hexToRgba(color, 0.18) || 'rgba(212, 162, 76, 0.14)';
      section.style.setProperty('--leaders-accent-soft', soft);
    } else {
      section.style.removeProperty('--leaders-accent');
      section.style.removeProperty('--leaders-accent-soft');
    }
  }

  function clearChildren(node) {
    if (!node) return;
    while (node.firstChild) {
      node.removeChild(node.firstChild);
    }
  }

  function renderLeadersTicker(config) {
    const container = els.leadersTicker;
    if (!container) return;
    clearChildren(container);
    const items = Array.isArray(config?.ticker) ? config.ticker : [];
    if (!items.length) {
      container.hidden = true;
      return;
    }
    container.hidden = false;
    items.forEach(item => {
      if (!item) return;
      const chip = document.createElement('span');
      chip.className = 'leaders-ticker-chip';
      const label = document.createElement('span');
      label.textContent = item.label || '';
      const value = document.createElement('strong');
      value.textContent = item.value || '';
      chip.append(label, value);
      container.appendChild(chip);
    });
  }

  function renderLeadersSummary(config) {
    if (els.leadersSummary) {
      els.leadersSummary.textContent = config?.summary || '';
    }
    if (els.leadersMetrics) {
      clearChildren(els.leadersMetrics);
      const metrics = Array.isArray(config?.metrics) ? config.metrics : [];
      if (!metrics.length) {
        const card = document.createElement('div');
        card.className = 'leader-metric';
        const heading = document.createElement('strong');
        heading.textContent = 'Awaiting metrics';
        const caption = document.createElement('span');
        caption.textContent = 'Add more data to unlock insights.';
        card.append(heading, caption);
        els.leadersMetrics.appendChild(card);
      } else {
        metrics.forEach(metric => {
          if (!metric) return;
          const card = document.createElement('div');
          card.className = 'leader-metric';
          const heading = document.createElement('strong');
          heading.textContent = metric.value || '';
          const caption = document.createElement('span');
          caption.textContent = metric.title || '';
          if (metric.detail) {
            const detail = document.createElement('span');
            detail.textContent = metric.detail;
            caption.appendChild(document.createElement('br'));
            caption.appendChild(detail);
          }
          card.append(heading, caption);
          els.leadersMetrics.appendChild(card);
        });
      }
    }
    if (els.leadersPipelines) {
      clearChildren(els.leadersPipelines);
      const pipelines = Array.isArray(config?.pipelines) ? config.pipelines : [];
      if (!pipelines.length) {
        const li = document.createElement('li');
        li.textContent = 'Add campaigns to see strategic arcs.';
        els.leadersPipelines.appendChild(li);
      } else {
        pipelines.forEach(item => {
          if (!item) return;
          const li = document.createElement('li');
          li.textContent = item;
          els.leadersPipelines.appendChild(li);
        });
      }
    }
  }

  function buildLeaderCard(leader, index) {
    const card = document.createElement('article');
    card.className = 'leader-card';
    card.dataset.index = String(index);
    card.setAttribute('role', 'button');
    card.tabIndex = -1;

    const media = document.createElement('div');
    media.className = 'leader-card-media';
    if (leader?.image) {
      const img = document.createElement('img');
      img.src = encodeURI(leader.image);
      img.alt = leader.name || 'Faith leader portrait';
      img.loading = 'lazy';
      img.decoding = 'async';
      media.appendChild(img);
    }
    card.appendChild(media);

    const body = document.createElement('div');
    body.className = 'leader-card-body';

    const header = document.createElement('div');
    header.className = 'leader-card-header';
    const title = document.createElement('h3');
    title.className = 'leader-card-title';
    title.textContent = leader?.name || 'Leader';
    header.appendChild(title);
    if (leader?.title) {
      const role = document.createElement('p');
      role.className = 'leader-card-role';
      role.textContent = leader.title;
      header.appendChild(role);
    }
    body.appendChild(header);

    if (Array.isArray(leader?.metrics) && leader.metrics.length) {
      const stats = document.createElement('div');
      stats.className = 'leader-card-stats';
      leader.metrics.slice(0, 3).forEach(metric => {
        if (!metric) return;
        const stat = document.createElement('div');
        stat.className = 'leader-card-stat';
        const value = document.createElement('strong');
        value.textContent = metric.value || '';
        const label = document.createElement('span');
        label.textContent = metric.label || '';
        if (metric.detail) {
          const detail = document.createElement('small');
          detail.textContent = metric.detail;
          label.appendChild(detail);
        }
        stat.append(value, label);
        stats.appendChild(stat);
      });
      body.appendChild(stats);
    }

    const story = document.createElement('p');
    story.className = 'leader-card-story';
    story.textContent = leader?.story || 'Live dossier loading';
    body.appendChild(story);

    if (Array.isArray(leader?.tags) && leader.tags.length) {
      const tagList = document.createElement('div');
      tagList.className = 'leader-tag-list';
      leader.tags.forEach(tag => {
        if (!tag) return;
        const badge = document.createElement('span');
        badge.className = 'leader-tag';
        badge.textContent = tag;
        tagList.appendChild(badge);
      });
      body.appendChild(tagList);
    }

    card.appendChild(body);

    card.addEventListener('click', () => activateLeader(index));
    card.addEventListener('keydown', event => {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        activateLeader(index, { focus: true });
      }
    });

    return { element: card, leader, storyEl: story };
  }

  function applyLeaderSummary(leaderId, summary) {
    const text = (summary || '').trim();
    leaderCardEntries.forEach(entry => {
      if (entry.leader?.id === leaderId && entry.storyEl) {
        entry.storyEl.textContent = text || entry.leader?.story || '';
      }
    });
    if (state.activeLeaderId === leaderId && els.leaderStory) {
      const active = leaderCardEntries.find(entry => entry.leader?.id === leaderId);
      const fallback = active?.leader?.story || '';
      els.leaderStory.textContent = text || fallback;
    }
  }

  async function fetchLeaderSummary(leader) {
    if (!leader?.wiki) {
      return leader?.story || '';
    }
    const cached = leaderSummaryCache.get(leader.wiki);
    if (cached != null) {
      return cached;
    }
    try {
      const response = await fetch(`${WIKIPEDIA_SUMMARY_ENDPOINT}${encodeURIComponent(leader.wiki)}`);
      if (!response.ok) {
        throw new Error('Unable to load summary');
      }
      const data = await response.json();
      const summary = data?.extract || data?.description || leader.story || '';
      leaderSummaryCache.set(leader.wiki, summary);
      return summary;
    } catch (error) {
      const fallback = leader?.story || '';
      leaderSummaryCache.set(leader.wiki, fallback);
      return fallback;
    }
  }

  function hydrateLeaderSummary(leader, storyEl) {
    if (!leader) return;
    const fallback = leader.story || '';
    if (storyEl) {
      storyEl.textContent = fallback || 'Live dossier loading';
    }
    if (!leader.wiki) {
      applyLeaderSummary(leader.id, fallback);
      return;
    }
    const cached = leaderSummaryCache.get(leader.wiki);
    if (cached != null) {
      applyLeaderSummary(leader.id, cached || fallback);
      return;
    }
    fetchLeaderSummary(leader)
      .then(summary => applyLeaderSummary(leader.id, summary || fallback))
      .catch(() => applyLeaderSummary(leader.id, fallback));
  }

  function renderLeaderCarousel(config) {
    currentLeaderConfig = config || null;
    const track = els.leadersTrack;
    if (!track) return;
    clearChildren(track);
    leaderCardEntries = [];
    const leaders = Array.isArray(config?.leaders) ? config.leaders : [];
    leaders.forEach((leader, index) => {
      const entry = buildLeaderCard(leader, index);
      leaderCardEntries.push(entry);
      track.appendChild(entry.element);
      hydrateLeaderSummary(leader, entry.storyEl);
    });
    if (els.leadersViewport) {
      try {
        els.leadersViewport.scrollTo({ left: 0, behavior: 'auto' });
      } catch (err) {
        els.leadersViewport.scrollLeft = 0;
      }
    }
    updateLeaderNavigationButtons(leaders.length);
  }

  function updateLeaderNavigationButtons(total) {
    if (els.leadersPrev) {
      els.leadersPrev.disabled = total <= 0 || state.leaderIndex <= 0;
    }
    if (els.leadersNext) {
      const maxIndex = Math.max(0, total - 1);
      els.leadersNext.disabled = total <= 0 || state.leaderIndex >= maxIndex;
    }
  }

  function scrollLeaderIntoView(card) {
    if (!card) return;
    try {
      card.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    } catch (error) {
      if (els.leadersViewport) {
        const left = card.offsetLeft - (els.leadersViewport.clientWidth / 2 - card.clientWidth / 2);
        els.leadersViewport.scrollLeft = Math.max(0, left);
      }
    }
  }

  function activateLeader(index, options = {}) {
    const leaders = currentLeaderConfig?.leaders || [];
    if (!leaders.length) return;
    const nextIndex = Math.max(0, Math.min(leaders.length - 1, index));
    state.leaderIndex = nextIndex;
    leaderCardEntries.forEach((entry, idx) => {
      const isActive = idx === nextIndex;
      entry.element.classList.toggle('is-active', isActive);
      entry.element.setAttribute('aria-current', isActive ? 'true' : 'false');
      entry.element.tabIndex = isActive ? 0 : -1;
      if (isActive && options.focus) {
        entry.element.focus();
      }
    });
    updateLeaderNavigationButtons(leaders.length);
    const activeEntry = leaderCardEntries[nextIndex];
    if (activeEntry) {
      if (options.scroll !== false) {
        scrollLeaderIntoView(activeEntry.element);
      }
      updateLeaderDetails(activeEntry.leader);
    }
  }

  function populateList(listElement, items, emptyText) {
    if (!listElement) return;
    clearChildren(listElement);
    const collection = Array.isArray(items) ? items.filter(Boolean) : [];
    if (!collection.length) {
      const li = document.createElement('li');
      li.textContent = emptyText || 'No updates posted yet.';
      listElement.appendChild(li);
      return;
    }
    collection.forEach(item => {
      const li = document.createElement('li');
      li.textContent = item;
      listElement.appendChild(li);
    });
  }

  function populateLinks(listElement, links) {
    if (!listElement) return;
    clearChildren(listElement);
    const collection = Array.isArray(links) ? links.filter(link => link && link.url) : [];
    if (!collection.length) {
      const li = document.createElement('li');
      li.textContent = 'No official channels listed.';
      listElement.appendChild(li);
      return;
    }
    collection.forEach(link => {
      const li = document.createElement('li');
      const anchor = document.createElement('a');
      anchor.href = link.url;
      anchor.target = '_blank';
      anchor.rel = 'noreferrer noopener';
      anchor.textContent = link.label || link.url;
      li.appendChild(anchor);
      listElement.appendChild(li);
    });
  }

  function createSignalListItem(entry) {
    const li = document.createElement('li');
    li.className = 'leader-signal-entry';
    if (!entry || (typeof entry === 'object' && !entry.text && !entry.url && !entry.meta)) {
      li.textContent = typeof entry === 'string' ? entry : '';
      return li;
    }
    if (typeof entry === 'string') {
      li.textContent = entry;
      return li;
    }
    const { text, url, meta, type } = entry;
    if (type === 'live') {
      li.classList.add('leader-signal-live');
    } else if (type === 'loading') {
      li.classList.add('leader-signal-loading');
    } else if (type === 'placeholder') {
      li.classList.add('leader-signal-placeholder');
    }
    if (url) {
      const anchor = document.createElement('a');
      anchor.href = url;
      anchor.target = '_blank';
      anchor.rel = 'noreferrer noopener';
      anchor.textContent = text || url;
      li.appendChild(anchor);
    } else if (text) {
      const span = document.createElement('span');
      span.textContent = text;
      li.appendChild(span);
    }
    if (meta) {
      const metaEl = document.createElement('small');
      metaEl.textContent = meta;
      li.appendChild(metaEl);
    }
    if (!li.childNodes.length) {
      li.textContent = text || '';
    }
    return li;
  }

  async function fetchLeaderSignals(leader) {
    if (!leader?.wiki) return [];
    if (leaderSignalsCache.has(leader.wiki)) {
      return leaderSignalsCache.get(leader.wiki) || [];
    }
    try {
      const response = await fetch(`${WIKIPEDIA_RELATED_ENDPOINT}${encodeURIComponent(leader.wiki)}?redirect=true`);
      if (!response.ok) {
        throw new Error('Unable to load related pages');
      }
      const data = await response.json();
      const pages = Array.isArray(data?.pages) ? data.pages.slice(0, 4) : [];
      const entries = pages
        .map(page => {
          if (!page) return null;
          const title = page?.titles?.display || page?.title;
          const url = page?.content_urls?.desktop?.page || page?.content_urls?.mobile?.page;
          const description = page?.description || page?.extract;
          if (!title) return null;
          return {
            text: title,
            url,
            meta: description || 'Live brief from Wikimedia feeds',
            type: 'live'
          };
        })
        .filter(Boolean);
      leaderSignalsCache.set(leader.wiki, entries);
      return entries;
    } catch (error) {
      leaderSignalsCache.set(leader.wiki, []);
      return [];
    }
  }

  function renderLeaderSignals(leader) {
    if (!els.leaderSignals) return;
    clearChildren(els.leaderSignals);
    const staticSignals = Array.isArray(leader?.signals) ? leader.signals.filter(Boolean) : [];
    staticSignals.forEach(signal => {
      els.leaderSignals.appendChild(createSignalListItem({ text: signal }));
    });
    let placeholderItem = null;
    if (!staticSignals.length) {
      placeholderItem = createSignalListItem({ text: 'Monitor press feeds for the next bulletin.', type: 'placeholder' });
      els.leaderSignals.appendChild(placeholderItem);
    }
    if (!leader?.wiki) {
      return;
    }
    if (leaderSignalsCache.has(leader.wiki)) {
      const cached = leaderSignalsCache.get(leader.wiki) || [];
      if (cached.length) {
        if (placeholderItem?.isConnected) {
          placeholderItem.remove();
        }
        cached.forEach(entry => {
          els.leaderSignals.appendChild(createSignalListItem(entry));
        });
      }
      return;
    }
    const loadingItem = createSignalListItem({ text: 'Scanning live knowledge feeds', type: 'loading' });
    els.leaderSignals.appendChild(loadingItem);
    fetchLeaderSignals(leader)
      .then(entries => {
        if (state.activeLeaderId !== leader.id) {
          return;
        }
        if (loadingItem.isConnected) {
          loadingItem.remove();
        }
        if (entries.length) {
          if (placeholderItem?.isConnected) {
            placeholderItem.remove();
          }
          entries.forEach(entry => {
            els.leaderSignals.appendChild(createSignalListItem(entry));
          });
        } else if (!staticSignals.length && !placeholderItem?.isConnected) {
          els.leaderSignals.appendChild(createSignalListItem({ text: 'No live bulletins available yet.', type: 'placeholder' }));
        }
      })
      .catch(() => {
        if (state.activeLeaderId !== leader.id) {
          return;
        }
        if (loadingItem.isConnected) {
          loadingItem.textContent = 'Live feeds unavailable at this moment.';
          loadingItem.classList.remove('leader-signal-loading');
          loadingItem.classList.add('leader-signal-placeholder');
        }
      });
  }

  function updateLeaderDetails(leader) {
    if (!leader) return;
    state.activeLeaderId = leader.id || null;
    if (els.leaderStory) {
      els.leaderStory.textContent = leader.story || 'Live dossier loading';
    }
    populateList(els.leaderBriefing, leader.operations, 'Waiting for campaign directives.');
    renderLeaderSignals(leader);
    populateLinks(els.leaderLinks, leader.links);
    hydrateLeaderSummary(leader, null);
  }

  function buildLeaderTabs() {
    const container = els.leadersTabs;
    if (!container) return;
    clearChildren(container);
    leaderTabButtons = [];
    FAITH_LEADER_DECK.forEach((entry, index) => {
      const button = document.createElement('button');
      button.type = 'button';
      button.className = 'leader-tab';
      button.textContent = entry.label;
      button.dataset.faith = entry.faith;
      button.setAttribute('role', 'tab');
      button.setAttribute('aria-controls', 'leaders-summary-card');
      const isActive = entry.faith === state.leaderFaith;
      button.classList.toggle('is-active', isActive);
      button.setAttribute('aria-selected', isActive ? 'true' : 'false');
      button.tabIndex = isActive ? 0 : -1;
      button.addEventListener('click', () => activateFaith(entry.faith));
      button.addEventListener('keydown', event => {
        if (event.key !== 'ArrowRight' && event.key !== 'ArrowLeft') return;
        event.preventDefault();
        const offset = event.key === 'ArrowRight' ? 1 : -1;
        const nextIndex = (index + offset + FAITH_LEADER_DECK.length) % FAITH_LEADER_DECK.length;
        const nextFaith = FAITH_LEADER_DECK[nextIndex]?.faith;
        if (nextFaith) {
          const nextButton = leaderTabButtons[nextIndex];
          if (nextButton) {
            nextButton.focus();
          }
          activateFaith(nextFaith);
        }
      });
      container.appendChild(button);
      leaderTabButtons.push(button);
    });
  }

  function updateLeaderTabs(faith) {
    leaderTabButtons.forEach(button => {
      const isActive = button.dataset.faith === faith;
      button.classList.toggle('is-active', isActive);
      button.setAttribute('aria-selected', isActive ? 'true' : 'false');
      button.tabIndex = isActive ? 0 : -1;
    });
  }

  function activateFaith(faith) {
    const config = getFaithLeaderConfig(faith);
    if (!config) return;
    state.leaderFaith = config.faith;
    state.leaderIndex = 0;
    setLeadersAccent(config.accent);
    renderLeadersTicker(config);
    renderLeadersSummary(config);
    renderLeaderCarousel(config);
    updateLeaderTabs(config.faith);
    activateLeader(0, { scroll: false });
  }

  function shiftLeader(delta) {
    const leaders = currentLeaderConfig?.leaders || [];
    if (!leaders.length) return;
    const target = state.leaderIndex + delta;
    if (target < 0 || target >= leaders.length) return;
    activateLeader(target);
  }

  function initFaithLeaders() {
    if (!els.leadersLab || !FAITH_LEADER_DECK.length) return;
    if (!state.leaderFaith) {
      state.leaderFaith = FAITH_LEADER_DECK[0].faith;
    }
    buildLeaderTabs();
    activateFaith(state.leaderFaith);
    if (els.leadersPrev) {
      els.leadersPrev.addEventListener('click', () => shiftLeader(-1));
    }
    if (els.leadersNext) {
      els.leadersNext.addEventListener('click', () => shiftLeader(1));
    }
    if (els.leadersViewport) {
      els.leadersViewport.addEventListener('wheel', event => {
        if (!event.shiftKey) return;
        event.preventDefault();
        const delta = event.deltaY > 0 ? 1 : -1;
        shiftLeader(delta);
      }, { passive: false });
    }
  }


  const quickStripeCard = document.querySelector('.quick-stripe-card');
  let updateQuickMetricsDisplay = () => {};
  let refreshQuickLocalizedContent = () => {};

  if (quickStripeCard) {
    const quickTabs = Array.from(quickStripeCard.querySelectorAll('.manage-tab'));
    const quickAmounts = Array.from(quickStripeCard.querySelectorAll('.quick-amount'));
    const quickFaithIcon = document.getElementById('quick-faith-icon');
    const quickFaithTitle = document.getElementById('quick-faith-title');
    const quickFaithSubtitle = document.getElementById('quick-faith-subtitle');
    const quickMultiplierLabel = document.getElementById('quick-multiplier-label');
    const quickSliderTrack = document.getElementById('quick-slider');
    const quickSliderProgress = document.getElementById('quick-slider-progress');
    const quickSliderThumb = document.getElementById('quick-slider-thumb');
    const quickTotal = document.getElementById('quick-total');
    const quickTotalDetail = document.getElementById('quick-total-detail');
    const quickSummary = quickStripeCard.querySelector('.quick-summary');
    const quickGenerateBtn = document.getElementById('quick-generate');
    const quickShareBtn = document.getElementById('quick-share');
    const quickGenerateLabel = quickGenerateBtn ? quickGenerateBtn.querySelector('span') : null;
    const quickShareLabel = quickShareBtn ? quickShareBtn.querySelector('span') : null;
    const quickStatus = document.getElementById('quick-status');
    const quickResult = document.getElementById('quick-result');
    const quickLink = document.getElementById('quick-link');
    const quickCopyBtn = document.getElementById('quick-copy');
    const quickMetricsContainer = document.getElementById('quick-metrics');
    const quickMetricsFollowersLabel = document.getElementById('quick-metric-followers-label');
    const quickMetricsFollowersValue = document.getElementById('quick-metric-followers');
    const quickMetricsActionsLabel = document.getElementById('quick-metric-actions-label');
    const quickMetricsActionsValue = document.getElementById('quick-metric-actions');
    const quickMetricsUpdated = document.getElementById('quick-metrics-updated');

    function resetQuickCopyButton() {
      if (quickCopyBtn) {
        quickCopyBtn.disabled = false;
        quickCopyBtn.textContent = translate('quick.copy', {}, 'Copy link');
      }
    }

    function clearQuickCheckoutFeedback() {
      if (quickResult) {
        quickResult.hidden = true;
      }
      if (quickLink) {
        quickLink.textContent = '';
        quickLink.removeAttribute('href');
      }
      resetQuickCopyButton();
      clearStatus(quickStatus);
    }

    if (quickSliderTrack && quickSliderProgress && quickSliderThumb && quickMultiplierLabel && quickTotal) {
      const QUICK_SLIDER_MIN = 0.75;
      const QUICK_SLIDER_MAX = 2.5;
      const QUICK_SLIDER_STEP = 0.01;
      const QUICK_PERCENT_STEP = 3.5;
      const QUICK_PERCENT_FINE = 1.5;

      const amountFormatters = new Map();
      const metricValueFormatters = new Map();

      const quickState = {
        faith: QUICK_FAITHS[0]?.key ?? null,
        multiplier: 1,
        selectedIndex: 0
      };

      let quickSliderRect = quickSliderTrack.getBoundingClientRect();
      let quickSliderPercent = 0;
      let quickSliderDragging = false;

      quickSliderTrack.setAttribute('aria-valuemin', String(Math.round(QUICK_SLIDER_MIN * 100)));
      quickSliderTrack.setAttribute('aria-valuemax', String(Math.round(QUICK_SLIDER_MAX * 100)));

      function formatAmount(value, currency, locale) {
        const key = `${locale}-${currency}`;
        if (!amountFormatters.has(key)) {
          amountFormatters.set(
            key,
            new Intl.NumberFormat(locale, {
              style: 'currency',
              currency,
              maximumFractionDigits: 0,
              minimumFractionDigits: 0
            })
          );
        }
        return amountFormatters.get(key).format(Math.max(0, Math.round(value)));
      }

      function formatQuickMetric(value, locale) {
        if (!Number.isFinite(value)) return null;
        const key = `${locale || 'default'}`;
        if (!metricValueFormatters.has(key)) {
          try {
            metricValueFormatters.set(
              key,
              new Intl.NumberFormat(locale || undefined, {
                notation: 'compact',
                maximumFractionDigits: 1
              })
            );
          } catch (err) {
            metricValueFormatters.set(key, null);
          }
        }
        const formatter = metricValueFormatters.get(key);
        if (formatter && typeof formatter.format === 'function') {
          return formatter.format(value);
        }
        return formatMetricNumber(value, locale) || String(Math.round(value));
      }

      function formatMultiplier(value) {
        const fixed = value.toFixed(2);
        return `${fixed.replace(/0+$/, '').replace(/\.$/, '')}`;
      }

      function percentToMultiplier(percent) {
        return QUICK_SLIDER_MIN + (Math.max(0, Math.min(100, percent)) / 100) * (QUICK_SLIDER_MAX - QUICK_SLIDER_MIN);
      }

      function multiplierToPercent(multiplier) {
        const clamped = Math.max(QUICK_SLIDER_MIN, Math.min(QUICK_SLIDER_MAX, multiplier));
        return ((clamped - QUICK_SLIDER_MIN) / (QUICK_SLIDER_MAX - QUICK_SLIDER_MIN)) * 100;
      }

      function applySliderPosition() {
        quickSliderProgress.style.width = `${quickSliderPercent}%`;
        quickSliderThumb.style.left = `${quickSliderPercent}%`;
        const ariaValue = Math.round(quickState.multiplier * 100);
        quickSliderTrack.setAttribute('aria-valuenow', String(ariaValue));
        const multiplierText = `${quickState.multiplier.toFixed(2)} ${translate('quick.multiplierA11ySuffix', {}, 'times base gift')}`;
        quickSliderTrack.setAttribute('aria-valuetext', multiplierText);
        quickMultiplierLabel.textContent = formatMultiplier(quickState.multiplier);
      }

      function updateQuickAmounts() {
        clearQuickCheckoutFeedback();
        const config = QUICK_FAITH_MAP.get(quickState.faith);
        if (!config) return;
        const quickContent = getQuickContent(quickState.faith);
        const amounts = quickContent.amounts.length ? quickContent.amounts : config.amounts;

        quickAmounts.forEach((button, index) => {
          const amountConfig = amounts[index] ?? amounts[amounts.length - 1];
          const scaled = Math.round(amountConfig.base * quickState.multiplier / 5) * 5;
          button.dataset.index = String(index);
          button.dataset.amountValue = String(Math.max(0, scaled));
          const valueLabel = button.querySelector('strong');
          const descLabel = button.querySelector('span');
          if (valueLabel) {
            valueLabel.textContent = formatAmount(scaled, config.currency, config.locale);
          }
          if (descLabel) {
            descLabel.textContent = amountConfig.label;
          }
          button.classList.toggle('is-selected', index === quickState.selectedIndex);
        });

        const activeButton = quickAmounts[quickState.selectedIndex];
        const activeAmount = activeButton ? Number(activeButton.dataset.amountValue ?? 0) : 0;
        const formattedAmount = formatAmount(activeAmount, config.currency, config.locale);
        quickTotal.textContent = translate('quick.totalReady', { amount: formattedAmount }, `${formattedAmount} ready for checkout`);
      }

      function updateQuickVisuals() {
        const config = QUICK_FAITH_MAP.get(quickState.faith);
        if (!config) return;
        const quickContent = getQuickContent(quickState.faith);

        if (quickFaithIcon) {
          quickFaithIcon.innerHTML = config.icon;
        }
        if (quickFaithTitle) {
          quickFaithTitle.textContent = quickContent.title || config.title;
        }
        if (quickFaithSubtitle) {
          quickFaithSubtitle.textContent = quickContent.subtitle || config.subtitle;
        }
        if (quickTotalDetail) {
          quickTotalDetail.textContent = quickContent.detail || config.detail;
        }
        if (quickGenerateLabel) {
          quickGenerateLabel.textContent = quickContent.ctaGenerate || config.ctaGenerate;
        }
        if (quickShareLabel) {
          quickShareLabel.textContent = quickContent.ctaShare || config.ctaShare;
        }

        quickStripeCard.style.backgroundImage = config.cardGradient;
        quickStripeCard.style.borderColor = config.borderColor;
        quickSliderProgress.style.backgroundImage = config.gradient;
        if (quickSummary) {
          quickSummary.style.borderColor = config.summaryBorder;
          quickSummary.style.boxShadow = config.summaryShadow;
        }

        quickTabs.forEach((tab) => {
          const isActive = tab.dataset.faith === quickState.faith;
          tab.classList.toggle('is-active', isActive);
          tab.setAttribute('aria-selected', isActive ? 'true' : 'false');
          tab.style.background = isActive ? config.gradient : 'transparent';
          tab.style.color = isActive ? '#fff' : '';
          tab.style.boxShadow = isActive ? config.shadow : '';
        });

        updateQuickMetricsDisplay();
        updateQuickAmounts();
      }

      updateQuickMetricsDisplay = function updateQuickMetricsDisplay() {
        if (!quickMetricsContainer) return;
        const followersCard = quickMetricsContainer.querySelector('[data-role="followers"]');
        const actionsCard = quickMetricsContainer.querySelector('[data-role="actions"]');
        const config = QUICK_FAITH_MAP.get(quickState.faith);
        const quickContent = getQuickContent(quickState.faith);
        if (quickMetricsFollowersLabel) {
          quickMetricsFollowersLabel.textContent = quickContent.followersLabel || translate('quick.metrics.followers', {}, 'Global adherents');
        }
        if (followersCard) {
          followersCard.dataset.label = quickContent.followersLabel || translate('quick.metrics.followers', {}, 'Global adherents');
        }
        if (quickMetricsActionsLabel) {
          quickMetricsActionsLabel.textContent = quickContent.actionsLabel || translate('quick.metrics.actions', {}, 'Active community projects');
        }
        if (actionsCard) {
          actionsCard.dataset.label = quickContent.actionsLabel || translate('quick.metrics.actions', {}, 'Active community projects');
        }
        const metrics = getMetricsForFaith(quickState.faith);
        if (!metrics) {
          const loadingLabel = translate('quick.metrics.loading', {}, 'Loading metrics');
          if (quickMetricsFollowersValue) quickMetricsFollowersValue.textContent = loadingLabel;
          if (quickMetricsActionsValue) quickMetricsActionsValue.textContent = loadingLabel;
          if (followersCard) followersCard.classList.add('is-loading');
          if (actionsCard) actionsCard.classList.add('is-loading');
          if (quickMetricsUpdated) quickMetricsUpdated.textContent = translate('quick.metrics.loadingSummary', {}, 'Metrics loading');
          return;
        }

        if (quickMetricsUpdated) {
          if (state.metricsUpdatedAt) {
            const updatedDate = new Date(state.metricsUpdatedAt);
            if (!Number.isNaN(updatedDate.getTime())) {
              const formattedTime = updatedDate.toLocaleString(undefined, {
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit'
              });
              quickMetricsUpdated.textContent = translate('quick.metrics.updated', { time: formattedTime }, `Last updated ${formattedTime}`);
            } else {
              quickMetricsUpdated.textContent = '';
            }
          } else {
            quickMetricsUpdated.textContent = translate('quick.metrics.live', {}, 'Live metrics');
          }
        }

        const followersValue = metrics?.followers?.value;
        if (Number.isFinite(followersValue)) {
          const formattedFollowers = formatQuickMetric(followersValue, config?.locale) || String(Math.round(followersValue));
          const yearSuffix = metrics.followers?.year ? ` (${metrics.followers.year})` : '';
          if (quickMetricsFollowersValue) {
            quickMetricsFollowersValue.textContent = `${formattedFollowers}${yearSuffix}`;
          }
          if (followersCard) followersCard.classList.remove('is-loading');
        } else {
          if (quickMetricsFollowersValue) quickMetricsFollowersValue.textContent = '';
          if (followersCard) followersCard.classList.add('is-loading');
        }

        const actionKeys = Array.isArray(config?.metrics?.actionSectors) && config.metrics.actionSectors.length
          ? config.metrics.actionSectors
          : Object.keys(metrics.sectors || {});
        let actionsTotal = 0;
        let hasActionData = false;
        actionKeys.forEach(key => {
          const value = metrics?.sectors?.[key]?.value;
          if (Number.isFinite(value)) {
            actionsTotal += value;
            hasActionData = true;
          }
        });
        if (!hasActionData && Number.isFinite(metrics?.totals?.sectorActions)) {
          actionsTotal = metrics.totals.sectorActions;
          hasActionData = true;
        }

        if (hasActionData) {
          const formattedActions = formatQuickMetric(actionsTotal, config?.locale) || String(Math.round(actionsTotal));
          if (quickMetricsActionsValue) {
            quickMetricsActionsValue.textContent = translate('quick.metrics.actionsSuffix', { count: formattedActions }, `${formattedActions} actions`);
          }
          if (actionsCard) actionsCard.classList.remove('is-loading');
        } else {
          if (quickMetricsActionsValue) quickMetricsActionsValue.textContent = '';
          if (actionsCard) actionsCard.classList.add('is-loading');
        }
      };

      function setQuickFaith(key) {
        if (!QUICK_FAITH_MAP.has(key)) return;
        quickState.faith = key;
        quickState.selectedIndex = 0;
        updateQuickVisuals();
      }

      function setQuickPercent(percent) {
        const clamped = Math.max(0, Math.min(100, percent));
        quickSliderPercent = clamped;
        const rawMultiplier = percentToMultiplier(clamped);
        const roundedMultiplier = Math.round(rawMultiplier / QUICK_SLIDER_STEP) * QUICK_SLIDER_STEP;
        quickState.multiplier = Math.max(QUICK_SLIDER_MIN, Math.min(QUICK_SLIDER_MAX, Number(roundedMultiplier.toFixed(2))));
        applySliderPosition();
        updateQuickAmounts();
      }

      function updateQuickFromClient(clientX) {
        if (!quickSliderRect || quickSliderRect.width === 0) return;
        const offset = clientX - quickSliderRect.left;
        const percent = (offset / quickSliderRect.width) * 100;
        setQuickPercent(percent);
      }

      function startSliderDrag(clientX) {
        quickSliderDragging = true;
        quickSliderRect = quickSliderTrack.getBoundingClientRect();
        quickSliderThumb.classList.add('active');
        updateQuickFromClient(clientX);
      }

      function stopSliderDrag() {
        if (!quickSliderDragging) return;
        quickSliderDragging = false;
        quickSliderThumb.classList.remove('active');
      }

      quickTabs.forEach((tab) => {
        tab.addEventListener('click', () => {
          setQuickFaith(tab.dataset.faith);
        });
      });

      quickAmounts.forEach((button) => {
        button.addEventListener('click', () => {
          const index = Number(button.dataset.index ?? 0);
          quickState.selectedIndex = index;
          updateQuickAmounts();
        });
      });

      quickSliderThumb.addEventListener('mousedown', (event) => {
        event.preventDefault();
        startSliderDrag(event.clientX);
      });

      quickSliderTrack.addEventListener('mousedown', (event) => {
        event.preventDefault();
        startSliderDrag(event.clientX);
      });

      document.addEventListener('mousemove', (event) => {
        if (!quickSliderDragging) return;
        updateQuickFromClient(event.clientX);
      });

      document.addEventListener('mouseup', stopSliderDrag);

      quickSliderThumb.addEventListener(
        'touchstart',
        (event) => {
          event.preventDefault();
          const touch = event.touches[0];
          if (touch) {
            startSliderDrag(touch.clientX);
          }
        },
        { passive: false }
      );

      quickSliderTrack.addEventListener(
        'touchstart',
        (event) => {
          const touch = event.touches[0];
          if (touch) {
            startSliderDrag(touch.clientX);
          }
        },
        { passive: true }
      );

      document.addEventListener(
        'touchmove',
        (event) => {
          if (!quickSliderDragging) return;
          const touch = event.touches[0];
          if (touch) {
            event.preventDefault();
            updateQuickFromClient(touch.clientX);
          }
        },
        { passive: false }
      );

      document.addEventListener('touchend', stopSliderDrag);
      document.addEventListener('touchcancel', stopSliderDrag);

      quickSliderTrack.addEventListener('keydown', (event) => {
        let handled = false;
        if (event.key === 'ArrowRight' || event.key === 'ArrowUp') {
          const step = event.shiftKey ? QUICK_PERCENT_FINE : QUICK_PERCENT_STEP;
          setQuickPercent(quickSliderPercent + step);
          handled = true;
        } else if (event.key === 'ArrowLeft' || event.key === 'ArrowDown') {
          const step = event.shiftKey ? QUICK_PERCENT_FINE : QUICK_PERCENT_STEP;
          setQuickPercent(quickSliderPercent - step);
          handled = true;
        } else if (event.key === 'Home') {
          setQuickPercent(0);
          handled = true;
        } else if (event.key === 'End') {
          setQuickPercent(100);
          handled = true;
        }

        if (handled) {
          event.preventDefault();
        }
      });

      const quickElements = {
        status: quickStatus,
        result: quickResult,
        link: quickLink,
        copy: quickCopyBtn,
        amountButtons: quickAmounts,
        generateBtn: quickGenerateBtn,
        shareBtn: quickShareBtn
      };

      if (quickGenerateBtn) {
        quickGenerateBtn.addEventListener('click', () => {
          performQuickCheckout('checkout', quickState, quickElements);
        });
      }

      if (quickShareBtn) {
        quickShareBtn.addEventListener('click', () => {
          performQuickCheckout('link', quickState, quickElements);
        });
      }

      if (quickCopyBtn) {
        quickCopyBtn.addEventListener('click', async () => {
          if (!quickLink || !quickLink.href) return;
          if (!navigator?.clipboard?.writeText) {
            setStatus(quickStatus, translate('status.copyUnsupported', {}, 'Copy not supported hereuse the link above instead.'), 'info');
            return;
          }
          try {
            await navigator.clipboard.writeText(quickLink.href);
            setStatus(quickStatus, translate('status.copySuccess', {}, 'Donation link copied to your clipboard!'), 'success');
            quickCopyBtn.disabled = true;
            quickCopyBtn.textContent = translate('status.copied', {}, 'Copied!');
            setTimeout(() => {
              quickCopyBtn.disabled = false;
              quickCopyBtn.textContent = translate('quick.copy', {}, 'Copy link');
            }, 2400);
          } catch (err) {
            console.warn('Clipboard copy failed', err);
            setStatus(quickStatus, translate('status.copyUnsupported', {}, 'Copy not supported hereuse the link above instead.'), 'info');
          }
        });
      }

      window.addEventListener('resize', () => {
        quickSliderRect = quickSliderTrack.getBoundingClientRect();
        applySliderPosition();
      });

      quickSliderPercent = multiplierToPercent(quickState.multiplier);
      applySliderPosition();
      updateQuickVisuals();

      refreshQuickLocalizedContent = () => {
        resetQuickCopyButton();
        applySliderPosition();
        updateQuickVisuals();
      };
    }
  }

  const SLIDES = [
    {
      id: 'NA',
      name: 'North America',
      religion: 'christian',
      copy: 'US and Canada support ACH, cards, Apple Pay, and bilingual receipts with IRS and CRA-compliant summaries.',
      sectors: [
        { label: 'Community relief & shelters', metric: 'relief' },
        { label: 'Food security networks', metric: 'food' },
        { label: 'Youth programming', metric: 'youth' },
        { label: 'Capital campaigns', metric: 'capital' }
      ],
      currencies: ['USD', 'CAD']
    },
    {
      id: 'EU',
      name: 'Europe',
      religion: 'jewish',
      copy: 'Localized SEPA payments with automatic Gift Aid statements and multilingual GDPR consent flows.',
      sectors: [
        { label: 'Refugee welcome centers', metric: 'refugee' },
        { label: 'Cultural preservation', metric: 'culture' },
        { label: 'Winter energy assistance', metric: 'energy' },
        { label: 'Education bursaries', metric: 'education' }
      ],
      currencies: ['EUR', 'GBP', 'SEK']
    },
    {
      id: 'MENA',
      name: 'Middle East & North Africa',
      religion: 'islam',
      copy: 'Arabic-first experiences with Ramadan scheduling, zakat calculators, and regional banking partners.',
      sectors: [
        { label: 'Ramadan food parcels', metric: 'ramadan_food' },
        { label: 'Water & sanitation', metric: 'water' },
        { label: 'Scholarships for girls', metric: 'education' },
        { label: 'Mosque restoration', metric: 'infrastructure' }
      ],
      currencies: ['AED', 'SAR', 'EGP']
    },
    {
      id: 'SA',
      name: 'South Asia',
      religion: 'hindu',
      copy: 'Handle INR, LKR, and NPR gifts with PAN capture, festival campaign presets, and WhatsApp confirmations.',
      sectors: [
        { label: 'Disaster recovery', metric: 'disaster' },
        { label: 'Temple seva programs', metric: 'seva' },
        { label: 'Health outreach', metric: 'health' },
        { label: 'Education for children', metric: 'education' }
      ],
      currencies: ['INR', 'LKR', 'NPR']
    },
    {
      id: 'APAC',
      name: 'Asia Pacific',
      religion: 'buddhist',
      copy: 'From Singapore to Sydney: cards, BECS, and PayNow support with retreat management baked in.',
      sectors: [
        { label: 'Retreat scholarships', metric: 'retreats' },
        { label: 'Environmental care', metric: 'environment' },
        { label: 'Elder support services', metric: 'elder' },
        { label: 'Community kitchens', metric: 'kitchen' }
      ],
      currencies: ['AUD', 'SGD', 'NZD']
    }
  ];

  const CURRENCIES = new Map([
    ['USD', { code: 'USD', name: 'United States dollar', src: 'image/money/money_usd.jpg' }],
    ['CAD', { code: 'CAD', name: 'Canadian dollar', src: 'image/money/money_cad.jpg' }],
    ['EUR', { code: 'EUR', name: 'Euro', src: 'image/money/money_eur.jpg' }],
    ['GBP', { code: 'GBP', name: 'Pound sterling', src: 'image/money/money_gbp.jpg' }],
    ['SEK', { code: 'SEK', name: 'Swedish krona', src: 'image/money/money_sek.jpg' }],
    ['AED', { code: 'AED', name: 'United Arab Emirates dirham', src: 'image/money/money_aed_2.jpg' }],
    ['SAR', { code: 'SAR', name: 'Saudi riyal', src: 'image/money/money_sar.jpg' }],
    ['EGP', { code: 'EGP', name: 'Egyptian pound', src: 'image/money/money_egp.jpg' }],
    ['INR', { code: 'INR', name: 'Indian rupee', src: 'image/money/money_inr.jpg' }],
    ['LKR', { code: 'LKR', name: 'Sri Lankan rupee', src: 'image/money/money_lkr.jpg' }],
    ['NPR', { code: 'NPR', name: 'Nepalese rupee', src: 'image/money/money_npr.jpg' }],
    ['AUD', { code: 'AUD', name: 'Australian dollar', src: 'image/money/money_aud.jpg' }],
    ['SGD', { code: 'SGD', name: 'Singapore dollar', src: 'image/money/money_sgd.jpg' }],
    ['NZD', { code: 'NZD', name: 'New Zealand dollar', src: 'image/money/money_nzd.jpg' }]
  ]);

  const SECTORS = [
    { value: 'relief', title: 'Community Relief', desc: 'Rapid response funds for housing, energy, and crisis needs.' },
    { value: 'education', title: 'Education', desc: 'Scholarships, after-school programs, and language classes.' },
    { value: 'health', title: 'Health & Wellness', desc: 'Clinics, counseling, and elder care tailored to each faith.' },
    { value: 'food', title: 'Food Security', desc: 'Food banks, Ramadan baskets, langar kitchens, and pantry drives.' },
    { value: 'youth', title: 'Youth & Families', desc: 'Child check-in, camps, and youth mentorship funding.' },
    { value: 'capital', title: 'Facilities & Capital', desc: 'Building restoration, accessibility upgrades, and mortgages.' }
  ];

  const REGION_CURRENCY_LOOKUP = new Map([
    ['NA', 'usd'],
    ['EU', 'eur'],
    ['MENA', 'aed'],
    ['SA', 'inr'],
    ['APAC', 'sgd']
  ]);

  const DEFAULT_ORGS = [
    {
      _id: 'org_dreamworld',
      name: 'Dreamworld',
      region: 'APAC',
      religion: 'buddhist',
      locales: ['en-SG', 'zh-SG'],
      timezone: 'Asia/Singapore'
    },
    {
      _id: 'org_dreamworld_point_bank',
      name: 'Dreamworld Point Bank',
      region: 'NA',
      religion: 'jewish',
      locales: ['en-US', 'he-IL'],
      timezone: 'America/New_York'
    },
    {
      _id: 'org_one_brain_world',
      name: 'One Brain World',
      region: 'NA',
      religion: 'christian',
      locales: ['en-US', 'es-US'],
      timezone: 'America/Los_Angeles'
    },
    {
      _id: 'org_new_bright_water',
      name: 'New Bright Water',
      region: 'MENA',
      religion: 'islam',
      locales: ['en-AE', 'ar-AE'],
      timezone: 'Asia/Dubai'
    },
    {
      _id: 'org_paperwork',
      name: 'Paperwork',
      region: 'SA',
      religion: 'hindu',
      locales: ['en-IN', 'hi-IN'],
      timezone: 'Asia/Kolkata'
    }
  ];

  const DEFAULT_CAMPAIGNS = new Map([
    ['org_dreamworld', [
      {
        _id: 'camp_dreamworld_retreat',
        orgId: 'org_dreamworld',
        name: 'Retreat Scholarships  Education Fund',
        sectorFocus: 'education',
        currency: 'sgd',
        donationTypes: ['dana', 'retreat']
      },
      {
        _id: 'camp_dreamworld_environment',
        orgId: 'org_dreamworld',
        name: 'Environmental Care  Health & Wellness',
        sectorFocus: 'health',
        currency: 'sgd',
        donationTypes: ['dana']
      },
      {
        _id: 'camp_dreamworld_kitchens',
        orgId: 'org_dreamworld',
        name: 'Community Kitchens  Food Security',
        sectorFocus: 'food',
        currency: 'sgd',
        donationTypes: ['dana']
      }
    ]],
    ['org_one_brain_world', [
      {
        _id: 'camp_one_brain_relief',
        orgId: 'org_one_brain_world',
        name: 'Community Relief  Neighbor Support',
        sectorFocus: 'relief',
        currency: 'usd',
        donationTypes: ['tithe', 'offering']
      },
      {
        _id: 'camp_one_brain_youth',
        orgId: 'org_one_brain_world',
        name: 'Youth & Families  Mentorship Fund',
        sectorFocus: 'youth',
        currency: 'usd',
        donationTypes: ['pledge', 'offering']
      },
      {
        _id: 'camp_one_brain_capital',
        orgId: 'org_one_brain_world',
        name: 'Facilities & Capital  Renewal Campaign',
        sectorFocus: 'capital',
        currency: 'usd',
        donationTypes: ['pledge']
      }
    ]],
    ['org_new_bright_water', [
      {
        _id: 'camp_new_bright_relief',
        orgId: 'org_new_bright_water',
        name: 'Ramadan Food Parcels  Food Security',
        sectorFocus: 'food',
        currency: 'aed',
        donationTypes: ['zakat', 'sadaqah']
      },
      {
        _id: 'camp_new_bright_scholarship',
        orgId: 'org_new_bright_water',
        name: 'Scholarships for Girls  Education Access',
        sectorFocus: 'education',
        currency: 'aed',
        donationTypes: ['zakat']
      },
      {
        _id: 'camp_new_bright_restoration',
        orgId: 'org_new_bright_water',
        name: 'Mosque Restoration  Facilities & Capital',
        sectorFocus: 'capital',
        currency: 'aed',
        donationTypes: ['zakat', 'sadaqah']
      }
    ]],
    ['org_dreamworld_point_bank', [
      {
        _id: 'camp_dreamworld_point_bank_emergency',
        orgId: 'org_dreamworld_point_bank',
        name: 'Emergency Relief  Tzedakah Collective',
        sectorFocus: 'relief',
        currency: 'usd',
        donationTypes: ['tzedakah']
      },
      {
        _id: 'camp_dreamworld_point_bank_learning',
        orgId: 'org_dreamworld_point_bank',
        name: 'Learning Circles  Scholarship Fund',
        sectorFocus: 'education',
        currency: 'usd',
        donationTypes: ['tzedakah', 'maaser']
      },
      {
        _id: 'camp_dreamworld_point_bank_families',
        orgId: 'org_dreamworld_point_bank',
        name: 'Family Support  Community Chest',
        sectorFocus: 'youth',
        currency: 'usd',
        donationTypes: ['maaser']
      }
    ]],
    ['org_paperwork', [
      {
        _id: 'camp_paperwork_prasadam',
        orgId: 'org_paperwork',
        name: 'Temple Meals  Prasadam Kitchen',
        sectorFocus: 'food',
        currency: 'inr',
        donationTypes: ['daan', 'seva']
      },
      {
        _id: 'camp_paperwork_education',
        orgId: 'org_paperwork',
        name: 'Youth Education  Gurukul Program',
        sectorFocus: 'education',
        currency: 'inr',
        donationTypes: ['daan', 'dakshina']
      },
      {
        _id: 'camp_paperwork_health',
        orgId: 'org_paperwork',
        name: 'Health Outreach  Seva Clinics',
        sectorFocus: 'health',
        currency: 'inr',
        donationTypes: ['seva']
      }
    ]]
  ]);

  const FAITH_TYPES = {
    christian: ['tithe', 'offering', 'pledge', 'mission'],
    islam: ['zakat', 'sadaqah', 'fidya', 'zakat-al-fitr'],
    hindu: ['daan', 'dakshina', 'seva'],
    buddhist: ['dana', 'retreat', 'merit'],
    jewish: ['tzedakah', 'maaser', 'aliyah', 'yahrzeit']
  };

  const FAITH_OPTIONS = [
    { value: 'christian', labelKey: 'quick.tab.christian' },
    { value: 'islam', labelKey: 'quick.tab.islamic' },
    { value: 'hindu', labelKey: 'quick.tab.hindu' },
    { value: 'buddhist', labelKey: 'quick.tab.buddhist' },
    { value: 'jewish', labelKey: 'quick.tab.jewish' }
  ];

  function getFaithLabel(value) {
    const option = FAITH_OPTIONS.find(f => f.value === value);
    if (option) {
      return translate(option.labelKey, {}, titleize(option.value));
    }
    return titleize(value || '');
  }

  const RELIGION_SYMBOLS = new Map([
    ['christian', { labelKey: 'quick.tab.christian', src: 'religion/christianity-symbol.png' }],
    ['islam', { labelKey: 'quick.tab.islamic', src: 'religion/islam-symbol.png' }],
    ['hindu', { labelKey: 'quick.tab.hindu', src: 'religion/hinduism-symbol.png' }],
    ['buddhist', { labelKey: 'quick.tab.buddhist', src: 'religion/buddhism-symbol.png' }],
    ['jewish', { labelKey: 'quick.tab.jewish', src: 'religion/judaism-symbol.PNG' }]
  ]);

  const RELIGION_IMAGE_POOLS = new Map([
    ['christian', [
      'religion/christianity1.jpg',
      'religion/christianity2.jpg',
      'religion/christianity3.jpg',
      'religion/christianity4.jpg',
      'religion/christianity5.jpg',
      'religion/christianity6.jpg',
      'religion/christianity7.png',
      'religion/christianity8.png',
      'religion/christianity9.png'
    ]],
    ['jewish', [
      'religion/judaism1.jpg',
      'religion/judaism2.jpg',
      'religion/judaism3.png',
      'religion/judaism4.png',
      'religion/judaism5.png',
      'religion/judaism6.png',
      'religion/judaism7.png',
      'religion/judaism8.png'
    ]],
    ['islam', [
      'religion/islam1.jpg',
      'religion/islam2.jpg',
      'religion/islam3.png',
      'religion/islam4.jpg',
      'religion/islam5.jpg',
      'religion/islam6.jpg',
      'religion/islam7.jpg',
      'religion/islam8.jpg',
      'religion/islam9.png',
      'religion/islam10.jpg',
      'religion/islam11.png'
    ]],
    ['hindu', [
      'religion/hinduism1.jpg',
      'religion/hinduism2.jpg',
      'religion/hinduism3.jpg',
      'religion/hinduism4.jpg',
      'religion/hinduism5.jpg',
      'religion/hinduism6.jpg',
      'religion/hinduism7.jpg'
    ]],
    ['buddhist', [
      'religion/buddhism1.jpg',
      'religion/buddhism2.jpg',
      'religion/buddhism3.jpg',
      'religion/buddhism4.jpg',
      'religion/buddhism5.jpg',
      'religion/buddhism6.jpg',
      'religion/buddhism7.jpg',
      'religion/buddhism8.jpg',
      'religion/buddhism9.jpg'
    ]]
  ]);

  const MAX_FAITH_SYMBOL_TILT = 10;

  const SECTOR_TITLE_LOOKUP = new Map(SECTORS.map(sector => [sector.value, sector.title]));

  const els = {
    regionSlider: document.querySelector('.region-slider'),
    regionTrack: document.getElementById('region-track'),
    regionTransition: document.getElementById('region-transition'),
    transitionCurrent: document.getElementById('transition-current'),
    transitionNext: document.getElementById('transition-next'),
    sliderDots: document.getElementById('slider-dots'),
    prevSlide: document.getElementById('prev-slide'),
    nextSlide: document.getElementById('next-slide'),
    leadersLab: document.getElementById('leaders-lab'),
    leadersTabs: document.getElementById('leaders-tabs'),
    leadersTicker: document.getElementById('leaders-ticker'),
    leadersSummaryCard: document.getElementById('leaders-summary-card'),
    leadersSummary: document.getElementById('leaders-summary'),
    leadersMetrics: document.getElementById('leaders-metrics'),
    leadersPipelines: document.getElementById('leaders-pipelines'),
    leadersTrack: document.getElementById('leaders-track'),
    leadersViewport: document.getElementById('leaders-viewport'),
    leadersPrev: document.getElementById('leaders-prev'),
    leadersNext: document.getElementById('leaders-next'),
    leaderStory: document.getElementById('leader-story'),
    leaderBriefing: document.getElementById('leader-briefing'),
    leaderSignals: document.getElementById('leader-signals'),
    leaderLinks: document.getElementById('leader-links'),
    sectorGrid: document.getElementById('sector-grid'),
    donationForm: document.getElementById('donation-form'),
    donationRegion: document.getElementById('donation-region'),
    donationFaith: document.getElementById('donation-faith'),
    donationOrg: document.getElementById('donation-org'),
    donationCampaign: document.getElementById('donation-campaign'),
    donationSector: document.getElementById('donation-sector'),
    donationType: document.getElementById('donation-type'),
    donationAmount: document.getElementById('donation-amount'),
    donationFrequency: document.getElementById('donation-frequency'),
    donationPromo: document.getElementById('donation-promo'),
    donationName: document.getElementById('donation-name'),
    donationEmail: document.getElementById('donation-email'),
    donationNotes: document.getElementById('donation-notes'),
    donationStatus: document.getElementById('donation-status'),
    donationResult: document.getElementById('donation-result'),
    donationLink: document.getElementById('donation-link'),
    donationMeta: document.getElementById('donation-meta'),
    orgEmpty: document.getElementById('org-empty'),
    setupOrgForm: document.getElementById('setup-org-form'),
    setupOrgStatus: document.getElementById('setup-org-status'),
    setupOrgName: document.getElementById('setup-org-name'),
    setupOrgRegion: document.getElementById('setup-org-region'),
    setupOrgFaith: document.getElementById('setup-org-faith'),
    setupOrgLocales: document.getElementById('setup-org-locales'),
    setupOrgTimezone: document.getElementById('setup-org-timezone'),
    setupOrgStripe: document.getElementById('setup-org-stripe'),
    setupCampaignForm: document.getElementById('setup-campaign-form'),
    setupCampaignStatus: document.getElementById('setup-campaign-status'),
    setupCampaignOrg: document.getElementById('setup-campaign-org'),
    setupCampaignName: document.getElementById('setup-campaign-name'),
    setupCampaignCode: document.getElementById('setup-campaign-code'),
    setupCampaignTypes: document.getElementById('setup-campaign-types'),
    communityGrid: document.getElementById('community-campaigns'),
    communityEmpty: document.getElementById('community-empty'),
    manageCard: document.querySelector('.manage-card'),
    narrationCard: document.getElementById('region-narration'),
    narrationText: document.getElementById('region-narration-text'),
    narrationSubject: document.getElementById('region-narration-subject'),
    narrationPlay: document.getElementById('region-narration-play'),
    narrationStop: document.getElementById('region-narration-stop'),
    narrationRefresh: document.getElementById('region-narration-refresh'),
    narrationStatus: document.getElementById('region-narration-status')
  };

  const HTML_ESCAPE_LOOKUP = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;'
  };

  function escapeHtml(value) {
    return String(value ?? '').replace(/[&<>"']/g, ch => HTML_ESCAPE_LOOKUP[ch] || ch);
  }

  function titleize(value) {
    const str = String(value ?? '').replace(/[_-]+/g, ' ').trim();
    if (!str) return '';
    return str.replace(/\b\w/g, ch => ch.toUpperCase());
  }

  function initialsFromName(value) {
    const parts = String(value ?? '')
      .trim()
      .split(/\s+/)
      .filter(Boolean)
      .map(part => part[0]);
    if (!parts.length) return '';
    return parts.slice(0, 2).join('').toUpperCase();
  }

  function truncate(value, max = 160) {
    const str = String(value ?? '').trim();
    if (str.length <= max) return str;
    return `${str.slice(0, Math.max(0, max - 1))}`;
  }

  function collapseWhitespace(value) {
    return String(value ?? '').replace(/\s+/g, ' ').trim();
  }

  function formatCurrency(amount, currency = 'usd') {
    const numeric = Number(amount || 0);
    const code = String(currency || 'usd').toUpperCase();
    if (!Number.isFinite(numeric)) return '';
    try {
      return new Intl.NumberFormat(undefined, { style: 'currency', currency: code }).format(numeric);
    } catch (err) {
      return `${code} ${numeric.toFixed(2)}`;
    }
  }

  function formatMetricNumber(value, locale) {
    if (!Number.isFinite(value)) return null;
    try {
      return new Intl.NumberFormat(locale || undefined, {
        notation: 'compact',
        maximumFractionDigits: 1
      }).format(value);
    } catch (err) {
      return String(Math.round(value));
    }
  }

  function hexToRgba(hex, alpha = 1) {
    if (!hex) return null;
    const value = String(hex).trim().replace('#', '');
    if (![3, 6].includes(value.length)) return null;
    const segmentLength = value.length === 3 ? 1 : 2;
    const components = [];
    for (let index = 0; index < value.length; index += segmentLength) {
      let chunk = value.slice(index, index + segmentLength);
      if (chunk.length === 1) {
        chunk += chunk;
      }
      const numeric = parseInt(chunk, 16);
      if (Number.isNaN(numeric)) {
        return null;
      }
      components.push(numeric);
    }
    const [r = 0, g = 0, b = 0] = components;
    const normalizedAlpha = Math.max(0, Math.min(1, Number(alpha)));
    return `rgba(${r}, ${g}, ${b}, ${normalizedAlpha})`;
  }

  function getMetricsForFaith(faith) {
    if (!faith) return null;
    if (state.metricsByFaith instanceof Map) {
      return state.metricsByFaith.get(faith) || null;
    }
    if (state.metricsByFaith && typeof state.metricsByFaith === 'object') {
      return state.metricsByFaith[faith] || null;
    }
    return null;
  }

  function getCurrencyForRegion(region) {
    return REGION_CURRENCY_LOOKUP.get(region) || 'usd';
  }

  function setStatus(el, message, type = 'info') {
    if (!el) return;
    el.hidden = false;
    el.textContent = message;
    el.classList.remove('success', 'error');
    if (type === 'success') el.classList.add('success');
    if (type === 'error') el.classList.add('error');
  }

  function clearStatus(el) {
    if (!el) return;
    el.hidden = true;
    el.textContent = '';
    el.classList.remove('success', 'error');
  }

  function option(label, value) {
    const opt = document.createElement('option');
    opt.value = value;
    opt.textContent = label;
    return opt;
  }

  function getImagePoolForReligion(religion) {
    return RELIGION_IMAGE_POOLS.get(religion) || [];
  }

  function pickRandomImage(pool, exclude, forceDifferent = true) {
    if (!pool.length) return null;
    const unique = forceDifferent ? pool.filter(src => src !== exclude) : pool.slice();
    const options = unique.length ? unique : pool;
    const index = Math.floor(Math.random() * options.length);
    return options[index];
  }

  function setRandomSlideImage(slideId, religion, forceDifferent = true) {
    const imgEl = state.slideImages.get(slideId);
    if (!imgEl) return;
    const pool = getImagePoolForReligion(religion);
    const previous = state.lastSlideImage.get(slideId);
    const next = pickRandomImage(pool, previous, forceDifferent);
    if (next && next !== previous) {
      imgEl.src = next;
      state.lastSlideImage.set(slideId, next);
    } else if (!imgEl.src && next) {
      imgEl.src = next;
      state.lastSlideImage.set(slideId, next);
    }
  }

  function setNarrationControlsState(stateLabel) {
    const card = els.narrationCard;
    if (!card) return;
    if (stateLabel) {
      card.dataset.state = stateLabel;
    } else {
      delete card.dataset.state;
    }
    const playBtn = els.narrationPlay;
    const stopBtn = els.narrationStop;
    const refreshBtn = els.narrationRefresh;
    const isLoading = stateLabel === 'loading';
    const isPlaying = stateLabel === 'playing';
    if (playBtn) {
      let label = translate('regions.narrationPlay', {}, 'Play narration');
      if (isLoading) {
        label = translate('regions.narrationLoadingVoice', {}, 'Loading voice');
      } else if (isPlaying) {
        label = state.narrationContinuous
          ? translate('regions.narrationContinuousPlaying', {}, 'Continuous narration playing')
          : translate('regions.narrationPlaying', {}, 'Playing narration');
      } else if (state.narrationContinuous) {
        label = translate('regions.narrationContinuousEnabled', {}, 'Continuous narration enabled');
      }
      playBtn.disabled = isLoading;
      playBtn.textContent = label;
      playBtn.setAttribute('aria-pressed', String(Boolean(state.narrationContinuous)));
      playBtn.classList.toggle('is-active', Boolean(state.narrationContinuous));
    }
    if (stopBtn) {
      stopBtn.hidden = !isPlaying;
      stopBtn.disabled = !isPlaying;
    }
    if (refreshBtn) {
      refreshBtn.disabled = isLoading || isPlaying;
    }
    if (isLoading || isPlaying) {
      pauseAutoSlide();
    } else if (!state.narrationContinuous && stateLabel === 'idle') {
      resetAutoSlide();
    }
  }

  function stopNarrationPlayback(arg) {
    const options = (arg && typeof arg === 'object' && !('type' in arg)) ? arg : {};
    const { keepState = false } = options;
    const audio = state.activeNarrationAudio;
    const hadAudio = Boolean(audio);
    if (audio) {
      try {
        audio.pause();
      } catch (err) {
        console.warn('Narration pause failed', err);
      }
    }
    if (state.activeNarrationObjectUrl) {
      try {
        URL.revokeObjectURL(state.activeNarrationObjectUrl);
      } catch (err) {
        console.warn('Narration revoke failed', err);
      }
    }
    state.activeNarrationAudio = null;
    state.activeNarrationObjectUrl = null;
    if (!keepState) {
      setNarrationControlsState('idle');
    }
    return hadAudio;
  }

  async function handleNarrationAfterPlayback() {
    const pendingId = state.pendingNarrationSlideId;
    if (pendingId) {
      state.pendingNarrationSlideId = null;
      if (state.currentNarrationSlideId === pendingId) {
        const pendingSlide = SLIDES.find(item => item && item.id === pendingId);
        if (pendingSlide) {
          await ensureNarrationForSlide(pendingSlide, { force: false, autoPlay: state.narrationContinuous });
          return;
        }
      }
    }
    if (state.narrationContinuous) {
      await advanceContinuousNarration();
    } else {
      setNarrationControlsState('idle');
    }
  }

  async function playNarrationText(text, variant) {
    if (!text || !els.narrationCard) return;
    stopNarrationPlayback({ keepState: true });
    setNarrationControlsState('loading');
    setStatus(els.narrationStatus, translate('status.loadingNarrationAudio', {}, 'Loading narration audio'));
    try {
      const params = new URLSearchParams();
      params.set('t', text);
      if (variant) {
        params.set('variant', variant);
      }
      const response = await fetch(`/audio/tts?${params.toString()}`, { cache: 'no-store' });
      if (!response.ok) {
        const message = await response.text().catch(() => response.statusText);
        throw new Error(message || translate('status.unableToLoadNarration', {}, 'Unable to load narration.'));
      }
      const blob = await response.blob();
      const objectUrl = URL.createObjectURL(blob);
      const audio = new Audio(objectUrl);
      state.activeNarrationAudio = audio;
      state.activeNarrationObjectUrl = objectUrl;
      setNarrationControlsState('playing');
      setStatus(els.narrationStatus, translate('status.playingNarration', {}, 'Playing narration'));
      audio.addEventListener('ended', async () => {
        if (state.activeNarrationAudio === audio) {
          stopNarrationPlayback({ keepState: true });
          clearStatus(els.narrationStatus);
          try {
            await handleNarrationAfterPlayback();
          } catch (err) {
            console.warn('Narration continuation failed', err);
            setNarrationControlsState('idle');
          }
        }
      });
      audio.addEventListener('error', () => {
        if (state.activeNarrationAudio === audio) {
          stopNarrationPlayback();
          setStatus(els.narrationStatus, translate('status.unableToPlayNarration', {}, 'Unable to play narration audio.'), 'error');
        }
      });
      await audio.play();
    } catch (error) {
      console.warn('Narration playback failed', error);
      stopNarrationPlayback();
      setStatus(els.narrationStatus, collapseWhitespace(error?.message) || translate('status.unableToPlayNarration', {}, 'Unable to play narration audio.'), 'error');
    }
  }

  function isNarrationOnCooldown() {
    return typeof state.narrationCooldownUntil === 'number' && state.narrationCooldownUntil > Date.now();
  }

  function startNarrationCooldown() {
    state.narrationCooldownUntil = Date.now() + 10000;
  }

  async function playCurrentNarration() {
    if (state.narrationLoading || state.activeNarrationAudio) {
      return;
    }
    const slide = SLIDES[state.slideIndex];
    if (!slide) return;
    await ensureNarrationForSlide(slide, { force: false, autoPlay: true });
  }

  async function advanceContinuousNarration() {
    if (!state.narrationContinuous) {
      setNarrationControlsState('idle');
      return;
    }
    if (state.isTransitioning) {
      return;
    }
    const totalSlides = Array.isArray(SLIDES) ? SLIDES.length : 0;
    if (!totalSlides) {
      setNarrationControlsState('idle');
      return;
    }
    const nextIndex = (state.slideIndex + 1) % totalSlides;
    showSlide(nextIndex, false);
  }

  function updateNarrationCard(record, slide) {
    const card = els.narrationCard;
    if (!card) return;
    if (!record || !record.script) {
      card.hidden = true;
      return;
    }
    card.hidden = false;
    if (els.narrationText) {
      els.narrationText.textContent = record.script;
    }
    if (els.narrationSubject) {
      const subjectLabel = collapseWhitespace(record?.subject?.label);
      const subjectDetail = collapseWhitespace(record?.subject?.detail);
      if (subjectLabel) {
        els.narrationSubject.textContent = subjectDetail
          ? `${subjectLabel}  ${subjectDetail}`
          : subjectLabel;
        els.narrationSubject.hidden = false;
      } else {
        els.narrationSubject.textContent = '';
        els.narrationSubject.hidden = true;
      }
    }
    setNarrationControlsState('idle');
    clearStatus(els.narrationStatus);
    if (slide) {
      card.dataset.faith = slide.religion || '';
      card.dataset.region = slide.id || '';
    }
  }

  async function ensureNarrationForSlide(slide, options = {}) {
    const { force = false, autoPlay = false } = options;
    if (!slide || !els.narrationCard) return null;
    const existing = state.narrationBySlide.get(slide.id);
    if (state.activeNarrationAudio && !force && state.currentNarrationSlideId && slide.id !== state.currentNarrationSlideId) {
      if (existing) {
        updateNarrationCard(existing, slide);
        return existing;
      }
      state.pendingNarrationSlideId = slide.id;
      setStatus(els.narrationStatus, translate('status.narrationQueued', {}, 'Narration queued. Waiting for current audio to finish.'));
      return null;
    }
    if (existing && !force) {
      updateNarrationCard(existing, slide);
      if (autoPlay) {
        await playNarrationText(existing.script, existing.variant || state.narrationVariantFallback);
      }
      return existing;
    }

    const requestId = (state.narrationRequestId || 0) + 1;
    state.narrationRequestId = requestId;
    state.narrationLoading = true;
    els.narrationCard.hidden = false;
    setNarrationControlsState('loading');
    setStatus(els.narrationStatus, translate('status.draftingNarration', {}, 'Drafting narration'));
    const previous = existing || null;

    try {
      const payload = {
        channel: 'multifaith-giving-platform',
        slideId: slide.id,
        religion: slide.religion,
        region: slide.name,
      };
      const data = await postJSON('/api/giving/region-narration', payload);
      if (state.narrationRequestId !== requestId) {
        return null;
      }
      const script = collapseWhitespace(data?.script);
      if (!script) {
        throw new Error(translate('status.narrationUnavailable', {}, 'Narration unavailable right now.'));
      }
      const record = {
        script,
        subject: data?.subject || null,
        variant: collapseWhitespace(data?.variant) || state.narrationVariantFallback || 'faith_narrator',
        generatedAt: data?.generatedAt || new Date().toISOString(),
      };
      state.narrationBySlide.set(slide.id, record);
      if (state.currentNarrationSlideId === slide.id) {
        updateNarrationCard(record, slide);
        if (autoPlay) {
          await playNarrationText(record.script, record.variant);
        }
      }
      return record;
    } catch (error) {
      if (state.narrationRequestId === requestId) {
        console.warn('Narration load failed', error);
        if (previous) {
          state.narrationBySlide.set(slide.id, previous);
          updateNarrationCard(previous, slide);
          setStatus(els.narrationStatus, translate('status.usingSavedNarration', {}, 'Using saved narration. Try again soon.'), 'error');
        } else {
          setNarrationControlsState('idle');
          setStatus(els.narrationStatus, collapseWhitespace(error?.message) || translate('status.unableToLoadNarration', {}, 'Unable to load narration.'), 'error');
        }
      }
      return null;
    } finally {
      if (state.narrationRequestId === requestId) {
        state.narrationLoading = false;
        if (!state.activeNarrationAudio) {
          setNarrationControlsState('idle');
        }
      }
    }
  }

  function setupNarrationControls() {
    if (!els.narrationCard) return;
    const playBtn = els.narrationPlay;
    const refreshBtn = els.narrationRefresh;
    const stopBtn = els.narrationStop;

    if (playBtn) {
      playBtn.addEventListener('click', async () => {
        if (state.narrationContinuous) {
          state.narrationContinuous = false;
          startNarrationCooldown();
          if (!state.activeNarrationAudio) {
            clearStatus(els.narrationStatus);
          } else {
            setStatus(els.narrationStatus, translate('status.narrationContinuousDisabled', {}, 'Continuous narration disabled. Current audio will finish.'));
          }
          setNarrationControlsState(state.activeNarrationAudio ? 'playing' : 'idle');
          return;
        }
        if (isNarrationOnCooldown()) {
          setStatus(els.narrationStatus, translate('status.narrationCooldown', {}, 'Narration is cooling down. Please wait 10 seconds before replaying.'));
          return;
        }
        clearStatus(els.narrationStatus);
        state.narrationContinuous = true;
        pauseAutoSlide();
        setNarrationControlsState(state.activeNarrationAudio ? 'playing' : 'idle');
        try {
          await playCurrentNarration();
        } catch (error) {
          console.warn('Narration autoplay failed', error);
          state.narrationContinuous = false;
          startNarrationCooldown();
          setNarrationControlsState('idle');
          setStatus(els.narrationStatus, collapseWhitespace(error?.message) || translate('status.unableToStartNarration', {}, 'Unable to start narration autoplay.'), 'error');
        }
      });
    }

    if (refreshBtn) {
      refreshBtn.addEventListener('click', async () => {
        if (state.narrationLoading) return;
        const slide = SLIDES[state.slideIndex];
        if (!slide) return;
        await ensureNarrationForSlide(slide, { force: true, autoPlay: false });
      });
    }

    if (stopBtn) {
      stopBtn.addEventListener('click', () => {
        const wasContinuous = state.narrationContinuous;
        state.narrationContinuous = false;
        const hadAudio = stopNarrationPlayback({ keepState: true });
        clearStatus(els.narrationStatus);
        if (wasContinuous || hadAudio) {
          startNarrationCooldown();
        }
        setNarrationControlsState('idle');
      });
    }
  }

  function handleFaithSymbolPointerMove(event) {
    const el = event.currentTarget;
    const rect = el.getBoundingClientRect();
    const x = (event.clientX - rect.left) / rect.width - 0.5;
    const y = (event.clientY - rect.top) / rect.height - 0.5;
    const rotateX = Math.max(-MAX_FAITH_SYMBOL_TILT, Math.min(MAX_FAITH_SYMBOL_TILT, -y * MAX_FAITH_SYMBOL_TILT));
    const rotateY = Math.max(-MAX_FAITH_SYMBOL_TILT, Math.min(MAX_FAITH_SYMBOL_TILT, x * MAX_FAITH_SYMBOL_TILT));
    el.style.transform = `perspective(600px) rotateX(${rotateX.toFixed(2)}deg) rotateY(${rotateY.toFixed(2)}deg)`;
  }

  function handleFaithSymbolPointerLeave(event) {
    const el = event.currentTarget;
    el.style.transform = 'perspective(600px) rotateX(0deg) rotateY(0deg)';
  }

  function attachFaithSymbolTilt() {
    const symbols = document.querySelectorAll('.faith-symbol');
    symbols.forEach(symbol => {
      if (symbol.dataset.tiltBound === 'true') return;
      symbol.dataset.tiltBound = 'true';
      symbol.addEventListener('pointermove', handleFaithSymbolPointerMove);
      symbol.addEventListener('pointerleave', handleFaithSymbolPointerLeave);
      symbol.addEventListener('pointerup', handleFaithSymbolPointerLeave);
      symbol.addEventListener('pointercancel', handleFaithSymbolPointerLeave);
    });
  }

  function getSlideMediaBounds(index) {
    const slider = els.regionSlider;
    const track = els.regionTrack;
    if (!slider || !track) return null;
    const slideEl = track.children?.[index];
    const mediaEl = slideEl?.querySelector('.region-media');
    if (!mediaEl) return null;
    const sliderRect = slider.getBoundingClientRect();
    const mediaRect = mediaEl.getBoundingClientRect();
    return {
      top: mediaRect.top - sliderRect.top,
      left: mediaRect.left - sliderRect.left,
      width: mediaRect.width,
      height: mediaRect.height
    };
  }

  function updateTransitionOverlayForIndex(index) {
    const overlay = els.regionTransition;
    if (!overlay) return;
    const bounds = getSlideMediaBounds(index);
    if (!bounds) {
      overlay.style.removeProperty('--transition-top');
      overlay.style.removeProperty('--transition-left');
      overlay.style.removeProperty('--transition-width');
      overlay.style.removeProperty('--transition-height');
      return;
    }
    overlay.style.setProperty('--transition-top', `${bounds.top}px`);
    overlay.style.setProperty('--transition-left', `${bounds.left}px`);
    overlay.style.setProperty('--transition-width', `${bounds.width}px`);
    overlay.style.setProperty('--transition-height', `${bounds.height}px`);
  }

  function renderSlides() {
    els.regionTrack.innerHTML = '';
    els.sliderDots.innerHTML = '';
    state.slideImages.clear();
    state.lastSlideImage.clear();
    state.slideIndex = 0;
    state.hasRenderedInitialSlide = false;
    state.isTransitioning = false;
    state.preloadedSlideId = null;
    if (els.regionTransition) {
      els.regionTransition.classList.remove('is-active');
    }
    SLIDES.forEach((slide, index) => {
      const slideEl = document.createElement('article');
      slideEl.className = 'region-slide';
      slideEl.dataset.index = index;
      const symbol = RELIGION_SYMBOLS.get(slide.religion);
      const localizedRegion = getRegionContent(slide);
      const regionName = localizedRegion.name || slide.name;
      const regionCopy = localizedRegion.copy || slide.copy;
      const faithLabel = symbol?.labelKey
        ? translate(symbol.labelKey, {}, titleize(slide.religion))
        : getFaithLabel(slide.religion);
      const identity = symbol
        ? `<div class="faith-identity" data-religion="${slide.religion}"><div class="faith-symbol" aria-hidden="true" style="--symbol-image: url('${symbol.src}')"></div><span class="faith-label">${escapeHtml(faithLabel)}</span></div>`
        : '';
      const quickContent = getQuickContent(slide.religion);
      const followersLabel = quickContent.followersLabel || translate('quick.metrics.followers', {}, 'Global adherents');
      const loadingLabel = translate('quick.metrics.loading', {}, 'Loading metrics');
      const followersMarkup = `<div class="region-followers region-followers--loading" data-faith="${escapeHtml(slide.religion)}" data-label="${escapeHtml(followersLabel)}">
          <span class="region-followers__label">${escapeHtml(followersLabel)}</span>
          <span class="region-followers__value" aria-live="polite">${escapeHtml(loadingLabel)}</span>
        </div>`;
      const currencyMarkup = Array.isArray(slide.currencies) && slide.currencies.length
        ? `<div class="region-currencies">
            <span class="region-currencies__label">${escapeHtml(translate('regions.currenciesLabel', {}, 'Currencies'))}</span>
            <ul class="region-currency-list" aria-label="${escapeHtml(translate('regions.currenciesAria', {}, 'Supported currencies'))}">${slide.currencies
              .map(code => {
                const normalized = typeof code === 'string' ? code.trim().toUpperCase() : '';
                if (!normalized) return '';
                const currency = CURRENCIES.get(normalized);
                if (currency) {
                  return `<li class="region-currency-item" data-code="${escapeHtml(currency.code)}"><img class="region-currency-image" src="${escapeHtml(currency.src)}" alt="${escapeHtml(currency.name)}" loading="lazy"/><span class="region-currency-code">${escapeHtml(currency.code)}</span></li>`;
                }
                return `<li class="region-currency-item" data-code="${escapeHtml(normalized)}"><span class="region-currency-name">${escapeHtml(normalized)}</span></li>`;
              })
              .join('')}</ul>
          </div>`
        : '';
      const sectorsMarkup = Array.isArray(slide.sectors) && slide.sectors.length
        ? `<ul class="region-tags" aria-label="${escapeHtml(translate('regions.focusAreasAria', {}, 'Regional focus areas'))}">
            ${slide.sectors
              .map(item => {
                const sector = typeof item === 'string' ? { label: item } : item || {};
                const localizedSector = sector.metric ? getSectorStrings(sector.metric) : null;
                const label = escapeHtml(localizedSector?.label || sector.label || '');
                const metricKey = sector.metric ? String(sector.metric).trim() : '';
                const hasMetric = Boolean(metricKey);
                const metricAttr = hasMetric ? ` data-metric="${escapeHtml(metricKey)}"` : '';
                const faithAttr = hasMetric ? ` data-faith="${escapeHtml(slide.religion)}"` : '';
                const metricMarkup = hasMetric
                  ? `<span class="region-tag-metric">${escapeHtml(loadingLabel)}</span>`
                  : '';
                const loadingClass = hasMetric ? ' region-tag--loading' : '';
                return `<li class="region-tag${loadingClass}"${faithAttr}${metricAttr}><span class="region-tag-label">${label}</span>${metricMarkup}</li>`;
              })
              .join('')}
          </ul>`
        : '';
      slideEl.innerHTML = `
        <div class="region-media">
          <img class="region-image" alt="${escapeHtml(translate('regions.imageAlt', { region: regionName }, `${regionName} faith communities`))}" loading="lazy"/>
        </div>
        <div class="region-meta">
          ${identity}
          <h3>${escapeHtml(regionName)}</h3>
          ${followersMarkup}
          <p>${escapeHtml(regionCopy)}</p>
        </div>
        ${currencyMarkup}
        ${sectorsMarkup}
      `;
      slideEl.classList.add(index % 2 === 0 ? 'pan-up' : 'pan-down');
      const imgEl = slideEl.querySelector('.region-image');
      if (imgEl) {
        state.slideImages.set(slide.id, imgEl);
        setRandomSlideImage(slide.id, slide.religion, false);
      }
      els.regionTrack.appendChild(slideEl);

      const dot = document.createElement('div');
      dot.className = 'slider-dot';
      dot.dataset.index = index;
      dot.addEventListener('click', () => showSlide(index, true));
      els.sliderDots.appendChild(dot);
    });
    if (els.transitionCurrent) {
      els.transitionCurrent.style.backgroundImage = 'none';
    }
    if (els.transitionNext) {
      els.transitionNext.style.backgroundImage = 'none';
      els.transitionNext.style.setProperty('--transition-mask-image', 'none');
    }
    showSlide(0, false, true);
    updateSlideMetrics();
    attachFaithSymbolTilt();
    updateTransitionOverlayForIndex(0);
  }

  function updateSlideMetrics() {
    const followerNodes = document.querySelectorAll('.region-followers[data-faith]');
    followerNodes.forEach(node => {
      const faith = node.getAttribute('data-faith');
      const valueEl = node.querySelector('.region-followers__value');
      if (!faith || !valueEl) return;
      const metrics = getMetricsForFaith(faith);
      if (!metrics) {
        valueEl.textContent = translate('general.loading', {}, 'Loading');
        valueEl.removeAttribute('title');
        valueEl.removeAttribute('aria-label');
        node.classList.add('region-followers--loading');
        return;
      }
      const followersEntry = metrics.followers || {};
      const followersValue = followersEntry.value;
      if (Number.isFinite(followersValue)) {
        const config = QUICK_FAITH_MAP.get(faith);
        const formatted = formatMetricNumber(followersValue, config?.locale) || String(Math.round(followersValue));
        const yearSuffix = followersEntry.year ? ` (${followersEntry.year})` : '';
        valueEl.textContent = `${formatted}${yearSuffix}`;
        const label = node.dataset.label || translate('quick.metrics.followers', {}, 'Global adherents');
        let precise = '';
        try {
          precise = new Intl.NumberFormat(config?.locale || undefined).format(followersValue);
        } catch (err) {
          precise = String(Math.round(followersValue));
        }
        const descriptive = label ? `${label}` : translate('quick.metrics.followers', {}, 'Global adherents');
        valueEl.setAttribute('title', `${precise}${yearSuffix || ''}  ${descriptive}`);
        valueEl.setAttribute('aria-label', `${formatted}${yearSuffix} ${descriptive}`);
        node.classList.remove('region-followers--loading');
      } else {
        valueEl.textContent = '';
        valueEl.removeAttribute('title');
        const label = node.dataset.label || translate('quick.metrics.followers', {}, 'Global adherents');
        valueEl.setAttribute('aria-label', translate('regions.metricUnavailableFor', { label }, `Metric unavailable for ${label}`));
        node.classList.add('region-followers--loading');
      }
    });
    const nodes = document.querySelectorAll('.region-tag[data-faith][data-metric]');
    nodes.forEach(node => {
      const faith = node.getAttribute('data-faith');
      const metricKey = node.getAttribute('data-metric');
      const metricEl = node.querySelector('.region-tag-metric');
      if (!metricEl) return;
      const metrics = getMetricsForFaith(faith);
      if (!metrics) {
        metricEl.textContent = translate('quick.metrics.loading', {}, 'Loading metrics');
        node.classList.add('region-tag--loading');
        return;
      }
      const sector = metrics?.sectors?.[metricKey];
      if (sector && Number.isFinite(sector.value)) {
        const config = QUICK_FAITH_MAP.get(faith);
        const formatted = formatMetricNumber(sector.value, config?.locale);
        const valueLabel = formatted ?? String(Math.round(sector.value));
        const text = translate('quick.metrics.actionsSuffix', { count: valueLabel }, `${valueLabel} actions`);
        metricEl.textContent = text;
        metricEl.setAttribute('aria-label', text);
        node.classList.remove('region-tag--loading');
      } else if (sector && Object.prototype.hasOwnProperty.call(metrics.sectors || {}, metricKey)) {
        metricEl.textContent = '';
        metricEl.setAttribute('aria-label', translate('regions.metricUnavailable', {}, 'Metric unavailable'));
        node.classList.add('region-tag--loading');
      } else {
        metricEl.textContent = '';
        metricEl.setAttribute('aria-label', translate('regions.metricUnavailable', {}, 'Metric unavailable'));
        node.classList.add('region-tag--loading');
      }
    });
  }

  function showSlide(index, manual = false, skipTransition = false) {
    if (state.isTransitioning) return;
    const nextIndex = (index + SLIDES.length) % SLIDES.length;
    const currentIndex = state.slideIndex;
    const shouldAnimate = !skipTransition && state.hasRenderedInitialSlide && nextIndex !== currentIndex;
    if (shouldAnimate && els.regionTransition && els.transitionCurrent && els.transitionNext) {
      startSlideTransition(currentIndex, nextIndex, manual);
      return;
    }
    finalizeSlideChange(nextIndex, manual);
  }

  function startSlideTransition(currentIndex, nextIndex, manual) {
    const overlay = els.regionTransition;
    const currentScene = els.transitionCurrent;
    const nextScene = els.transitionNext;
    const currentSlide = SLIDES[currentIndex];
    const nextSlideData = SLIDES[nextIndex];
    if (!overlay || !currentScene || !nextScene || !currentSlide || !nextSlideData) {
      finalizeSlideChange(nextIndex, manual);
      return;
    }

    state.isTransitioning = true;
    setRandomSlideImage(nextSlideData.id, nextSlideData.religion);
    const currentImg = state.slideImages.get(currentSlide.id);
    const nextImg = state.slideImages.get(nextSlideData.id);
    const currentSrc = currentImg?.src || '';
    const nextSrc = nextImg?.src || '';
    currentScene.style.backgroundImage = currentSrc ? `url("${currentSrc}")` : 'none';
    nextScene.style.backgroundImage = nextSrc ? `url("${nextSrc}")` : 'none';
    const symbol = RELIGION_SYMBOLS.get(nextSlideData.religion);
    if (symbol?.src) {
      nextScene.style.setProperty('--transition-mask-image', `url("${symbol.src}")`);
    } else {
      nextScene.style.setProperty('--transition-mask-image', 'none');
    }
    const duration = 1800;
    overlay.style.setProperty('--transition-duration', `${duration}ms`);
    updateTransitionOverlayForIndex(currentIndex);
    state.preloadedSlideId = nextSlideData.id;

    // Reset animation state to allow retriggering
    currentScene.style.animation = 'none';
    nextScene.style.animation = 'none';
    void overlay.offsetWidth;
    currentScene.style.animation = '';
    nextScene.style.animation = '';

    overlay.classList.add('is-active');

    let finished = false;
    let fallbackTimer = null;
    const timerHost = typeof window !== 'undefined' ? window : globalThis;
    const finish = () => {
      if (finished) return;
      finished = true;
      if (fallbackTimer) {
        timerHost.clearTimeout(fallbackTimer);
      }
      finalizeSlideChange(nextIndex, manual);
      overlay.classList.remove('is-active');
      currentScene.style.backgroundImage = 'none';
      nextScene.style.backgroundImage = 'none';
      nextScene.style.setProperty('--transition-mask-image', 'none');
      state.isTransitioning = false;
      updateTransitionOverlayForIndex(state.slideIndex);
    };

    fallbackTimer = timerHost.setTimeout(finish, duration + 250);
    nextScene.addEventListener('animationend', finish, { once: true });
  }

  function finalizeSlideChange(newIndex, manual) {
    state.slideIndex = newIndex;
    stopNarrationPlayback();
    const offset = -state.slideIndex * 100;
    els.regionTrack.style.transform = `translateX(${offset}%)`;
    const slides = Array.from(els.regionTrack.children);
    slides.forEach((slideEl, idx) => {
      const isActive = idx === state.slideIndex;
      slideEl.classList.toggle('active', isActive);
      if (isActive) {
        const img = slideEl.querySelector('.region-image');
        if (img) {
          img.style.animation = 'none';
          void img.offsetHeight;
          img.style.animation = '';
        }
      }
    });
    Array.from(els.sliderDots.children).forEach((dot, idx) => {
      dot.classList.toggle('active', idx === state.slideIndex);
    });
    const slide = SLIDES[state.slideIndex];
    state.currentNarrationSlideId = slide?.id || null;
    if (slide) {
      if (state.preloadedSlideId === slide.id) {
        state.preloadedSlideId = null;
      } else {
        setRandomSlideImage(slide.id, slide.religion);
      }
      ensureNarrationForSlide(slide, { autoPlay: state.narrationContinuous });
    } else if (els.narrationCard) {
      els.narrationCard.hidden = true;
    }
    updateTransitionOverlayForIndex(state.slideIndex);
    if (manual) {
      resetAutoSlide();
    }
    if (!state.hasRenderedInitialSlide) {
      state.hasRenderedInitialSlide = true;
    }
  }

  function nextSlide(manual = false) {
    if (state.isTransitioning) return;
    showSlide(state.slideIndex + 1, manual);
  }

  function prevSlide() {
    if (state.isTransitioning) return;
    showSlide(state.slideIndex - 1, true);
  }

  function pauseAutoSlide() {
    if (state.autoTimer) {
      clearInterval(state.autoTimer);
      state.autoTimer = null;
    }
  }

  function resetAutoSlide() {
    pauseAutoSlide();
    if (state.narrationContinuous) {
      return;
    }
    state.autoTimer = setInterval(nextSlide, 8000);
  }

  function renderSectors() {
    els.sectorGrid.innerHTML = '';
    SECTORS.forEach(sector => {
      const card = document.createElement('article');
      card.className = 'sector-card';
      const strings = getSectorStrings(sector.value);
      card.innerHTML = `<h3>${escapeHtml(strings.title)}</h3><p>${escapeHtml(strings.desc)}</p>`;
      els.sectorGrid.appendChild(card);
    });
  }

  function renderCommunityCampaigns(campaigns) {
    if (!els.communityGrid) return;
    els.communityGrid.innerHTML = '';
    const list = Array.isArray(campaigns) ? campaigns : [];
    if (!list.length) {
      if (els.communityEmpty) {
        els.communityEmpty.hidden = false;
        els.communityEmpty.textContent = translate('community.empty', {}, 'No community campaigns have launched yet. Share yours to be featured here.');
      }
      return;
    }

    if (els.communityEmpty) {
      els.communityEmpty.hidden = true;
    }

    list.forEach(campaign => {
      const card = document.createElement('article');
      card.className = 'community-card';
      const goal = Number(campaign.goalAmount || 0);
      const raised = Number(campaign.amountRaised || 0);
      const currency = campaign.currency || getCurrencyForRegion(campaign.region);
      const progressPercent = goal > 0 ? Math.min(100, Math.round((raised / goal) * 100)) : 0;
      const goalReached = goal > 0 && raised >= goal;
      const remainingPercent = Math.max(0, 100 - progressPercent);
      const statusMessage = goal > 0
        ? goalReached
          ? translate('community.goalReached', {}, 'Goal reached')
          : translate('community.toGoal', { remaining: remainingPercent }, `${remainingPercent}% to goal`)
        : translate('community.openGoal', {}, 'Open goal');
      const religionLabel = getFaithLabel(campaign.religion || '');
      const regionSlide = SLIDES.find(slide => slide.id === campaign.region);
      const regionLabel = regionSlide ? (getRegionContent(regionSlide).name || regionSlide.name) : String(campaign.region || '').toUpperCase();
      const withdrawalLabel = campaign.allowEarlyWithdrawal
        ? translate('community.withdrawalFlexible', {}, 'Flexible withdrawals')
        : translate('community.withdrawalGoal', {}, 'Goal release');
      const metaParts = [religionLabel, regionLabel, withdrawalLabel].filter(Boolean);
      const metaFallback = translate('community.metaFallback', {}, 'Community');
      const metaHtml = (metaParts.length ? metaParts : [metaFallback]).map(part => `<span>${escapeHtml(part)}</span>`).join('');
      const description = truncate(campaign.description || '', 190);
      const paymentLink = campaign?.paymentLink?.url
        ? `<a class="btn" href="${escapeHtml(campaign.paymentLink.url)}" target="_blank" rel="noreferrer">${escapeHtml(translate('community.giveNow', {}, 'Give now'))}</a>`
        : '';
      const rawProfileName = typeof campaign.profileName === 'string' ? campaign.profileName.trim() : '';
      const profileLabel = rawProfileName || translate('community.anonymous', {}, 'Anonymous');
      const imageContent = campaign.imageUrl
        ? `<img src="${escapeHtml(campaign.imageUrl)}" alt="${escapeHtml(rawProfileName || campaign.campaignName || 'Community campaign')}" loading="lazy"/>`
        : `<div class="community-initial">${escapeHtml(initialsFromName(rawProfileName || campaign.campaignName))}</div>`;
      const raisedLabel = escapeHtml(formatCurrency(raised, currency));
      const goalLabel = goal > 0
        ? escapeHtml(translate('community.goalLabel', { amount: formatCurrency(goal, currency) }, `of ${formatCurrency(goal, currency)}`))
        : escapeHtml(translate('community.noGoal', {}, 'No goal set'));
      card.innerHTML = `
        <div class="community-media">${imageContent}</div>
        <div class="community-body">
          <div class="community-meta">${metaHtml}</div>
          <h3>${escapeHtml(campaign.campaignName || '')}</h3>
          <p>${escapeHtml(description)}</p>
          <div class="community-progress">
            <div class="progress-bar"><div style="width:${progressPercent}%"></div></div>
            <div class="progress-meta">
              <span>${raisedLabel}</span>
              <span>${goalLabel}</span>
            </div>
            <span class="community-status${goalReached ? ' goal-met' : ''}">${escapeHtml(statusMessage)}</span>
          </div>
          <div class="community-actions">
            ${paymentLink}
            <span class="community-profile">${escapeHtml(translate('community.byLine', { name: profileLabel }, `by ${profileLabel}`))}</span>
          </div>
        </div>`;
      card.dataset.campaignId = campaign.id || campaign._id || '';
      els.communityGrid.appendChild(card);
    });
  }

  async function loadCommunityCampaigns() {
    if (!els.communityGrid) return;
    try {
      const data = await fetchJSON('/api/giving/community-campaigns');
      const campaigns = Array.isArray(data) ? data : data.campaigns ?? data.data ?? [];
      state.communityCampaigns = campaigns;
      renderCommunityCampaigns(campaigns);
    } catch (err) {
      console.warn('Unable to load community campaigns', err);
      if (els.communityEmpty) {
        els.communityEmpty.hidden = false;
        els.communityEmpty.textContent = translate('community.error', {}, 'Unable to load community campaigns right now. Please try again soon.');
      }
    }
  }

  async function loadFaithMetrics(forceRefresh = false) {
    const url = forceRefresh ? '/api/giving/faith-metrics?refresh=1' : '/api/giving/faith-metrics';
    try {
      const data = await fetchJSON(url);
      const payload = data?.faiths ?? data?.metrics ?? {};
      const metricsMap = new Map();
      if (payload instanceof Map) {
        payload.forEach((value, key) => metricsMap.set(key, value));
      } else if (Array.isArray(payload)) {
        payload.forEach(entry => {
          if (entry && typeof entry === 'object') {
            const key = entry.key || entry.faith || entry.id;
            if (key) {
              metricsMap.set(key, entry.value ?? entry.metrics ?? entry);
            }
          }
        });
      } else {
        Object.entries(payload).forEach(([key, value]) => {
          metricsMap.set(key, value);
        });
      }
      state.metricsByFaith = metricsMap;
      state.metricsUpdatedAt = data?.updatedAt || null;
    } catch (error) {
      console.warn('Unable to load faith metrics', error);
      if (!(state.metricsByFaith instanceof Map)) {
        state.metricsByFaith = new Map();
      }
    } finally {
      updateQuickMetricsDisplay();
      updateSlideMetrics();
    }
  }

  function populateSelect(select, values, placeholder) {
    if (!select) return;
    const current = select.value;
    select.innerHTML = '';
    if (placeholder) {
      const opt = option(placeholder, '');
      opt.disabled = true;
      opt.selected = true;
      select.appendChild(opt);
    }
    values.forEach(item => {
      if (typeof item === 'string') {
        select.appendChild(option(item, item));
      } else if (item && typeof item === 'object') {
        const opt = option(item.label ?? item.name ?? item.value, item.value ?? item._id);
        if (item._id) {
          opt.dataset.json = JSON.stringify(item);
        }
        select.appendChild(opt);
      }
    });
    if (current && Array.from(select.options).some(o => o.value === current)) {
      select.value = current;
    }
  }

  function cloneDefaultCampaigns(list) {
    return list.map(campaign => ({
      ...campaign,
      donationTypes: Array.isArray(campaign.donationTypes) ? [...campaign.donationTypes] : undefined
    }));
  }

  function ensureDefaultOrganizations() {
    const seen = new Set(state.orgs.map(org => (org && (org._id ? `id:${org._id}` : `name:${(org.name || '').toLowerCase()}:${org.region || ''}`))));
    DEFAULT_ORGS.forEach(org => {
      const key = org._id ? `id:${org._id}` : `name:${(org.name || '').toLowerCase()}:${org.region || ''}`;
      if (!seen.has(key)) {
        state.orgs.push({
          ...org,
          locales: Array.isArray(org.locales) ? [...org.locales] : []
        });
        seen.add(key);
      }
      if (org._id && DEFAULT_CAMPAIGNS.has(org._id) && !state.campaignsByOrg.has(org._id)) {
        state.campaignsByOrg.set(org._id, cloneDefaultCampaigns(DEFAULT_CAMPAIGNS.get(org._id)));
      }
    });
  }

  function populateFaithSelects() {
    const options = FAITH_OPTIONS.map(f => ({ label: getFaithLabel(f.value), value: f.value }));
    const placeholder = translate('select.faith', {}, 'Choose a faith');
    populateSelect(els.donationFaith, options, placeholder);
    populateSelect(els.setupOrgFaith, options, placeholder);
  }

  function populateRegionSelects() {
    const regions = SLIDES.map(slide => {
      const localized = getRegionContent(slide);
      return { label: localized.name || slide.name, value: slide.id };
    });
    const placeholder = translate('select.region', {}, 'Choose a region');
    populateSelect(els.donationRegion, regions, placeholder);
    populateSelect(els.setupOrgRegion, regions, placeholder);
  }

  function populateSectorSelects() {
    const sectors = SECTORS.map(s => {
      const localized = getSectorStrings(s.value);
      return { label: localized.label, value: s.value };
    });
    populateSelect(els.donationSector, sectors, translate('select.sector', {}, 'Select a sector'));
  }

  function setDonationTypeOptions(religion) {
    const values = FAITH_TYPES[religion] ?? [];
    const items = values.length ? values : ['general'];
    const placeholder = translate('select.donationType', {}, 'Select donation type');
    populateSelect(
      els.donationType,
      items.map(v => ({ label: v.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase()), value: v })),
      placeholder
    );
  }

  function updateOrgOptions() {
    const region = els.donationRegion.value;
    const faith = els.donationFaith.value;
    const list = state.orgs.filter(org => {
      const regionMatch = !region || org.region === region;
      const faithMatch = !faith || org.religion === faith;
      return regionMatch && faithMatch;
    });
    const placeholder = translate('select.organization', {}, 'Choose an organization');
    const orgOptions = list.map(org => {
      const regionContent = SLIDES.find(slide => slide.id === org.region);
      const regionLabel = regionContent ? (getRegionContent(regionContent).name || regionContent.name) : org.region;
      const faithLabel = getFaithLabel(org.religion);
      return { ...org, label: `${org.name}  ${regionLabel}/${faithLabel}`, value: org._id };
    });
    populateSelect(els.donationOrg, orgOptions, placeholder);
    const managementOptions = state.orgs.map(org => {
      const regionContent = SLIDES.find(slide => slide.id === org.region);
      const regionLabel = regionContent ? (getRegionContent(regionContent).name || regionContent.name) : org.region;
      return { ...org, label: `${org.name} (${regionLabel})`, value: org._id };
    });
    populateSelect(els.setupCampaignOrg, managementOptions, placeholder);
    els.orgEmpty.hidden = list.length > 0 || state.orgs.length === 0;
  }

  function updateCampaignOptions(orgId) {
    const campaigns = state.campaignsByOrg.get(orgId) ?? [];
    populateSelect(
      els.donationCampaign,
      campaigns.map(campaign => ({
        ...campaign,
        label: campaign.sectorFocus
          ? `${campaign.name} (${SECTOR_TITLE_LOOKUP.get(campaign.sectorFocus) || campaign.sectorFocus})`
          : campaign.name,
        value: campaign._id
      })),
      translate('select.campaign', {}, 'Choose a campaign')
    );
  }

  function hydrateDonationTypesFromCampaign(campaign) {
    if (!campaign) return;
    const donationTypes = Array.isArray(campaign.donationTypes) && campaign.donationTypes.length ? campaign.donationTypes : undefined;
    if (donationTypes) {
      const placeholder = translate('select.donationType', {}, 'Select donation type');
      populateSelect(
        els.donationType,
        donationTypes.map(v => ({ label: v.replace(/_/g, ' ').replace(/\b\w/g, ch => ch.toUpperCase()), value: v })),
        placeholder
      );
    }
    if (campaign.sectorFocus) {
      const hasSectorOption = Array.from(els.donationSector.options).some(opt => opt.value === campaign.sectorFocus);
      if (hasSectorOption) {
        els.donationSector.value = campaign.sectorFocus;
      }
    }
  }

  async function fetchJSON(url) {
    const res = await fetch(url, { headers: { 'Accept': 'application/json' } });
    if (!res.ok) {
      throw new Error(res.statusText || 'Request failed');
    }
    return res.json();
  }

  function updateFooterCopy() {
    const footer = document.querySelector('footer[data-i18n-html="footer.copy"]');
    if (!footer) return;
    const year = new Date().getFullYear();
    const yearMarkup = `<span id="year">${year}</span>`;
    footer.innerHTML = translate('footer.copy', { year: yearMarkup }, ` ${year} New Bright Water. Multi-faith donations, ready the moment you sign in.`);
  }

  async function postJSON(url, payload) {
    const res = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify(payload)
    });
    if (!res.ok) {
      const text = await res.text();
      throw new Error(text || res.statusText || 'Request failed');
    }
    return res.json();
  }

  async function loadOrganizations() {
    try {
      const data = await fetchJSON('/api/giving/organizations');
      const orgs = Array.isArray(data) ? data : data.organizations ?? data.data ?? [];
      if (Array.isArray(orgs)) {
        state.orgs = orgs.slice();
      }
    } catch (err) {
      console.warn('Unable to load organizations', err);
      state.orgs = [];
    }
    ensureDefaultOrganizations();
    updateOrgOptions();
  }

  async function loadCampaigns(orgId) {
    if (!orgId) return;
    if (!state.campaignsByOrg.has(orgId) && DEFAULT_CAMPAIGNS.has(orgId)) {
      state.campaignsByOrg.set(orgId, cloneDefaultCampaigns(DEFAULT_CAMPAIGNS.get(orgId)));
    }
    if (state.campaignFetchAttempts.has(orgId)) return;
    state.campaignFetchAttempts.add(orgId);
    try {
      const data = await fetchJSON(`/api/giving/campaigns?orgId=${encodeURIComponent(orgId)}`);
      const campaigns = Array.isArray(data) ? data : data.campaigns ?? data.data ?? [];
      if (Array.isArray(campaigns)) {
        state.campaignsByOrg.set(orgId, campaigns);
      }
    } catch (err) {
      console.warn('Unable to load campaigns', err);
      if (!state.campaignsByOrg.has(orgId) || !state.campaignsByOrg.get(orgId)?.length) {
        state.campaignsByOrg.set(orgId, cloneDefaultCampaigns(DEFAULT_CAMPAIGNS.get(orgId) ?? []));
      }
    }
  }

  function findQuickOrgForFaith(faith) {
    if (!faith) return null;
    const match = state.orgs.find(org => org?.religion === faith);
    if (match) return match;
    return DEFAULT_ORGS.find(org => org.religion === faith) || null;
  }

  function findQuickCampaignForOrg(orgId) {
    if (!orgId) return null;
    const list = state.campaignsByOrg.get(orgId);
    if (Array.isArray(list) && list.length) {
      return list[0];
    }
    const fallback = DEFAULT_CAMPAIGNS.get(orgId);
    if (Array.isArray(fallback) && fallback.length) {
      return fallback[0];
    }
    return null;
  }

  async function performQuickCheckout(mode, quickState, elements) {
    if (!quickState || !elements) return;
    const { status, result, link, copy, amountButtons, generateBtn, shareBtn } = elements;

    const toggleBusy = (disabled) => {
      [generateBtn, shareBtn].forEach((btn) => {
        if (btn) {
          btn.disabled = disabled;
        }
      });
    };

    if (result) {
      result.hidden = true;
    }
    if (link) {
      link.textContent = '';
      link.removeAttribute('href');
    }
    if (copy) {
      copy.disabled = false;
      copy.textContent = translate('quick.copy', {}, 'Copy link');
    }
    clearStatus(status);

    try {
      const config = QUICK_FAITH_MAP.get(quickState.faith);
      if (!config) {
        throw new Error(translate('status.quickSelectFaith', {}, 'Pick a tradition to start a checkout.'));
      }

      const activeButton = amountButtons?.[quickState.selectedIndex];
      const amount = Number(activeButton?.dataset.amountValue ?? 0);
      if (!Number.isFinite(amount) || amount <= 0) {
        throw new Error(translate('status.quickSelectAmount', {}, 'Choose an amount first.'));
      }
      if (amount > STRIPE_MAX_AMOUNT) {
        throw new Error(translate('status.quickAmountTooHigh', {}, 'Stripe supports donations up to 999,999,999,999 in your currency. Try a smaller gift.'));
      }

      const org = findQuickOrgForFaith(quickState.faith);
      if (!org || !org._id) {
        throw new Error(translate('status.quickNoOrg', {}, 'No organization is available for this lane yet. Add one in the management tab.'));
      }

      await loadCampaigns(org._id);
      const campaign = findQuickCampaignForOrg(org._id);
      if (!campaign || !campaign._id) {
        throw new Error(translate('status.quickNoCampaign', {}, 'No campaign is ready for this organization yet. Create one to continue.'));
      }

      const donationTypes = Array.isArray(campaign.donationTypes) ? campaign.donationTypes : [];
      const payload = {
        orgId: org._id,
        campaignId: campaign._id,
        region: org.region,
        religion: quickState.faith,
        donationType: donationTypes[0] || 'general',
        sector: campaign.sectorFocus,
        amount,
        currency: campaign.currency || config.currency || getCurrencyForRegion(org.region),
        interval: undefined,
        allowPromo: true,
        campaignName: campaign.name,
        orgName: org.name,
        description: campaign.description
      };

      setStatus(
        status,
        mode === 'checkout'
          ? translate('status.preparingCheckout', {}, 'Preparing your checkout')
          : translate('status.generatingLink', {}, 'Generating a shareable link')
      );
      toggleBusy(true);
      const data = await postJSON('/api/giving/payment-link', payload);
      const url = data?.url;
      if (!url) {
        throw new Error(translate('status.paymentLinkMissing', {}, 'Payment link not returned.'));
      }

      if (link) {
        link.href = url;
        link.textContent = url;
      }
      if (result) {
        result.hidden = false;
      }

      let finalMessage = mode === 'checkout'
        ? translate('status.quickCheckoutReady', {}, 'Checkout ready! We opened it in a new tab.')
        : translate('status.quickDonationLinkReady', {}, 'Donation link readycopy it from below.');

      if (mode === 'checkout') {
        try {
          window.open(url, '_blank', 'noopener');
        } catch (err) {
          console.warn('Popup blocked', err);
          finalMessage = translate('status.quickCheckoutBlocked', {}, 'Checkout ready. Use the link below if the popup was blocked.');
        }
      } else if (navigator?.clipboard) {
        try {
          await navigator.clipboard.writeText(url);
          finalMessage = translate('status.copySuccess', {}, 'Donation link copied to your clipboard!');
          if (copy) {
            copy.disabled = true;
            copy.textContent = translate('status.copied', {}, 'Copied!');
            setTimeout(() => {
              if (copy) {
                copy.disabled = false;
                copy.textContent = translate('quick.copy', {}, 'Copy link');
              }
            }, 2400);
          }
        } catch (err) {
          console.warn('Clipboard copy failed', err);
        }
      }

      setStatus(status, finalMessage, 'success');
    } catch (error) {
      setStatus(status, error?.message || translate('status.unableToGenerateCheckout', {}, 'Unable to generate checkout'), 'error');
    } finally {
      toggleBusy(false);
    }
  }

  function handleOrgSelection() {
    const select = els.donationOrg;
    const option = select.options[select.selectedIndex];
    if (option?.dataset?.json) {
      try {
        const org = JSON.parse(option.dataset.json);
        if (org.region) {
          els.donationRegion.value = org.region;
        }
        if (org.religion) {
          els.donationFaith.value = org.religion;
          setDonationTypeOptions(org.religion);
        }
      } catch (err) {
        console.warn('Unable to parse organization option', err);
      }
    }
  }

  function extractCampaignFromSelect() {
    const select = els.donationCampaign;
    const option = select.options[select.selectedIndex];
    if (option?.dataset?.json) {
      try {
        return JSON.parse(option.dataset.json);
      } catch (err) {
        console.warn('Unable to parse campaign option', err);
      }
    }
    return null;
  }

  function prepareDonationPayload() {
    const orgId = els.donationOrg.value;
    const campaignId = els.donationCampaign.value;
    if (!orgId || !campaignId) {
      throw new Error(translate('status.selectOrgCampaign', {}, 'Select an organization and campaign.'));
    }
    const frequency = els.donationFrequency.value;
    const interval = frequency === 'one_time' ? undefined : frequency;
    const amount = Number(els.donationAmount.value);
    if (!amount || Number.isNaN(amount)) {
      throw new Error('Enter a donation amount.');
    }
    if (amount > STRIPE_MAX_AMOUNT) {
      throw new Error('Stripe supports donations up to 999,999,999,999 in your currency. Enter a smaller amount.');
    }
    const org = state.orgs.find(item => item?._id === orgId);
    const campaign = extractCampaignFromSelect();
    const currency = (campaign?.currency || org?.currency || getCurrencyForRegion(els.donationRegion.value));
    const payload = {
      orgId,
      campaignId,
      region: els.donationRegion.value,
      religion: els.donationFaith.value,
      donationType: els.donationType.value,
      sector: els.donationSector.value,
      amount,
      interval,
      currency,
      campaignName: campaign?.name,
      orgName: org?.name,
      description: campaign?.description,
      allowPromo: els.donationPromo.value === 'true',
      donor: {
        name: els.donationName.value,
        email: els.donationEmail.value,
        notes: els.donationNotes.value.trim() || undefined
      }
    };
    return payload;
  }

  function attachEvents() {
    els.prevSlide.addEventListener('click', () => prevSlide());
    els.nextSlide.addEventListener('click', () => { nextSlide(true); });
    resetAutoSlide();

    els.donationFaith.addEventListener('change', () => {
      setDonationTypeOptions(els.donationFaith.value);
      updateOrgOptions();
    });
    els.donationRegion.addEventListener('change', () => {
      updateOrgOptions();
    });
    els.donationOrg.addEventListener('change', async () => {
      handleOrgSelection();
      const orgId = els.donationOrg.value;
      await loadCampaigns(orgId);
      updateCampaignOptions(orgId);
    });
    els.donationCampaign.addEventListener('change', () => {
      const campaign = extractCampaignFromSelect();
      hydrateDonationTypesFromCampaign(campaign);
    });

    els.donationForm.addEventListener('submit', async event => {
      event.preventDefault();
      clearStatus(els.donationStatus);
      els.donationResult.hidden = true;
      try {
        const payload = prepareDonationPayload();
        setStatus(els.donationStatus, translate('status.generatingStripeCheckout', {}, 'Generating Stripe checkout'));
        const data = await postJSON('/api/giving/payment-link', payload);
        const url = data?.url;
        if (!url) {
          throw new Error(translate('status.paymentLinkMissing', {}, 'Payment link not returned.'));
        }
        setStatus(els.donationStatus, translate('status.paymentReady', {}, 'Payment link ready!'), 'success');
        els.donationLink.href = url;
        els.donationLink.textContent = url;
        els.donationMeta.textContent = JSON.stringify(data.meta ?? payload, null, 2);
        els.donationResult.hidden = false;
        try {
          window.open(url, '_blank', 'noopener');
        } catch (err) {
          console.warn('Popup blocked', err);
        }
      } catch (err) {
        setStatus(els.donationStatus, err.message || translate('status.unableToGeneratePayment', {}, 'Unable to generate payment link'), 'error');
      }
    });

    els.setupOrgForm.addEventListener('submit', async event => {
      event.preventDefault();
      clearStatus(els.setupOrgStatus);
      try {
        const payload = {
          name: els.setupOrgName.value,
          region: els.setupOrgRegion.value,
          religion: els.setupOrgFaith.value,
          locales: els.setupOrgLocales.value.split(',').map(x => x.trim()).filter(Boolean),
          timezone: els.setupOrgTimezone.value || undefined,
          stripeAccountId: els.setupOrgStripe.value || undefined
        };
        setStatus(els.setupOrgStatus, translate('status.savingOrganization', {}, 'Saving organization'));
        const data = await postJSON('/api/giving/organizations', payload);
        const org = data?.organization ?? data;
        if (!org?._id) {
          throw new Error(translate('status.organizationNotReturned', {}, 'Organization was not returned.'));
        }
        state.orgs.push(org);
        updateOrgOptions();
        setStatus(els.setupOrgStatus, translate('status.organizationReady', { name: org.name }, `${org.name} is ready for donations.`), 'success');
        els.setupOrgForm.reset();
      } catch (err) {
        setStatus(els.setupOrgStatus, err.message || translate('status.unableToSaveOrganization', {}, 'Unable to save organization'), 'error');
      }
    });

    els.setupCampaignForm.addEventListener('submit', async event => {
      event.preventDefault();
      clearStatus(els.setupCampaignStatus);
      try {
        const orgId = els.setupCampaignOrg.value;
        if (!orgId) {
          throw new Error(translate('status.selectOrganizationFirst', {}, 'Select an organization first.'));
        }
        const donationTypes = els.setupCampaignTypes.value.split(',').map(x => x.trim()).filter(Boolean);
        const payload = {
          orgId,
          name: els.setupCampaignName.value,
          code: els.setupCampaignCode.value || undefined,
          donationTypes: donationTypes.length ? donationTypes : undefined
        };
        setStatus(els.setupCampaignStatus, translate('status.savingCampaign', {}, 'Saving campaign'));
        const data = await postJSON('/api/giving/campaigns', payload);
        const campaign = data?.campaign ?? data;
        if (!campaign?._id) {
          throw new Error(translate('status.campaignNotReturned', {}, 'Campaign was not returned.'));
        }
        const list = state.campaignsByOrg.get(orgId) ?? [];
        list.push(campaign);
        state.campaignsByOrg.set(orgId, list);
        updateCampaignOptions(orgId);
        setStatus(els.setupCampaignStatus, translate('status.campaignReady', { name: campaign.name }, `${campaign.name} is ready for donors.`), 'success');
        els.setupCampaignForm.reset();
      } catch (err) {
        setStatus(els.setupCampaignStatus, err.message || translate('status.unableToSaveCampaign', {}, 'Unable to save campaign'), 'error');
      }
    });
  }

  function setupManagementTabs() {
    const container = els.manageCard;
    if (!container) return;
    const buttons = Array.from(container.querySelectorAll('[data-tab-target]'));
    if (!buttons.length) return;
    const panels = new Map();
    buttons.forEach(button => {
      const targetId = button.dataset.tabTarget;
      if (targetId) {
        const panel = document.getElementById(targetId);
        if (panel) {
          panels.set(targetId, panel);
        }
      }
    });

    function activate(button) {
      const targetId = button.dataset.tabTarget;
      if (!targetId || !panels.has(targetId)) return;
      buttons.forEach(btn => {
        const isActive = btn === button;
        btn.classList.toggle('is-active', isActive);
        btn.setAttribute('aria-selected', String(isActive));
        btn.tabIndex = isActive ? 0 : -1;
      });
      panels.forEach((panel, id) => {
        const isActive = id === targetId;
        panel.hidden = !isActive;
        panel.classList.toggle('is-active', isActive);
      });
    }

    buttons.forEach((button, index) => {
      button.addEventListener('click', () => activate(button));
      button.addEventListener('keydown', event => {
        if (event.key !== 'ArrowRight' && event.key !== 'ArrowLeft') return;
        event.preventDefault();
        const offset = event.key === 'ArrowRight' ? 1 : -1;
        const nextIndex = (index + offset + buttons.length) % buttons.length;
        const nextButton = buttons[nextIndex];
        if (nextButton) {
          nextButton.focus();
          activate(nextButton);
        }
      });
    });

    const initial = buttons.find(btn => btn.classList.contains('is-active')) ?? buttons[0];
    if (initial) {
      activate(initial);
    }
  }

  function init() {
    let initialLanguage = DEFAULT_LANGUAGE;
    if (typeof window !== 'undefined' && window?.localStorage) {
      try {
        const stored = window.localStorage.getItem(LANGUAGE_STORAGE_KEY);
        if (stored && getLanguageOption(stored)) {
          initialLanguage = stored;
        }
      } catch (error) {
        console.warn('Unable to read stored language', error);
      }
    }
    state.language = initialLanguage;
    applyLanguageAttributes(getLanguageOption(initialLanguage));
    applyStaticTranslations();
    initFaithLeaders();
    initLanguageSwitchers();
    updateFooterCopy();

    setupNarrationControls();
    renderSlides();
    if (typeof window !== 'undefined') {
      window.addEventListener('resize', () => updateTransitionOverlayForIndex(state.slideIndex));
      window.addEventListener('pagehide', stopNarrationPlayback);
      window.addEventListener('beforeunload', stopNarrationPlayback);
    }
    renderSectors();
    populateRegionSelects();
    populateFaithSelects();
    populateSectorSelects();
    setDonationTypeOptions(els.donationFaith.value);
    setupManagementTabs();
    attachEvents();
    ensureDefaultOrganizations();
    updateOrgOptions();
    loadOrganizations();
    loadCommunityCampaigns();
    loadFaithMetrics();
    if (typeof refreshQuickLocalizedContent === 'function') {
      refreshQuickLocalizedContent();
    }
    updateQuickMetricsDisplay();
    renderCommunityCampaigns(state.communityCampaigns);
  }

  init();
</script>
</body>
</html>
