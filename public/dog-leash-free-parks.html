<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Leash-Free Dog Parks Finder | Off-Leash Parks Across the USA</title>
  <meta name="description" content="Search a curated directory of leash-free and off-leash dog parks across the United States. Filter by state, region, amenities, and fees to plan your next dog adventure."/>
  <link rel="icon" href="/favicon-32.png" type="image/png"/>
  <style>
    :root{
      color-scheme: light dark;
      --bg:#0f172a;
      --card:#111b36;
      --surface:#162446;
      --ink:#f8fafc;
      --muted:#cbd5f5;
      --accent:#38bdf8;
      --accent-soft:rgba(56,189,248,.16);
      --accent-strong:#0ea5e9;
      --border:rgba(255,255,255,.14);
      --shadow:0 20px 50px rgba(15,23,42,.32);
      font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
    }
    *,*::before,*::after{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1430 0%,#020617 65%);color:var(--ink);min-height:100vh;display:flex;flex-direction:column}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}

    header{position:sticky;top:0;z-index:10;background:rgba(8,14,30,.85);backdrop-filter:blur(16px);border-bottom:1px solid rgba(148,163,184,.15)}
    .wrap{max-width:1080px;margin:0 auto;padding:20px 18px}
    .hero{display:grid;gap:16px}
    h1{font-size:2.6rem;line-height:1.1;margin:0;font-weight:800;letter-spacing:-.02em}
    p.lead{font-size:1.05rem;color:var(--muted);margin:8px 0 0}
    .tag{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:var(--accent-soft);color:var(--accent);font-weight:700;font-size:.85rem;margin-top:12px}

    main{flex:1}
    .filters{margin-top:26px;display:grid;gap:16px;background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    .filters label{font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);display:block;margin-bottom:6px}
    .filters .inputs{display:grid;gap:18px}
    .field{display:flex;flex-direction:column}
    input[type="search"],select{padding:12px 14px;border-radius:12px;border:1px solid rgba(148,163,184,.2);background:rgba(15,23,42,.82);color:var(--ink);font-size:1rem;box-shadow:inset 0 0 0 1px rgba(15,23,42,.2)}
    input[type="search"]::placeholder{color:rgba(203,213,225,.7)}
    .toggles{display:flex;flex-wrap:wrap;gap:12px}
    .toggle{display:flex;align-items:center;gap:10px;background:rgba(15,23,42,.72);border:1px solid rgba(148,163,184,.24);padding:10px 14px;border-radius:12px;font-size:.95rem}
    .toggle input{width:18px;height:18px}
    .results-meta{margin:24px 0 12px;display:flex;flex-wrap:wrap;gap:12px;align-items:center;color:var(--muted)}
    .download{margin-left:auto}
    .download a{display:inline-flex;gap:10px;align-items:center;padding:10px 14px;border-radius:999px;border:1px solid rgba(148,163,184,.2);background:rgba(15,23,42,.6);color:var(--muted);font-size:.9rem}

    .grid{display:grid;gap:18px}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:var(--shadow);display:grid;gap:10px;transition:transform .15s ease,box-shadow .2s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 26px 60px rgba(8,47,73,.45)}
    .card h2{margin:0;font-size:1.4rem;font-weight:800}
    .card .location{display:flex;flex-wrap:wrap;gap:10px;color:var(--muted);font-size:.95rem}
    .badge-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .badge{background:rgba(148,163,184,.14);color:var(--muted);padding:5px 10px;border-radius:999px;font-size:.78rem;font-weight:600}
    .amenities{color:var(--muted);font-size:.95rem;line-height:1.5;margin:4px 0 0;padding-left:18px}
    .notes{margin:0;color:#e2e8f0;font-size:.95rem;line-height:1.55}
    .actions{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px}
    .actions a{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;font-weight:600;font-size:.9rem;background:var(--accent-soft);color:var(--accent-strong);border:1px solid rgba(56,189,248,.24)}
    .actions a.secondary{background:rgba(15,23,42,.68);border-color:rgba(148,163,184,.28);color:var(--muted)}
    footer{border-top:1px solid rgba(148,163,184,.2);padding:24px 18px;color:var(--muted);text-align:center;font-size:.85rem}

    @media (min-width:720px){
      .hero{grid-template-columns:minmax(0,1fr) minmax(0,320px);align-items:center}
      .filters .inputs{grid-template-columns:repeat(4,minmax(0,1fr))}
      .grid{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}
      .card{padding:22px}
    }
    @media (prefers-color-scheme:light){
      :root{--bg:#f8fafc;--card:#ffffff;--surface:#ffffff;--ink:#0f172a;--muted:#475569;--accent:#0284c7;--accent-strong:#0369a1;--border:rgba(15,23,42,.08);--shadow:0 18px 50px rgba(15,23,42,.12)}
      body{background:linear-gradient(180deg,#e0f2fe 0%,#f8fafc 30%,#f1f5f9 100%)}
      header{background:rgba(248,250,252,.95)}
      input[type="search"],select{background:#f8fafc;color:#0f172a}
      .toggle{background:#f8fafc;border-color:rgba(148,163,184,.32)}
      .card{background:#ffffff}
      .actions a.secondary{background:#f8fafc;color:#0f172a}
      .download a{background:#f8fafc;color:#0f172a}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap hero">
      <div>
        <div class="tag">Nationwide directory ‚Ä¢ Updated manually from public open data</div>
        <h1>Find leash-free &amp; off-leash dog parks across the USA</h1>
        <p class="lead">Browse a curated dataset of municipal, county, and state-managed off-leash areas. Filter by location, amenities, or cost to plan your next dog adventure. Always double-check park rules before you go.</p>
      </div>
      <div class="filters">
        <div class="inputs">
          <div class="field">
            <label for="search">Search</label>
            <input type="search" id="search" placeholder="Search by park name, city, or feature" autocomplete="off"/>
          </div>
          <div class="field">
            <label for="state">State</label>
            <select id="state"></select>
          </div>
          <div class="field">
            <label for="region">Region</label>
            <select id="region">
              <option value="">All regions</option>
              <option value="Northeast">Northeast</option>
              <option value="South">South</option>
              <option value="Midwest">Midwest</option>
              <option value="West">West</option>
            </select>
          </div>
          <div class="field">
            <label for="sort">Sort by</label>
            <select id="sort">
              <option value="name">Name A‚ÄìZ</option>
              <option value="state">State A‚ÄìZ</option>
              <option value="size">Largest area</option>
            </select>
          </div>
        </div>
        <div class="toggles">
          <label class="toggle"><input type="checkbox" id="freeOnly"/> Only show free parks</label>
          <label class="toggle"><input type="checkbox" id="waterOnly"/> Must have water access</label>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <div class="results-meta">
        <div id="count">Loading parks‚Ä¶</div>
        <div class="download"><a href="./data/dog-off-leash-parks.json" download>‚¨áÔ∏è Download data (JSON)</a></div>
      </div>
      <div id="grid" class="grid" aria-live="polite"></div>
    </div>
  </main>

  <footer>
    Data compiled from municipal and state open data portals (2024). Verify rules, hours, and fees directly with the park before visiting; leash laws can change seasonally. Contributions &amp; corrections: <a href="mailto:info@delcotech.us">info@delcotech.us</a>.
  </footer>

  <script>
    const dataUrl = new URL('./data/dog-off-leash-parks.json', window.location.href).toString();
    const gridEl = document.getElementById('grid');
    const countEl = document.getElementById('count');
    const searchEl = document.getElementById('search');
    const stateEl = document.getElementById('state');
    const regionEl = document.getElementById('region');
    const sortEl = document.getElementById('sort');
    const freeOnlyEl = document.getElementById('freeOnly');
    const waterOnlyEl = document.getElementById('waterOnly');

    let parks = [];

    fetch(dataUrl)
      .then((res) => {
        if (!res.ok) throw new Error('Unable to load park data');
        return res.json();
      })
      .then((data) => {
        parks = data;
        populateStates(data);
        render();
      })
      .catch((err) => {
        console.error(err);
        countEl.textContent = 'Park data failed to load. Please refresh.';
      });

    function populateStates(data) {
      const states = Array.from(new Set(data.map((d) => d.state))).sort();
      stateEl.innerHTML = '<option value="">All states</option>' + states.map((st) => `<option value="${st}">${st}</option>`).join('');
    }

    function render() {
      const term = searchEl.value.trim().toLowerCase();
      const state = stateEl.value;
      const region = regionEl.value;
      const freeOnly = freeOnlyEl.checked;
      const waterOnly = waterOnlyEl.checked;
      const sort = sortEl.value;

      let filtered = parks.filter((park) => {
        const amenities = Array.isArray(park.amenities) ? park.amenities : [];
        const haystack = `${park.name} ${park.city} ${park.state} ${park.notes} ${amenities.join(' ')}`.toLowerCase();
        const matchesTerm = term ? haystack.includes(term) : true;
        const matchesState = state ? park.state === state : true;
        const matchesRegion = region ? park.region === region : true;
        const matchesFree = freeOnly ? /free/i.test(park.fee) : true;
        const hasWater = /water|lake|beach|river|pond|stream|creek|shoreline|swim/i.test(`${park.notes} ${amenities.join(' ')}`);
        const matchesWater = waterOnly ? hasWater : true;
        return matchesTerm && matchesState && matchesRegion && matchesFree && matchesWater;
      });

      filtered = filtered.sort((a, b) => {
        if (sort === 'name') {
          return a.name.localeCompare(b.name);
        }
        if (sort === 'state') {
          const stateCompare = a.state.localeCompare(b.state);
          return stateCompare !== 0 ? stateCompare : a.name.localeCompare(b.name);
        }
        if (sort === 'size') {
          return (b.size_acres || 0) - (a.size_acres || 0);
        }
        return 0;
      });

      gridEl.innerHTML = filtered.map((park) => renderCard(park)).join('');
      const noun = filtered.length === 1 ? 'park' : 'parks';
      countEl.textContent = `${filtered.length} ${noun} shown`;
    }

    function renderCard(park) {
      const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(park.name + ' ' + park.city + ', ' + park.state)}&query_place_id=`;
      const coordsUrl = park.lat && park.lon ? `https://maps.apple.com/?ll=${park.lat},${park.lon}&q=${encodeURIComponent(park.name)}` : null;
      const amenitiesList = Array.isArray(park.amenities) ? park.amenities : [];
      const amenities = amenitiesList.length ? `<ul class="amenities">${amenitiesList.map((item) => `<li>${item}</li>`).join('')}</ul>` : '';
      const badges = [`${park.city}, ${park.state}`, `${park.region} region`, park.size_acres ? `${park.size_acres} acres` : null].filter(Boolean);
      return `
        <article class="card">
          <h2>${park.name}</h2>
          <div class="location">${park.city}, ${park.state} ¬∑ ${park.region} ¬∑ ${park.fee}</div>
          <div class="badge-row">${badges.map((item) => `<span class="badge">${item}</span>`).join('')}</div>
          ${amenities}
          <p class="notes">${park.notes}</p>
          <div class="actions">
            <a href="${googleMapsUrl}" target="_blank" rel="noopener">üìç Open in Google Maps</a>
            ${coordsUrl ? `<a class="secondary" href="${coordsUrl}" target="_blank" rel="noopener">üß≠ Apple Maps</a>` : ''}
            <a class="secondary" href="${park.website}" target="_blank" rel="noopener">üìë Official info</a>
          </div>
        </article>
      `;
    }

    [searchEl, stateEl, regionEl, sortEl, freeOnlyEl, waterOnlyEl].forEach((input) => {
      input.addEventListener('input', render);
      input.addEventListener('change', render);
    });
  </script>
</body>
</html>
